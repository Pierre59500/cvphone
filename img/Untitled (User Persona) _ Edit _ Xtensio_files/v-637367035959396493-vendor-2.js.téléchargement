function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");if(function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||2<e[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(),function(g){"use strict";var m=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};m.VERSION="3.3.6",m.TRANSITION_DURATION=150,m.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},m.prototype.init=function(t,e,i){if(this.enabled=!0,this.type=t,this.$element=g(e),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&g(g.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),r=n.length;r--;){var o=n[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",a="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},m.prototype.getDefaults=function(){return m.DEFAULTS},m.prototype.getOptions=function(t){return(t=g.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},m.prototype.getDelegateOptions=function(){var i={},n=this.getDefaults();return this._options&&g.each(this._options,function(t,e){n[t]!=e&&(i[t]=e)}),i},m.prototype.enter=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);return e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),t instanceof g.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState?void(e.hoverState="in"):(clearTimeout(e.timeout),e.hoverState="in",e.options.delay&&e.options.delay.show?void(e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)):e.show())},m.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},m.prototype.leave=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);return e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),t instanceof g.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),e.isInStateTrue()?void 0:(clearTimeout(e.timeout),e.hoverState="out",e.options.delay&&e.options.delay.hide?void(e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)):e.hide())},m.prototype.show=function(){var t=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var i=this,n=this.tip(),r=this.getUID(this.type);this.setContent(),n.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&n.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,a=s.test(o);a&&(o=o.replace(s,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),l=n[0].offsetWidth,h=n[0].offsetHeight;if(a){var u=o,d=this.getPosition(this.$viewport);o="bottom"==o&&c.bottom+h>d.bottom?"top":"top"==o&&c.top-h<d.top?"bottom":"right"==o&&c.right+l>d.width?"left":"left"==o&&c.left-l<d.left?"right":o,n.removeClass(u).addClass(o)}var f=this.getCalculatedOffset(o,c,l,h);this.applyPlacement(f,o);var p=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};g.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",p).emulateTransitionEnd(m.TRANSITION_DURATION):p()}},m.prototype.applyPlacement=function(t,e){var i=this.tip(),n=i[0].offsetWidth,r=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),t.top+=o,t.left+=s,g.offset.setOffset(i[0],g.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),i.addClass("in");var a=i[0].offsetWidth,c=i[0].offsetHeight;"top"==e&&c!=r&&(t.top=t.top+r-c);var l=this.getViewportAdjustedDelta(e,t,a,c);l.left?t.left+=l.left:t.top+=l.top;var h=/top|bottom/.test(e),u=h?2*l.left-n+a:2*l.top-r+c,d=h?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(u,i[0][d],h)},m.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},m.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},m.prototype.hide=function(t){function e(){"in"!=i.hoverState&&n.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,n=g(this.$tip),r=g.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(n.removeClass("in"),g.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",e).emulateTransitionEnd(m.TRANSITION_DURATION):e(),this.hoverState=null,this)},m.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},m.prototype.hasContent=function(){return this.getTitle()},m.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],i="BODY"==e.tagName,n=e.getBoundingClientRect();null==n.width&&(n=g.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var r=i?{top:0,left:0}:t.offset(),o={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=i?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},n,o,s,r)},m.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},m.prototype.getViewportAdjustedDelta=function(t,e,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,c=e.top+o-s.scroll+n;a<s.top?r.top=s.top-a:c>s.top+s.height&&(r.top=s.top+s.height-c)}else{var l=e.left-o,h=e.left+o+i;l<s.left?r.left=s.left-l:h>s.right&&(r.left=s.left+s.width-h)}return r},m.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},m.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},m.prototype.tip=function(){if(!this.$tip&&(this.$tip=g(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},m.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},m.prototype.enable=function(){this.enabled=!0},m.prototype.disable=function(){this.enabled=!1},m.prototype.toggleEnabled=function(){this.enabled=!this.enabled},m.prototype.toggle=function(t){var e=this;t&&((e=g(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},m.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var t=g.fn.tooltip;g.fn.tooltip=function(n){return this.each(function(){var t=g(this),e=t.data("bs.tooltip"),i="object"==_typeof(n)&&n;(e||!/destroy|hide/.test(n))&&(e||t.data("bs.tooltip",e=new m(this,i)),"string"==typeof n&&e[n]())})},g.fn.tooltip.Constructor=m,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=t,this}}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||3<e[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(u){"use strict";function s(r){return this.each(function(){var t=u(this),e=t.data("bs.carousel"),i=u.extend({},d.DEFAULTS,t.data(),"object"==_typeof(r)&&r),n="string"==typeof r?r:i.slide;e||t.data("bs.carousel",e=new d(this,i)),"number"==typeof r?e.to(r):n?e[n]():i.interval&&e.pause().cycle()})}var d=function(t,e){this.$element=u(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",u.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",u.proxy(this.pause,this)).on("mouseleave.bs.carousel",u.proxy(this.cycle,this))};d.VERSION="3.3.7",d.TRANSITION_DURATION=600,d.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},d.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},d.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(u.proxy(this.next,this),this.options.interval)),this},d.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},d.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},d.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||t<0?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",this.$items.eq(t))},d.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&u.support.transition&&(this.$element.trigger(u.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},d.prototype.next=function(){return this.sliding?void 0:this.slide("next")},d.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},d.prototype.slide=function(t,e){var i=this.$element.find(".item.active"),n=e||this.getItemForDirection(t,i),r=this.interval,o="next"==t?"left":"right",s=this;if(n.hasClass("active"))return this.sliding=!1;var a=n[0],c=u.Event("slide.bs.carousel",{relatedTarget:a,direction:o});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=u(this.$indicators.children()[this.getItemIndex(n)]);l&&l.addClass("active")}var h=u.Event("slid.bs.carousel",{relatedTarget:a,direction:o});return u.support.transition&&this.$element.hasClass("slide")?(n.addClass(t),n[0].offsetWidth,i.addClass(o),n.addClass(o),i.one("bsTransitionEnd",function(){n.removeClass([t,o].join(" ")).addClass("active"),i.removeClass(["active",o].join(" ")),s.sliding=!1,setTimeout(function(){s.$element.trigger(h)},0)}).emulateTransitionEnd(d.TRANSITION_DURATION)):(i.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(h)),r&&this.cycle(),this}};var t=u.fn.carousel;u.fn.carousel=s,u.fn.carousel.Constructor=d,u.fn.carousel.noConflict=function(){return u.fn.carousel=t,this};var e=function(t){var e,i=u(this),n=u(i.attr("data-target")||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var r=u.extend({},n.data(),i.data()),o=i.attr("data-slide-to");o&&(r.interval=!1),s.call(n,r),o&&n.data("bs.carousel").to(o),t.preventDefault()}};u(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),u(window).on("load",function(){u('[data-ride="carousel"]').each(function(){var t=u(this);s.call(t,t.data())})})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(f){f.ui=f.ui||{},f.ui.version="1.12.1";var r,i=0,a=Array.prototype.slice;f.cleanData=(r=f.cleanData,function(t){var e,i,n;for(n=0;null!=(i=t[n]);n++)try{(e=f._data(i,"events"))&&e.remove&&f(i).triggerHandler("remove")}catch(t){}r(t)}),f.widget=function(t,i,e){var n,r,o,s={},a=t.split(".")[0],c=a+"-"+(t=t.split(".")[1]);return e||(e=i,i=f.Widget),f.isArray(e)&&(e=f.extend.apply(null,[{}].concat(e))),f.expr[":"][c.toLowerCase()]=function(t){return!!f.data(t,c)},f[a]=f[a]||{},n=f[a][t],r=f[a][t]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},f.extend(r,n,{version:e.version,_proto:f.extend({},e),_childConstructors:[]}),(o=new i).options=f.widget.extend({},o.options),f.each(e,function(e,o){return f.isFunction(o)?void(s[e]=function(){function n(){return i.prototype[e].apply(this,arguments)}function r(t){return i.prototype[e].apply(this,t)}return function(){var t,e=this._super,i=this._superApply;return this._super=n,this._superApply=r,t=o.apply(this,arguments),this._super=e,this._superApply=i,t}}()):void(s[e]=o)}),r.prototype=f.widget.extend(o,{widgetEventPrefix:n&&o.widgetEventPrefix||t},s,{constructor:r,namespace:a,widgetName:t,widgetFullName:c}),n?(f.each(n._childConstructors,function(t,e){var i=e.prototype;f.widget(i.namespace+"."+i.widgetName,r,e._proto)}),delete n._childConstructors):i._childConstructors.push(r),f.widget.bridge(t,r),r},f.widget.extend=function(t){for(var e,i,n=a.call(arguments,1),r=0,o=n.length;r<o;r++)for(e in n[r])i=n[r][e],n[r].hasOwnProperty(e)&&void 0!==i&&(t[e]=f.isPlainObject(i)?f.isPlainObject(t[e])?f.widget.extend({},t[e],i):f.widget.extend({},i):i);return t},f.widget.bridge=function(o,e){var s=e.prototype.widgetFullName||o;f.fn[o]=function(i){var t="string"==typeof i,n=a.call(arguments,1),r=this;return t?this.length||"instance"!==i?this.each(function(){var t,e=f.data(this,s);return"instance"===i?(r=e,!1):e?f.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,n))!==e&&void 0!==t?(r=t&&t.jquery?r.pushStack(t.get()):t,!1):void 0:f.error("no such method '"+i+"' for "+o+" widget instance"):f.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+i+"'")}):r=void 0:(n.length&&(i=f.widget.extend.apply(null,[i].concat(n))),this.each(function(){var t=f.data(this,s);t?(t.option(i||{}),t._init&&t._init()):f.data(this,s,new e(i,this))})),r}},f.Widget=function(){},f.Widget._childConstructors=[],f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=f(e||this.defaultElement||this)[0],this.element=f(e),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=f(),this.hoverable=f(),this.focusable=f(),this.classesElementLookup={},e!==this&&(f.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=f(e.style?e.ownerDocument:e.document||e),this.window=f(this.document[0].defaultView||this.document[0].parentWindow)),this.options=f.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:f.noop,_create:f.noop,_init:f.noop,destroy:function(){var i=this;this._destroy(),f.each(this.classesElementLookup,function(t,e){i._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:f.noop,widget:function(){return this.element},option:function(t,e){var i,n,r,o=t;if(0===arguments.length)return f.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(n=o[t]=f.widget.extend({},this.options[t]),r=0;i.length-1>r;r++)n[i[r]]=n[i[r]]||{},n=n[i[r]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,i,n;for(e in t)n=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&n&&n.length&&(i=f(n.get()),this._removeClass(n,e),i.addClass(this._classes({element:i,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(r){function t(t,e){var i,n;for(n=0;t.length>n;n++)i=s.classesElementLookup[t[n]]||f(),i=r.add?f(f.unique(i.get().concat(r.element.get()))):f(i.not(r.element).get()),s.classesElementLookup[t[n]]=i,o.push(t[n]),e&&r.classes[t[n]]&&o.push(r.classes[t[n]])}var o=[],s=this;return r=f.extend({element:this.element,classes:this.options.classes||{}},r),this._on(r.element,{remove:"_untrackClassesElement"}),r.keys&&t(r.keys.match(/\S+/g)||[],!0),r.extra&&t(r.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(i){var n=this;f.each(n.classesElementLookup,function(t,e){-1!==f.inArray(i.target,e)&&(n.classesElementLookup[t]=f(e.not(i.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var r="string"==typeof t||null===t,o={extra:r?e:i,keys:r?t:e,element:r?this.element:t,add:n};return o.element.toggleClass(this._classes(o),n),this},_on:function(s,a,t){var c,l=this;"boolean"!=typeof s&&(t=a,a=s,s=!1),t?(a=c=f(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,c=this.widget()),f.each(t,function(t,e){function i(){return s||!0!==l.options.disabled&&!f(this).hasClass("ui-state-disabled")?("string"==typeof e?l[e]:e).apply(l,arguments):void 0}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||f.guid++);var n=t.match(/^([\w:-]*)\s*(.*)$/),r=n[1]+l.eventNamespace,o=n[2];o?c.on(r,o,i):a.on(r,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=f(this.bindings.not(t).get()),this.focusable=f(this.focusable.not(t).get()),this.hoverable=f(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(f(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(f(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(f(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(f(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,i){var n,r,o=this.options[t];if(i=i||{},(e=f.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],r=e.originalEvent)for(n in r)n in e||(e[n]=r[n]);return this.element.trigger(e,i),!(f.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},f.each({show:"fadeIn",hide:"fadeOut"},function(o,s){f.Widget.prototype["_"+o]=function(e,t,i){"string"==typeof t&&(t={effect:t});var n,r=t?!0===t||"number"==typeof t?s:t.effect||s:o;"number"==typeof(t=t||{})&&(t={duration:t}),n=!f.isEmptyObject(t),t.complete=i,t.delay&&e.delay(t.delay),n&&f.effects&&f.effects.effect[r]?e[o](t):r!==o&&e[r]?e[r](t.duration,t.easing,i):e.queue(function(t){f(this)[o](),i&&i.call(e[0]),t()})}}),f.widget,f.extend(f.expr[":"],{data:f.expr.createPseudo?f.expr.createPseudo(function(e){return function(t){return!!f.data(t,e)}}):function(t,e,i){return!!f.data(t,i[3])}}),f.fn.scrollParent=function(t){var e=this.css("position"),i="absolute"===e,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=f(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&r.length?r:f(this[0].ownerDocument||document)},f.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var o=!1;f(document).on("mouseup",function(){o=!1}),f.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){return!0===f.data(t.target,e.widgetName+".preventClickEvent")?(f.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,i=1===t.which,n=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&f(t.target).closest(this.options.cancel).length;return i&&!n&&this._mouseCapture(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?t.preventDefault():(!0===f.data(t.target,this.widgetName+".preventClickEvent")&&f.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0)),!0}},_mouseMove:function(t){if(this._mouseMoved){if(f.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&f.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,o=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),f.widget("ui.sortable",f.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return e<=t&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),f.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var i=null,n=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),f(t.target).parents().each(function(){return f.data(this,r.widgetName+"-item")===r?(i=f(this),!1):void 0}),f.data(t.target,r.widgetName+"-item")===r&&(i=f(t.target)),!!i&&(!(this.options.handle&&!e&&(f(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(n=!0)}),!n))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,i){var n,r,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},f.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=f("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(n=this.containers.length-1;0<=n;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return f.ui.ddmanager&&(f.ui.ddmanager.current=this),f.ui.ddmanager&&!o.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,i,n,r,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==s&&f.ui.ddmanager&&!o.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(n=(i=this.items[e]).item[0],(r=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==n&&!f.contains(this.placeholder[0],n)&&("semi-dynamic"!==this.options.type||!f.contains(this.element[0],n))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),f.ui.ddmanager&&f.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(f.ui.ddmanager&&!this.options.dropBehaviour&&f.ui.ddmanager.drop(this,t),this.options.revert){var i=this,n=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,f(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new f.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),f.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?f(this.domPosition.prev).after(this.currentItem):f(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},f(t).each(function(){var t=(f(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&i.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(f(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,o=t.left,s=o+t.width,a=t.top,c=a+t.height,l=this.offset.click.top,h=this.offset.click.left,u="x"===this.options.axis||a<n+l&&n+l<c,d="y"===this.options.axis||o<e+h&&e+h<s,f=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:e+this.helperProportions.width/2>o&&s>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&c>r-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!!(n&&r)&&(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&i||"left"===r&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function e(){s.push(this)}var i,n,r,o,s=[],a=[],c=this._connectWith();if(c&&t)for(i=c.length-1;0<=i;i--)for(n=(r=f(c[i],this.document[0])).length-1;0<=n;n--)(o=f.data(r[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&a.push([f.isFunction(o.options.items)?o.options.items.call(o.element):f(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([f.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):f(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;0<=i;i--)a[i][0].each(e);return f(s)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=f.grep(this.items,function(t){for(var e=0;i.length>e;e++)if(i[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,i,n,r,o,s,a,c,l=this.items,h=[[f.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):f(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(e=u.length-1;0<=e;e--)for(i=(n=f(u[e],this.document[0])).length-1;0<=i;i--)(r=f.data(n[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&(h.push([f.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):f(r.options.items,r.element),r]),this.containers.push(r));for(e=h.length-1;0<=e;e--)for(o=h[e][1],i=0,c=(s=h[e][0]).length;i<c;i++)(a=f(s[i])).data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,i,n,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(i=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?f(this.options.toleranceElement,i.item):i.item,t||(i.width=n.outerWidth(),i.height=n.outerHeight()),r=n.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)r=this.containers[e].element.offset(),this.containers[e].containerCache.left=r.left,this.containers[e].containerCache.top=r.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(i){var n,r=(i=i||this).options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var t=i.currentItem[0].nodeName.toLowerCase(),e=f("<"+t+">",i.document[0]);return i._addClass(e,"ui-sortable-placeholder",n||i.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===t?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),f("<tr>",i.document[0]).appendTo(e)):"tr"===t?i._createTrPlaceholder(i.currentItem,e):"img"===t&&e.attr("src",i.currentItem.attr("src")),n||e.css("visibility","hidden"),e},update:function(t,e){(!n||r.forcePlaceholderSize)&&(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=f(r.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),r.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(t,e){var i=this;t.children().each(function(){f("<td>&#160;</td>",i.document[0]).attr("colspan",f(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,i,n,r,o,s,a,c,l,h,u=null,d=null;for(e=this.containers.length-1;0<=e;e--)if(!f.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(u&&f.contains(this.containers[e].element[0],u.element[0]))continue;u=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(n=1e4,r=null,o=(l=u.floating||this._isFloating(this.currentItem))?"left":"top",s=l?"width":"height",h=l?"pageX":"pageY",i=this.items.length-1;0<=i;i--)f.contains(this.containers[d].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(a=this.items[i].item.offset()[o],c=!1,t[h]-a>this.items[i][s]/2&&(c=!0),n>Math.abs(t[h]-a)&&(n=Math.abs(t[h]-a),r=this.items[i],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[d].element,!0),this._trigger("change",t,this._uiHash()),this.containers[d]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(t){var e=this.options,i=f.isFunction(e.helper)?f(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||f("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||e.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||e.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),f.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&f.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&f.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=f(n.containment)[0],e=f(n.containment).offset(),i="hidden"!==f(t).css("overflow"),this.containment=[e.left+(parseInt(f(t).css("borderLeftWidth"),10)||0)+(parseInt(f(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(f(t).css("borderTopWidth"),10)||0)+(parseInt(f(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(f(t).css("borderLeftWidth"),10)||0)-(parseInt(f(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(f(t).css("borderTopWidth"),10)||0)-(parseInt(f(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&f.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop())*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())*i}},_generatePosition:function(t){var e,i,n=this.options,r=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&f.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(e=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-n.grid[1]:e+n.grid[1]:e,i=this.originalPageX+Math.round((r-this.originalPageX)/n.grid[0])*n.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(e,i,n){return function(t){n._trigger(e,t,i._uiHash(i))}}this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;0<=n;n--)e||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;r.length>n;n++)r[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===f.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||f([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","jquery-ui"],t):t(jQuery)}(function(a){var c,l={},t=function(t){var e,i=document.createElement("div");for(e=0;e<t.length;e++)if(null!=i.style[t[e]])return t[e];return""};l.transform=t(["transform","WebkitTransform","MozTransform","OTransform","msTransform"]),l.transition=t(["transition","WebkitTransition","MozTransition","OTransition","msTransition"]),c=l.transform&&l.transition,a.widget("ui.sortable",a.ui.sortable,{options:{animation:0},_rearrange:function(t,e){var i,n,r={},o={},s=a.trim(this.options.axis);if(!parseInt(this.currentContainer.options.animation)||!s)return this._superApply(arguments);i=a(e.item[0]),n=("up"==this.direction?"":"-")+i["x"==s?"width":"height"]()+"px",this._superApply(arguments),c?r[l.transform]=("x"==s?"translateX":"translateY")+"("+n+")":(r={position:"relative"})["x"==s?"left":"top"]=n,i.css(r),c?(r[l.transition]=l.transform+" "+this.options.animation+"ms",r[l.transform]="",o[l.transform]="",o[l.transition]="",setTimeout(function(){i.css(r)},0)):(o.top="",o.position="",i.animate({top:"",position:""},this.options.animation)),setTimeout(function(){i.css(o)},this.options.animation)}})}),function(t,e){"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&"object"===_typeof(define.amd)?define(e):"function"==typeof define&&"object"===_typeof(define.petal)?define(t,[],e):this[t]=e()}("validator",function(h){"use strict";var u=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,f=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,g=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,a=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,c=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/,s=/^(?:[0-9]{9}X|[0-9]{10})$/,l=/^(?:[0-9]{13})$/,e=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,m=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/,v=/^[0-9A-F]{1,4}$/i,n={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},i=/^[A-Z]+$/i,r=/^[0-9A-Z]+$/i,o=/^[-+]?[0-9]+$/,y=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,_=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,b=/^[0-9A-F]+$/i,w=/^[-+]?([0-9]+|\.[0-9]+|[0-9]+\.[0-9]+)$/,x=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,C=/^[\x00-\x7F]+$/,S=/[^\x00-\x7F]/,k=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,T=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,K=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,P=/^(?:[A-Z0-9+\/]{4})*(?:[A-Z0-9+\/]{2}==|[A-Z0-9+\/]{3}=|[A-Z0-9+\/]{4})$/i,A={"zh-CN":/^(\+?0?86\-?)?1[345789]\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-HK":/^(\+?852\-?)?[569]\d{3}\-?\d{4}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"pt-PT":/^(\+351)?9[1236]\d{7}$/,"el-GR":/^(\+30)?((2\d{9})|(69\d{8}))$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-US":/^(\+?1)?[2-9]\d{2}[2-9](?!11)\d{6}$/,"en-ZM":/^(\+26)?09[567]\d{7}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"vi-VN":/^(0|\+?84)?((1(2([0-9])|6([2-9])|88|99))|(9((?!5)[0-9])))([0-9]{7})$/,"en-NZ":/^(\+?64|0)2\d{7,9}$/},M=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;(h={version:"4.4.0"}).extend=function(t,e){h[t]=function(){var t=Array.prototype.slice.call(arguments);return t[0]=h.toString(t[0]),e.apply(h,t)}},h.init=function(){for(var t in h)"function"==typeof h[t]&&"toString"!==t&&"toDate"!==t&&"extend"!==t&&"init"!==t&&h.extend(t,h[t])},h.toString=function(t){return"object"===_typeof(t)&&null!==t&&t.toString?t=t.toString():(null==t||isNaN(t)&&!t.length)&&(t=""),""+t},h.toDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)?t:(t=Date.parse(t),isNaN(t)?null:new Date(t))},h.toFloat=function(t){return parseFloat(t)},h.toInt=function(t,e){return parseInt(t,e||10)},h.toBoolean=function(t,e){return e?"1"===t||"true"===t:"0"!==t&&"false"!==t&&""!==t},h.equals=function(t,e){return t===h.toString(e)},h.contains=function(t,e){return 0<=t.indexOf(h.toString(e))};var E={allow_display_name:!(h.matches=function(t,e,i){return"[object RegExp]"!==Object.prototype.toString.call(e)&&(e=new RegExp(e,i)),e.test(t)}),allow_utf8_local_part:!0,require_tld:!0},$={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!(h.isEmail=function(t,e){if((e=F(e,E)).allow_display_name){var i=t.match(g);i&&(t=i[1])}var n=t.split("@"),r=n.pop(),o=n.join("@"),s=r.toLowerCase();if("gmail.com"!==s&&"googlemail.com"!==s||(o=o.replace(/\./g,"").toLowerCase()),!h.isByteLength(o,0,64)||!h.isByteLength(r,0,256))return!1;if(!h.isFQDN(r,{require_tld:e.require_tld}))return!1;if('"'===o[0])return o=o.slice(1,o.length-1),e.allow_utf8_local_part?p.test(o):d.test(o);for(var a=e.allow_utf8_local_part?f:u,c=o.split("."),l=0;l<c.length;l++)if(!a.test(c[l]))return!1;return!0}),require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1};h.isURL=function(t,e){if(!t||2083<=t.length||/\s/.test(t))return!1;if(0===t.indexOf("mailto:"))return!1;var i,n,r,o,s,a;if(e=F(e,$),1<(a=t.split("://")).length){if(i=a.shift(),e.require_valid_protocol&&-1===e.protocols.indexOf(i))return!1}else{if(e.require_protocol)return!1;e.allow_protocol_relative_urls&&"//"===t.substr(0,2)&&(a[0]=t.substr(2))}return!(1<(a=(t=(a=(t=(a=(t=(a=(t=a.join("://")).split("#")).shift()).split("?")).shift()).split("/")).shift()).split("@")).length&&0<=(n=a.shift()).indexOf(":")&&2<n.split(":").length)&&(r=(a=a.join("@").split(":")).shift(),!(a.length&&(s=a.join(":"),o=parseInt(s,10),!/^[0-9]+$/.test(s)||o<=0||65535<o))&&(!(!h.isIP(r)&&!h.isFQDN(r,e)&&"localhost"!==r)&&((!e.host_whitelist||-1!==e.host_whitelist.indexOf(r))&&(!e.host_blacklist||-1===e.host_blacklist.indexOf(r)))))},h.isMACAddress=function(t){return e.test(t)};var O={require_tld:!0,allow_underscores:!(h.isIP=function(t,e){if(!(e=h.toString(e)))return h.isIP(t,4)||h.isIP(t,6);if("4"===e)return!!m.test(t)&&t.split(".").sort(function(t,e){return t-e})[3]<=255;if("6"!==e)return!1;var i=t.split(":"),n=!1,r=h.isIP(i[i.length-1],4),o=r?7:8;if(i.length>o)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(i.shift(),i.shift(),n=!0):"::"===t.substr(t.length-2)&&(i.pop(),i.pop(),n=!0);for(var s=0;s<i.length;++s)if(""===i[s]&&0<s&&s<i.length-1){if(n)return!1;n=!0}else if(r&&s==i.length-1);else if(!v.test(i[s]))return!1;return n?1<=i.length:i.length===o}),allow_trailing_dot:!1};h.isFQDN=function(t,e){(e=F(e,O)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));var i=t.split(".");if(e.require_tld){var n=i.pop();if(!i.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(n))return!1}for(var r,o=0;o<i.length;o++){if(r=i[o],e.allow_underscores){if(0<=r.indexOf("__"))return!1;r=r.replace(/_/g,"")}if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(r))return!1;if(/[\uff01-\uff5e]/.test(r))return!1;if("-"===r[0]||"-"===r[r.length-1]||0<=r.indexOf("---"))return!1}return!0},h.isBoolean=function(t){return 0<=["true","false","1","0"].indexOf(t)},h.isAlpha=function(t){return i.test(t)},h.isAlphanumeric=function(t){return r.test(t)},h.isNumeric=function(t){return o.test(t)},h.isDecimal=function(t){return""!==t&&w.test(t)},h.isHexadecimal=function(t){return b.test(t)},h.isHexColor=function(t){return x.test(t)},h.isLowercase=function(t){return t===t.toLowerCase()},h.isUppercase=function(t){return t===t.toUpperCase()},h.isInt=function(t,e){return e=e||{},y.test(t)&&(!e.hasOwnProperty("min")||t>=e.min)&&(!e.hasOwnProperty("max")||t<=e.max)},h.isFloat=function(t,e){return e=e||{},""!==t&&"."!==t&&(_.test(t)&&(!e.hasOwnProperty("min")||t>=e.min)&&(!e.hasOwnProperty("max")||t<=e.max))},h.isDivisibleBy=function(t,e){return h.toFloat(t)%h.toInt(e)==0},h.isNull=function(t){return 0===t.length},h.isLength=function(t,e,i){var n=t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],r=t.length-n.length;return e<=r&&(void 0===i||r<=i)},h.isByteLength=function(t,e,i){var n=encodeURI(t).split(/%..|./).length-1;return e<=n&&(void 0===i||n<=i)},h.isUUID=function(t,e){var i=n[e||"all"];return i&&i.test(t)},h.isDate=function(t){var e=new Date(Date.parse(t));if(isNaN(e))return!1;var i=function(t){var e,i,n,r,o=t.match(M);if(o){if(!(e=o[21])||"z"===e||"Z"===e)return 0;i=o[22],r=-1!==e.indexOf(":")?(n=parseInt(o[23]),parseInt(o[24])):(n=0,parseInt(o[23]))}else{if(!(e=(t=t.toLowerCase()).match(/(?:\s|gmt\s*)(-|\+)(\d{1,4})(\s|$)/)))return-1!==t.indexOf("gmt")?0:null;i=e[1];var s=e[2];3===s.length&&(s="0"+s),r=s.length<=2?(n=0,parseInt(s)):(n=parseInt(s.slice(0,2)),parseInt(s.slice(2,4)))}return(60*n+r)*("-"===i?1:-1)}(t);if(null!==i){var n=e.getTimezoneOffset()-i;e=new Date(e.getTime()+6e4*n)}var r,o,s,a=String(e.getDate());return!(o=t.match(/(^|[^:\d])[23]\d([^:\d]|$)/g))||(r=o.map(function(t){return t.match(/\d+/g)[0]}).join("/"),s=String(e.getFullYear()).slice(-2),r===a||r===s||(r===a+"/"+s||r===s+"/"+a))},h.isAfter=function(t,e){var i=h.toDate(e||new Date),n=h.toDate(t);return!!(n&&i&&i<n)},h.isBefore=function(t,e){var i=h.toDate(e||new Date),n=h.toDate(t);return!!(n&&i&&n<i)},h.isIn=function(t,e){var i;if("[object Array]"!==Object.prototype.toString.call(e))return"object"===_typeof(e)?e.hasOwnProperty(t):!(!e||"function"!=typeof e.indexOf)&&0<=e.indexOf(t);var n=[];for(i in e)n[i]=h.toString(e[i]);return 0<=n.indexOf(t)},h.isWhitelisted=function(t,e){for(var i=t.length-1;0<=i;i--)if(-1===e.indexOf(t[i]))return!1;return!0},h.isCreditCard=function(t){var e=t.replace(/[^0-9]+/g,"");if(!a.test(e))return!1;for(var i,n,r,o=0,s=e.length-1;0<=s;s--)i=e.substring(s,s+1),n=parseInt(i,10),o+=r&&10<=(n*=2)?n%10+1:n,r=!r;return!(o%10!=0||!e)},h.isISIN=function(t){if(!c.test(t))return!1;for(var e,i,n=t.replace(/[A-Z]/g,function(t){return parseInt(t,36)}),r=0,o=!0,s=n.length-2;0<=s;s--)e=n.substring(s,s+1),i=parseInt(e,10),r+=o&&10<=(i*=2)?i+1:i,o=!o;return parseInt(t.substr(t.length-1),10)===(1e4-r)%10},h.isISBN=function(t,e){if(!(e=h.toString(e)))return h.isISBN(t,10)||h.isISBN(t,13);var i,n=t.replace(/[\s-]+/g,""),r=0;if("10"===e){if(!s.test(n))return!1;for(i=0;i<9;i++)r+=(i+1)*n.charAt(i);if("X"===n.charAt(9)?r+=100:r+=10*n.charAt(9),r%11==0)return!!n}else if("13"===e){if(!l.test(n))return!1;var o=[1,3];for(i=0;i<12;i++)r+=o[i%2]*n.charAt(i);if(n.charAt(12)-(10-r%10)%10==0)return!!n}return!1};var I={symbol:"$",require_symbol:!(h.isMobilePhone=function(t,e){return e in A&&A[e].test(t)}),allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_space_after_digits:!1};h.isCurrency=function(t,e){return function(t){var e="(\\"+t.symbol.replace(/\./g,"\\.")+")"+(t.require_symbol?"":"?"),i="[1-9]\\d{0,2}(\\"+t.thousands_separator+"\\d{3})*",n="("+["0","[1-9]\\d*",i].join("|")+")?",r="(\\"+t.decimal_separator+"\\d{2})?",o=n+r;t.allow_negatives&&!t.parens_for_negatives&&(t.negative_sign_after_digits?o+="-?":t.negative_sign_before_digits&&(o="-?"+o));t.allow_negative_sign_placeholder?o="( (?!\\-))?"+o:t.allow_space_after_symbol?o=" ?"+o:t.allow_space_after_digits&&(o+="( (?!$))?");t.symbol_after_digits?o+=e:o=e+o;t.allow_negatives&&(t.parens_for_negatives?o="(\\("+o+"\\)|"+o+")":t.negative_sign_before_digits||t.negative_sign_after_digits||(o="-?"+o));return new RegExp("^(?!-? )(?=.*\\d)"+o+"$")}(e=F(e,I)).test(t)},h.isJSON=function(t){try{var e=JSON.parse(t);return!!e&&"object"===_typeof(e)}catch(t){}return!1},h.isMultibyte=function(t){return S.test(t)},h.isAscii=function(t){return C.test(t)},h.isFullWidth=function(t){return k.test(t)},h.isHalfWidth=function(t){return T.test(t)},h.isVariableWidth=function(t){return k.test(t)&&T.test(t)},h.isSurrogatePair=function(t){return K.test(t)},h.isBase64=function(t){return P.test(t)},h.isMongoId=function(t){return h.isHexadecimal(t)&&24===t.length},h.isISO8601=function(t){return M.test(t)},h.ltrim=function(t,e){var i=e?new RegExp("^["+e+"]+","g"):/^\s+/g;return t.replace(i,"")},h.rtrim=function(t,e){var i=e?new RegExp("["+e+"]+$","g"):/\s+$/g;return t.replace(i,"")},h.trim=function(t,e){var i=e?new RegExp("^["+e+"]+|["+e+"]+$","g"):/^\s+|\s+$/g;return t.replace(i,"")},h.escape=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\`/g,"&#96;")},h.stripLow=function(t,e){var i=e?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return h.blacklist(t,i)},h.whitelist=function(t,e){return t.replace(new RegExp("[^"+e+"]+","g"),"")},h.blacklist=function(t,e){return t.replace(new RegExp("["+e+"]+","g"),"")};var D={lowercase:!0,remove_dots:!0,remove_extension:!0};function F(t,e){for(var i in t=t||{},e)void 0===t[i]&&(t[i]=e[i]);return t}return h.normalizeEmail=function(t,e){if(e=F(e,D),!h.isEmail(t))return!1;var i=t.split("@",2);if(i[1]=i[1].toLowerCase(),"gmail.com"===i[1]||"googlemail.com"===i[1]){if(e.remove_extension&&(i[0]=i[0].split("+")[0]),e.remove_dots&&(i[0]=i[0].replace(/\./g,"")),!i[0].length)return!1;i[0]=i[0].toLowerCase(),i[1]="gmail.com"}else e.lowercase&&(i[0]=i[0].toLowerCase());return i.join("@")},h.init(),h}),function(t){"use strict";function n(t){return t.length||Object.keys(t).length||0}function r(t,e){var i=[],n=[];return t.forEach(function(t){void 0!==t[e]&&void 0===i[t[e]]&&(i[t[e]]=1,n.push(t))}),n}function o(t,i){if(!i)return t;if("string"==typeof i)i={key:i,type:1};else if("object"==_typeof(i)){var e=Object.keys(i)[0];i={key:e,type:i[e]}}return t.sort(function(t,e){return t[i.key]<e[i.key]?-1*i.type:t[i.key]>e[i.key]?1*i.type:0})}function c(t,e){return e&&"object"==_typeof(e)&&null!==e?(e.unique&&(t=r(t,e.unique)),(e.sort||e.orderBy)&&(t=o(t,e.sort||e.orderBy)),e.skip&&0<e.skip&&e.limit&&0<e.limit&&(e.limit+=e.skip),t.slice(e.skip,e.limit)):t}Array.prototype.containsArray=function(t){var e=null,i=null;return arguments[1]?(e=arguments[1],i=arguments[2]):(i=e=0,this.sort(),t.sort()),e===t.length||-1<(i=this.indexOf(t[e],i))&&this.containsArray(t,++e,++i)};var e=function(i){var a=i;return{find:function(r,t){if(t=t||{},!r||null===r||null!==r&&0===n(r))return a=c(i,t),this;var e=a;a=[];var o=n(r),s=0;return e.forEach(function(t){for(var e in s=0,r)(void 0!==t[e]&&(r[e]===1/0||(i=r[e],n=t[e],i==n||("string"==typeof i?"string"==typeof n&&i.toLowerCase()==n.toLowerCase()||Array.isArray(n)&&-1<n.indexOf(i):Array.isArray(i)?!Array.isArray(n)&&-1<i.indexOf(n)||Array.isArray(n)&&n.containsArray(i):null!==i&&"object"==_typeof(i)&&(void 0!==i.exec&&null!==i.exec(n)||i.$ne&&n!==i.$ne||n<i.$lt||n<=i.$lte||n>i.$gt||n>=i.$gte))))||r[e]===-1/0&&!t[e])&&s++,s==o&&a.push(t);var i,n}),a=c(a,t),this},findOne:function(t){return this.find(t,{limit:1})},each:function(i){if("function"!=typeof i)throw Error('.each accepts a function, "'+_typeof(i)+'" passed instead.');return a.forEach(function(t,e){i.call(this,t,e)}),this},filter:function(i){if("function"!=typeof i)throw Error('.filter accepts a function, "'+_typeof(i)+'" passed instead.');var t=a;return a=[],t.forEach(function(t,e){!0===i.call(this,t,e)&&a.push(t)}),this},sort:function(t){return a=o(a,t),this},unique:function(t){return a=r(a,t),this},skip:function(t){return a=a.slice(t),this},limit:function(t){return a=a.slice(0,t),this},then:function(t){if("function"!=typeof t)throw Error('.then accepts a function, "'+_typeof(t)+'" passed instead.');return t.call(null,a),this},count:function(){return a.length},get:function(){return a}}};e.ANY=1/0,e.NONE=-1/0,e.SORT={ASC:1,DSC:-1},e.match=RegExp,e.gt=function(t){return{$gt:t}},e.gte=function(t){return{$gte:t}},e.lt=function(t){return{$lt:t}},e.lte=function(t){return{$lte:t}},e.ne=function(t){return{$ne:t}},"object"==("undefined"==typeof module?"undefined":_typeof(module))&&"object"==_typeof(module.exports)?module.exports=e:"function"==typeof define&&define.amd?define("Faltu",[],function(){return e}):t.Faltu=e}(this),function(){var is,ns="Expected a function",rs="__lodash_hash_undefined__",os="__lodash_placeholder__",ss=128,as=9007199254740991,cs=NaN,ls=4294967295,hs=[["ary",ss],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],us="[object Arguments]",ds="[object Array]",fs="[object Boolean]",ps="[object Date]",gs="[object Error]",ms="[object Function]",vs="[object GeneratorFunction]",ys="[object Map]",_s="[object Number]",bs="[object Object]",ws="[object Promise]",xs="[object RegExp]",Cs="[object Set]",Ss="[object String]",ks="[object Symbol]",Ts="[object WeakMap]",Ks="[object ArrayBuffer]",Ps="[object DataView]",As="[object Float32Array]",Ms="[object Float64Array]",Es="[object Int8Array]",$s="[object Int16Array]",Os="[object Int32Array]",Is="[object Uint8Array]",Ds="[object Uint8ClampedArray]",Fs="[object Uint16Array]",js="[object Uint32Array]",Ns=/\b__p \+= '';/g,Ls=/\b(__p \+=) '' \+/g,Rs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zs=/&(?:amp|lt|gt|quot|#39);/g,Bs=/[&<>"']/g,Hs=RegExp(zs.source),Ws=RegExp(Bs.source),Gs=/<%-([\s\S]+?)%>/g,Us=/<%([\s\S]+?)%>/g,qs=/<%=([\s\S]+?)%>/g,Vs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ys=/^\w*$/,Xs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qs=/[\\^$.*+?()[\]{}|]/g,Zs=RegExp(Qs.source),Js=/^\s+|\s+$/g,ta=/^\s+/,ea=/\s+$/,ia=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,na=/\{\n\/\* \[wrapped with (.+)\] \*/,ra=/,? & /,oa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sa=/\\(\\)?/g,aa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ca=/\w*$/,la=/^[-+]0x[0-9a-f]+$/i,ha=/^0b[01]+$/i,ua=/^\[object .+?Constructor\]$/,da=/^0o[0-7]+$/i,fa=/^(?:0|[1-9]\d*)$/,pa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ga=/($^)/,ma=/['\n\r\u2028\u2029\\]/g,t="\\ud800-\\udfff",e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",i="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\ufe0e\\ufe0f",s="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="['’]",c="["+t+"]",l="["+s+"]",h="["+e+"]",u="\\d+",d="["+i+"]",f="["+n+"]",p="[^"+t+s+u+i+n+r+"]",g="\\ud83c[\\udffb-\\udfff]",m="[^"+t+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",_="["+r+"]",b="\\u200d",w="(?:"+f+"|"+p+")",x="(?:"+_+"|"+p+")",C="(?:['’](?:d|ll|m|re|s|t|ve))?",S="(?:['’](?:D|LL|M|RE|S|T|VE))?",k="(?:"+h+"|"+g+")"+"?",T="["+o+"]?",K=T+k+("(?:"+b+"(?:"+[m,v,y].join("|")+")"+T+k+")*"),P="(?:"+[d,v,y].join("|")+")"+K,A="(?:"+[m+h+"?",h,v,y,c].join("|")+")",va=RegExp(a,"g"),ya=RegExp(h,"g"),M=RegExp(g+"(?="+g+")|"+A+K,"g"),_a=RegExp([_+"?"+f+"+"+C+"(?="+[l,_,"$"].join("|")+")",x+"+"+S+"(?="+[l,_+w,"$"].join("|")+")",_+"?"+w+"+"+C,_+"+"+S,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",u,P].join("|"),"g"),E=RegExp("["+b+t+e+o+"]"),ba=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xa=-1,Ca={};Ca[As]=Ca[Ms]=Ca[Es]=Ca[$s]=Ca[Os]=Ca[Is]=Ca[Ds]=Ca[Fs]=Ca[js]=!0,Ca[us]=Ca[ds]=Ca[Ks]=Ca[fs]=Ca[Ps]=Ca[ps]=Ca[gs]=Ca[ms]=Ca[ys]=Ca[_s]=Ca[bs]=Ca[xs]=Ca[Cs]=Ca[Ss]=Ca[Ts]=!1;var Sa={};Sa[us]=Sa[ds]=Sa[Ks]=Sa[Ps]=Sa[fs]=Sa[ps]=Sa[As]=Sa[Ms]=Sa[Es]=Sa[$s]=Sa[Os]=Sa[ys]=Sa[_s]=Sa[bs]=Sa[xs]=Sa[Cs]=Sa[Ss]=Sa[ks]=Sa[Is]=Sa[Ds]=Sa[Fs]=Sa[js]=!0,Sa[gs]=Sa[ms]=Sa[Ts]=!1;var $={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ka=parseFloat,Ta=parseInt,O="object"==("undefined"==typeof global?"undefined":_typeof(global))&&global&&global.Object===Object&&global,I="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,Ka=O||I||Function("return this")(),D="object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,F=D&&"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module&&!module.nodeType&&module,Pa=F&&F.exports===D,j=Pa&&O.process,N=function(){try{var t=F&&F.require&&F.require("util").types;return t||j&&j.binding&&j.binding("util")}catch(t){}}(),Aa=N&&N.isArrayBuffer,Ma=N&&N.isDate,Ea=N&&N.isMap,$a=N&&N.isRegExp,Oa=N&&N.isSet,Ia=N&&N.isTypedArray;function Da(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function Fa(t,e,i,n){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(n,s,i(s),t)}return n}function ja(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}function Na(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}function La(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function Ra(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var s=t[i];e(s,i,t)&&(o[r++]=s)}return o}function za(t,e){return!!(null==t?0:t.length)&&-1<Xa(t,e,0)}function Ba(t,e,i){for(var n=-1,r=null==t?0:t.length;++n<r;)if(i(e,t[n]))return!0;return!1}function Ha(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}function Wa(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function Ga(t,e,i,n){var r=-1,o=null==t?0:t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function Ua(t,e,i,n){var r=null==t?0:t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function qa(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}var L=tc("length");function Va(t,n,e){var r;return e(t,function(t,e,i){if(n(t,e,i))return r=e,!1}),r}function Ya(t,e,i,n){for(var r=t.length,o=i+(n?1:-1);n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Xa(t,e,i){return e==e?function(t,e,i){var n=i-1,r=t.length;for(;++n<r;)if(t[n]===e)return n;return-1}(t,e,i):Ya(t,Za,i)}function Qa(t,e,i,n){for(var r=i-1,o=t.length;++r<o;)if(n(t[r],e))return r;return-1}function Za(t){return t!=t}function Ja(t,e){var i=null==t?0:t.length;return i?ic(t,e)/i:cs}function tc(e){return function(t){return null==t?is:t[e]}}function R(e){return function(t){return null==e?is:e[t]}}function ec(t,n,r,o,e){return e(t,function(t,e,i){r=o?(o=!1,t):n(r,t,e,i)}),r}function ic(t,e){for(var i,n=-1,r=t.length;++n<r;){var o=e(t[n]);o!==is&&(i=i===is?o:i+o)}return i}function nc(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function rc(e){return function(t){return e(t)}}function oc(e,t){return Ha(t,function(t){return e[t]})}function sc(t,e){return t.has(e)}function ac(t,e){for(var i=-1,n=t.length;++i<n&&-1<Xa(e,t[i],0););return i}function cc(t,e){for(var i=t.length;i--&&-1<Xa(e,t[i],0););return i}var lc=R({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),hc=R({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function uc(t){return"\\"+$[t]}function dc(t){return E.test(t)}function fc(t){var i=-1,n=Array(t.size);return t.forEach(function(t,e){n[++i]=[e,t]}),n}function pc(e,i){return function(t){return e(i(t))}}function gc(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var s=t[i];s!==e&&s!==os||(t[i]=os,o[r++]=i)}return o}function mc(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}function vc(t){return dc(t)?function(t){var e=M.lastIndex=0;for(;M.test(t);)++e;return e}(t):L(t)}function yc(t){return dc(t)?t.match(M)||[]:t.split("")}var _c=R({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var bc=function t(e){var i,P=(e=null==e?Ka:bc.defaults(Ka.Object(),e,bc.pick(Ka,wa))).Array,n=e.Date,r=e.Error,m=e.Function,o=e.Math,S=e.Object,v=e.RegExp,h=e.String,A=e.TypeError,s=P.prototype,a=m.prototype,u=S.prototype,c=e["__core-js_shared__"],l=a.toString,k=u.hasOwnProperty,d=0,f=(i=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",p=u.toString,g=l.call(S),y=Ka._,_=v("^"+l.call(k).replace(Qs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=Pa?e.Buffer:is,w=e.Symbol,x=e.Uint8Array,C=b?b.allocUnsafe:is,T=pc(S.getPrototypeOf,S),K=S.create,M=u.propertyIsEnumerable,E=s.splice,$=w?w.isConcatSpreadable:is,O=w?w.iterator:is,I=w?w.toStringTag:is,D=function(){try{var t=Li(S,"defineProperty");return t({},"",{}),t}catch(t){}}(),F=e.clearTimeout!==Ka.clearTimeout&&e.clearTimeout,j=n&&n.now!==Ka.Date.now&&n.now,N=e.setTimeout!==Ka.setTimeout&&e.setTimeout,L=o.ceil,R=o.floor,z=S.getOwnPropertySymbols,B=b?b.isBuffer:is,H=e.isFinite,W=s.join,G=pc(S.keys,S),U=o.max,q=o.min,V=n.now,Y=e.parseInt,X=o.random,Q=s.reverse,Z=Li(e,"DataView"),J=Li(e,"Map"),tt=Li(e,"Promise"),et=Li(e,"Set"),it=Li(e,"WeakMap"),nt=Li(S,"create"),rt=it&&new it,ot={},st=pn(Z),at=pn(J),ct=pn(tt),lt=pn(et),ht=pn(it),ut=w?w.prototype:is,dt=ut?ut.valueOf:is,ft=ut?ut.toString:is;function pt(t){if(Er(t)&&!br(t)&&!(t instanceof yt)){if(t instanceof vt)return t;if(k.call(t,"__wrapped__"))return gn(t)}return new vt(t)}var gt=function(){function i(){}return function(t){if(!Mr(t))return{};if(K)return K(t);i.prototype=t;var e=new i;return i.prototype=is,e}}();function mt(){}function vt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=is}function yt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ls,this.__views__=[]}function _t(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function bt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function wt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function xt(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new wt;++e<i;)this.add(t[e])}function Ct(t){var e=this.__data__=new bt(t);this.size=e.size}function St(t,e){var i=br(t),n=!i&&_r(t),r=!i&&!n&&Sr(t),o=!i&&!n&&!r&&Lr(t),s=i||n||r||o,a=s?nc(t.length,h):[],c=a.length;for(var l in t)!e&&!k.call(t,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ui(l,c))||a.push(l);return a}function kt(t){var e=t.length;return e?t[xe(0,e-1)]:is}function Tt(t,e){return ln(ni(t),Dt(e,0,t.length))}function Kt(t){return ln(ni(t))}function Pt(t,e,i){(i===is||mr(t[e],i))&&(i!==is||e in t)||Ot(t,e,i)}function At(t,e,i){var n=t[e];k.call(t,e)&&mr(n,i)&&(i!==is||e in t)||Ot(t,e,i)}function Mt(t,e){for(var i=t.length;i--;)if(mr(t[i][0],e))return i;return-1}function Et(t,n,r,o){return Rt(t,function(t,e,i){n(o,t,r(t),i)}),o}function $t(t,e){return t&&ri(e,ao(e),t)}function Ot(t,e,i){"__proto__"==e&&D?D(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function It(t,e){for(var i=-1,n=e.length,r=P(n),o=null==t;++i<n;)r[i]=o?is:io(t,e[i]);return r}function Dt(t,e,i){return t==t&&(i!==is&&(t=t<=i?t:i),e!==is&&(t=e<=t?t:e)),t}function Ft(i,n,r,t,e,o){var s,a=1&n,c=2&n,l=4&n;if(r&&(s=e?r(i,t,e,o):r(i)),s!==is)return s;if(!Mr(i))return i;var h,u,d,f,p,g,m,v,y,_=br(i);if(_){if(v=(m=i).length,y=new m.constructor(v),v&&"string"==typeof m[0]&&k.call(m,"index")&&(y.index=m.index,y.input=m.input),s=y,!a)return ni(i,s)}else{var b=Bi(i),w=b==ms||b==vs;if(Sr(i))return Qe(i,a);if(b==bs||b==us||w&&!e){if(s=c||w?{}:Wi(i),!a)return c?(g=d=i,f=(p=s)&&ri(g,co(g),p),ri(d,zi(d),f)):(u=$t(s,h=i),ri(h,Ri(h),u))}else{if(!Sa[b])return e?i:{};s=function(t,e,i){var n,r,o,s,a,c=t.constructor;switch(e){case Ks:return Ze(t);case fs:case ps:return new c(+t);case Ps:return s=t,a=i?Ze(s.buffer):s.buffer,new s.constructor(a,s.byteOffset,s.byteLength);case As:case Ms:case Es:case $s:case Os:case Is:case Ds:case Fs:case js:return Je(t,i);case ys:return new c;case _s:case Ss:return new c(t);case xs:return(o=new(r=t).constructor(r.source,ca.exec(r))).lastIndex=r.lastIndex,o;case Cs:return new c;case ks:return n=t,dt?S(dt.call(n)):{}}}(i,b,a)}}o||(o=new Ct);var x=o.get(i);if(x)return x;if(o.set(i,s),Fr(i))return i.forEach(function(t){s.add(Ft(t,n,r,t,i,o))}),s;if($r(i))return i.forEach(function(t,e){s.set(e,Ft(t,n,r,e,i,o))}),s;var C=_?is:(l?c?$i:Ei:c?co:ao)(i);return ja(C||i,function(t,e){C&&(t=i[e=t]),At(s,e,Ft(t,n,r,e,i,o))}),s}function jt(t,e,i){var n=i.length;if(null==t)return!n;for(t=S(t);n--;){var r=i[n],o=e[r],s=t[r];if(s===is&&!(r in t)||!o(s))return!1}return!0}function Nt(t,e,i){if("function"!=typeof t)throw new A(ns);return on(function(){t.apply(is,i)},e)}function Lt(t,e,i,n){var r=-1,o=za,s=!0,a=t.length,c=[],l=e.length;if(!a)return c;i&&(e=Ha(e,rc(i))),n?(o=Ba,s=!1):200<=e.length&&(o=sc,s=!1,e=new xt(e));t:for(;++r<a;){var h=t[r],u=null==i?h:i(h);if(h=n||0!==h?h:0,s&&u==u){for(var d=l;d--;)if(e[d]===u)continue t;c.push(h)}else o(e,u,n)||c.push(h)}return c}pt.templateSettings={escape:Gs,evaluate:Us,interpolate:qs,variable:"",imports:{_:pt}},(pt.prototype=mt.prototype).constructor=pt,(vt.prototype=gt(mt.prototype)).constructor=vt,(yt.prototype=gt(mt.prototype)).constructor=yt,_t.prototype.clear=function(){this.__data__=nt?nt(null):{},this.size=0},_t.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},_t.prototype.get=function(t){var e=this.__data__;if(nt){var i=e[t];return i===rs?is:i}return k.call(e,t)?e[t]:is},_t.prototype.has=function(t){var e=this.__data__;return nt?e[t]!==is:k.call(e,t)},_t.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=nt&&e===is?rs:e,this},bt.prototype.clear=function(){this.__data__=[],this.size=0},bt.prototype.delete=function(t){var e=this.__data__,i=Mt(e,t);return!(i<0||(i==e.length-1?e.pop():E.call(e,i,1),--this.size,0))},bt.prototype.get=function(t){var e=this.__data__,i=Mt(e,t);return i<0?is:e[i][1]},bt.prototype.has=function(t){return-1<Mt(this.__data__,t)},bt.prototype.set=function(t,e){var i=this.__data__,n=Mt(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},wt.prototype.clear=function(){this.size=0,this.__data__={hash:new _t,map:new(J||bt),string:new _t}},wt.prototype.delete=function(t){var e=ji(this,t).delete(t);return this.size-=e?1:0,e},wt.prototype.get=function(t){return ji(this,t).get(t)},wt.prototype.has=function(t){return ji(this,t).has(t)},wt.prototype.set=function(t,e){var i=ji(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},xt.prototype.add=xt.prototype.push=function(t){return this.__data__.set(t,rs),this},xt.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.clear=function(){this.__data__=new bt,this.size=0},Ct.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Ct.prototype.get=function(t){return this.__data__.get(t)},Ct.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.set=function(t,e){var i=this.__data__;if(i instanceof bt){var n=i.__data__;if(!J||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new wt(n)}return i.set(t,e),this.size=i.size,this};var Rt=ai(Vt),zt=ai(Yt,!0);function Bt(t,n){var r=!0;return Rt(t,function(t,e,i){return r=!!n(t,e,i)}),r}function Ht(t,e,i){for(var n=-1,r=t.length;++n<r;){var o=t[n],s=e(o);if(null!=s&&(a===is?s==s&&!Nr(s):i(s,a)))var a=s,c=o}return c}function Wt(t,n){var r=[];return Rt(t,function(t,e,i){n(t,e,i)&&r.push(t)}),r}function Gt(t,e,i,n,r){var o=-1,s=t.length;for(i||(i=Gi),r||(r=[]);++o<s;){var a=t[o];0<e&&i(a)?1<e?Gt(a,e-1,i,n,r):Wa(r,a):n||(r[r.length]=a)}return r}var Ut=ci(),qt=ci(!0);function Vt(t,e){return t&&Ut(t,e,ao)}function Yt(t,e){return t&&qt(t,e,ao)}function Xt(e,t){return Ra(t,function(t){return Kr(e[t])})}function Qt(t,e){for(var i=0,n=(e=qe(e,t)).length;null!=t&&i<n;)t=t[fn(e[i++])];return i&&i==n?t:is}function Zt(t,e,i){var n=e(t);return br(t)?n:Wa(n,i(t))}function Jt(t){return null==t?t===is?"[object Undefined]":"[object Null]":I&&I in S(t)?function(t){var e=k.call(t,I),i=t[I];try{t[I]=is;var n=!0}catch(t){}var r=p.call(t);return n&&(e?t[I]=i:delete t[I]),r}(t):(e=t,p.call(e));var e}function te(t,e){return e<t}function ee(t,e){return null!=t&&k.call(t,e)}function ie(t,e){return null!=t&&e in S(t)}function ne(t,e,i){for(var n=i?Ba:za,r=t[0].length,o=t.length,s=o,a=P(o),c=1/0,l=[];s--;){var h=t[s];s&&e&&(h=Ha(h,rc(e))),c=q(h.length,c),a[s]=!i&&(e||120<=r&&120<=h.length)?new xt(s&&h):is}h=t[0];var u=-1,d=a[0];t:for(;++u<r&&l.length<c;){var f=h[u],p=e?e(f):f;if(f=i||0!==f?f:0,!(d?sc(d,p):n(l,p,i))){for(s=o;--s;){var g=a[s];if(!(g?sc(g,p):n(t[s],p,i)))continue t}d&&d.push(p),l.push(f)}}return l}function re(t,e,i){var n=null==(t=en(t,e=qe(e,t)))?t:t[fn(Tn(e))];return null==n?is:Da(n,t,i)}function oe(t){return Er(t)&&Jt(t)==us}function se(t,e,i,n,r){return t===e||(null==t||null==e||!Er(t)&&!Er(e)?t!=t&&e!=e:function(t,e,i,n,r,o){var s=br(t),a=br(e),c=s?ds:Bi(t),l=a?ds:Bi(e),h=(c=c==us?bs:c)==bs,u=(l=l==us?bs:l)==bs,d=c==l;if(d&&Sr(t)){if(!Sr(e))return!1;h=!(s=!0)}if(d&&!h)return o||(o=new Ct),s||Lr(t)?Ai(t,e,i,n,r,o):function(t,e,i,n,r,o,s){switch(i){case Ps:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ks:return!(t.byteLength!=e.byteLength||!o(new x(t),new x(e)));case fs:case ps:case _s:return mr(+t,+e);case gs:return t.name==e.name&&t.message==e.message;case xs:case Ss:return t==e+"";case ys:var a=fc;case Cs:var c=1&n;if(a||(a=mc),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;n|=2,s.set(t,e);var h=Ai(a(t),a(e),n,r,o,s);return s.delete(t),h;case ks:if(dt)return dt.call(t)==dt.call(e)}return!1}(t,e,c,i,n,r,o);if(!(1&i)){var f=h&&k.call(t,"__wrapped__"),p=u&&k.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,m=p?e.value():e;return o||(o=new Ct),r(g,m,i,n,o)}}return!!d&&(o||(o=new Ct),function(t,e,i,n,r,o){var s=1&i,a=Ei(t),c=a.length,l=Ei(e).length;if(c!=l&&!s)return!1;for(var h=c;h--;){var u=a[h];if(!(s?u in e:k.call(e,u)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=s;++h<c;){u=a[h];var g=t[u],m=e[u];if(n)var v=s?n(m,g,u,e,t,o):n(g,m,u,t,e,o);if(!(v===is?g===m||r(g,m,i,n,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=t.constructor,_=e.constructor;y!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(f=!1)}return o.delete(t),o.delete(e),f}(t,e,i,n,r,o))}(t,e,i,n,se,r))}function ae(t,e,i,n){var r=i.length,o=r,s=!n;if(null==t)return!o;for(t=S(t);r--;){var a=i[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){var c=(a=i[r])[0],l=t[c],h=a[1];if(s&&a[2]){if(l===is&&!(c in t))return!1}else{var u=new Ct;if(n)var d=n(l,h,c,t,e,u);if(!(d===is?se(h,l,3,n,u):d))return!1}}return!0}function ce(t){return!(!Mr(t)||(e=t,f&&f in e))&&(Kr(t)?_:ua).test(pn(t));var e}function le(t){return"function"==typeof t?t:null==t?Io:"object"==_typeof(t)?br(t)?ge(t[0],t[1]):pe(t):Ho(t)}function he(t){if(!Qi(t))return G(t);var e=[];for(var i in S(t))k.call(t,i)&&"constructor"!=i&&e.push(i);return e}function ue(t){if(!Mr(t))return function(t){var e=[];if(null!=t)for(var i in S(t))e.push(i);return e}(t);var e=Qi(t),i=[];for(var n in t)("constructor"!=n||!e&&k.call(t,n))&&i.push(n);return i}function de(t,e){return t<e}function fe(t,n){var r=-1,o=xr(t)?P(t.length):[];return Rt(t,function(t,e,i){o[++r]=n(t,e,i)}),o}function pe(e){var i=Ni(e);return 1==i.length&&i[0][2]?Ji(i[0][0],i[0][1]):function(t){return t===e||ae(t,e,i)}}function ge(i,n){return Vi(i)&&Zi(n)?Ji(fn(i),n):function(t){var e=io(t,i);return e===is&&e===n?no(t,i):se(n,e,3)}}function me(n,r,o,s,a){n!==r&&Ut(r,function(t,e){if(Mr(t))a||(a=new Ct),function(t,e,i,n,r,o,s){var a=nn(t,i),c=nn(e,i),l=s.get(c);if(l)return Pt(t,i,l);var h=o?o(a,c,i+"",t,e,s):is,u=h===is;if(u){var d=br(c),f=!d&&Sr(c),p=!d&&!f&&Lr(c);h=c,d||f||p?h=br(a)?a:Cr(a)?ni(a):f?Qe(c,!(u=!1)):p?Je(c,!(u=!1)):[]:Ir(c)||_r(c)?_r(h=a)?h=qr(a):Mr(a)&&!Kr(a)||(h=Wi(c)):u=!1}u&&(s.set(c,h),r(h,c,n,o,s),s.delete(c)),Pt(t,i,h)}(n,r,e,o,me,s,a);else{var i=s?s(nn(n,e),t,e+"",n,r,a):is;i===is&&(i=t),Pt(n,e,i)}},co)}function ve(t,e){var i=t.length;if(i)return Ui(e+=e<0?i:0,i)?t[e]:is}function ye(t,n,i){var r=-1;return n=Ha(n.length?n:[Io],rc(Fi())),function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}(fe(t,function(e,t,i){return{criteria:Ha(n,function(t){return t(e)}),index:++r,value:e}}),function(t,e){return function(t,e,i){for(var n=-1,r=t.criteria,o=e.criteria,s=r.length,a=i.length;++n<s;){var c=ti(r[n],o[n]);if(c){if(a<=n)return c;var l=i[n];return c*("desc"==l?-1:1)}}return t.index-e.index}(t,e,i)})}function _e(t,e,i){for(var n=-1,r=e.length,o={};++n<r;){var s=e[n],a=Qt(t,s);i(a,s)&&Ke(o,qe(s,t),a)}return o}function be(t,e,i,n){var r=n?Qa:Xa,o=-1,s=e.length,a=t;for(t===e&&(e=ni(e)),i&&(a=Ha(t,rc(i)));++o<s;)for(var c=0,l=e[o],h=i?i(l):l;-1<(c=r(a,h,c,n));)a!==t&&E.call(a,c,1),E.call(t,c,1);return t}function we(t,e){for(var i=t?e.length:0,n=i-1;i--;){var r=e[i];if(i==n||r!==o){var o=r;Ui(r)?E.call(t,r,1):Le(t,r)}}return t}function xe(t,e){return t+R(X()*(e-t+1))}function Ce(t,e){var i="";if(!t||e<1||as<e)return i;for(;e%2&&(i+=t),(e=R(e/2))&&(t+=t),e;);return i}function Se(t,e){return sn(tn(t,e,Io),t+"")}function ke(t){return kt(vo(t))}function Te(t,e){var i=vo(t);return ln(i,Dt(e,0,i.length))}function Ke(t,e,i,n){if(!Mr(t))return t;for(var r=-1,o=(e=qe(e,t)).length,s=o-1,a=t;null!=a&&++r<o;){var c=fn(e[r]),l=i;if(r!=s){var h=a[c];(l=n?n(h,c,a):is)===is&&(l=Mr(h)?h:Ui(e[r+1])?[]:{})}At(a,c,l),a=a[c]}return t}var Pe=rt?function(t,e){return rt.set(t,e),t}:Io,Ae=D?function(t,e){return D(t,"toString",{configurable:!0,enumerable:!1,value:Eo(e),writable:!0})}:Io;function Me(t){return ln(vo(t))}function Ee(t,e,i){var n=-1,r=t.length;e<0&&(e=r<-e?0:r+e),(i=r<i?r:i)<0&&(i+=r),r=i<e?0:i-e>>>0,e>>>=0;for(var o=P(r);++n<r;)o[n]=t[n+e];return o}function $e(t,n){var r;return Rt(t,function(t,e,i){return!(r=n(t,e,i))}),!!r}function Oe(t,e,i){var n=0,r=null==t?n:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;n<r;){var o=n+r>>>1,s=t[o];null!==s&&!Nr(s)&&(i?s<=e:s<e)?n=o+1:r=o}return r}return Ie(t,e,Io,i)}function Ie(t,e,i,n){e=i(e);for(var r=0,o=null==t?0:t.length,s=e!=e,a=null===e,c=Nr(e),l=e===is;r<o;){var h=R((r+o)/2),u=i(t[h]),d=u!==is,f=null===u,p=u==u,g=Nr(u);if(s)var m=n||p;else m=l?p&&(n||d):a?p&&d&&(n||!f):c?p&&d&&!f&&(n||!g):!f&&!g&&(n?u<=e:u<e);m?r=h+1:o=h}return q(o,4294967294)}function De(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var s=t[i],a=e?e(s):s;if(!i||!mr(a,c)){var c=a;o[r++]=0===s?0:s}}return o}function Fe(t){return"number"==typeof t?t:Nr(t)?cs:+t}function je(t){if("string"==typeof t)return t;if(br(t))return Ha(t,je)+"";if(Nr(t))return ft?ft.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ne(t,e,i){var n=-1,r=za,o=t.length,s=!0,a=[],c=a;if(i)s=!1,r=Ba;else if(200<=o){var l=e?null:Ci(t);if(l)return mc(l);s=!1,r=sc,c=new xt}else c=e?[]:a;t:for(;++n<o;){var h=t[n],u=e?e(h):h;if(h=i||0!==h?h:0,s&&u==u){for(var d=c.length;d--;)if(c[d]===u)continue t;e&&c.push(u),a.push(h)}else r(c,u,i)||(c!==a&&c.push(u),a.push(h))}return a}function Le(t,e){return null==(t=en(t,e=qe(e,t)))||delete t[fn(Tn(e))]}function Re(t,e,i,n){return Ke(t,e,i(Qt(t,e)),n)}function ze(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?Ee(t,n?0:o,n?o+1:r):Ee(t,n?o+1:0,n?r:o)}function Be(t,e){var i=t;return i instanceof yt&&(i=i.value()),Ga(e,function(t,e){return e.func.apply(e.thisArg,Wa([t],e.args))},i)}function He(t,e,i){var n=t.length;if(n<2)return n?Ne(t[0]):[];for(var r=-1,o=P(n);++r<n;)for(var s=t[r],a=-1;++a<n;)a!=r&&(o[r]=Lt(o[r]||s,t[a],e,i));return Ne(Gt(o,1),e,i)}function We(t,e,i){for(var n=-1,r=t.length,o=e.length,s={};++n<r;){var a=n<o?e[n]:is;i(s,t[n],a)}return s}function Ge(t){return Cr(t)?t:[]}function Ue(t){return"function"==typeof t?t:Io}function qe(t,e){return br(t)?t:Vi(t,e)?[t]:dn(Vr(t))}var Ve=Se;function Ye(t,e,i){var n=t.length;return i=i===is?n:i,!e&&n<=i?t:Ee(t,e,i)}var Xe=F||function(t){return Ka.clearTimeout(t)};function Qe(t,e){if(e)return t.slice();var i=t.length,n=C?C(i):new t.constructor(i);return t.copy(n),n}function Ze(t){var e=new t.constructor(t.byteLength);return new x(e).set(new x(t)),e}function Je(t,e){var i=e?Ze(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function ti(t,e){if(t!==e){var i=t!==is,n=null===t,r=t==t,o=Nr(t),s=e!==is,a=null===e,c=e==e,l=Nr(e);if(!a&&!l&&!o&&e<t||o&&s&&c&&!a&&!l||n&&s&&c||!i&&c||!r)return 1;if(!n&&!o&&!l&&t<e||l&&i&&r&&!n&&!o||a&&i&&r||!s&&r||!c)return-1}return 0}function ei(t,e,i,n){for(var r=-1,o=t.length,s=i.length,a=-1,c=e.length,l=U(o-s,0),h=P(c+l),u=!n;++a<c;)h[a]=e[a];for(;++r<s;)(u||r<o)&&(h[i[r]]=t[r]);for(;l--;)h[a++]=t[r++];return h}function ii(t,e,i,n){for(var r=-1,o=t.length,s=-1,a=i.length,c=-1,l=e.length,h=U(o-a,0),u=P(h+l),d=!n;++r<h;)u[r]=t[r];for(var f=r;++c<l;)u[f+c]=e[c];for(;++s<a;)(d||r<o)&&(u[f+i[s]]=t[r++]);return u}function ni(t,e){var i=-1,n=t.length;for(e||(e=P(n));++i<n;)e[i]=t[i];return e}function ri(t,e,i,n){var r=!i;i||(i={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=n?n(i[a],t[a],a,i,t):is;c===is&&(c=t[a]),r?Ot(i,a,c):At(i,a,c)}return i}function oi(r,o){return function(t,e){var i=br(t)?Fa:Et,n=o?o():{};return i(t,r,Fi(e,2),n)}}function si(a){return Se(function(t,e){var i=-1,n=e.length,r=1<n?e[n-1]:is,o=2<n?e[2]:is;for(r=3<a.length&&"function"==typeof r?(n--,r):is,o&&qi(e[0],e[1],o)&&(r=n<3?is:r,n=1),t=S(t);++i<n;){var s=e[i];s&&a(t,s,i,r)}return t})}function ai(o,s){return function(t,e){if(null==t)return t;if(!xr(t))return o(t,e);for(var i=t.length,n=s?i:-1,r=S(t);(s?n--:++n<i)&&!1!==e(r[n],n,r););return t}}function ci(c){return function(t,e,i){for(var n=-1,r=S(t),o=i(t),s=o.length;s--;){var a=o[c?s:++n];if(!1===e(r[a],a,r))break}return t}}function li(r){return function(t){var e=dc(t=Vr(t))?yc(t):is,i=e?e[0]:t.charAt(0),n=e?Ye(e,1).join(""):t.slice(1);return i[r]()+n}}function hi(e){return function(t){return Ga(Po(bo(t).replace(va,"")),e,"")}}function ui(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=gt(n.prototype),i=n.apply(e,t);return Mr(i)?i:e}}function di(s){return function(t,e,i){var n=S(t);if(!xr(t)){var r=Fi(e,3);t=ao(t),e=function(t){return r(n[t],t,n)}}var o=s(t,e,i);return-1<o?n[r?t[o]:o]:is}}function fi(c){return Mi(function(r){var o=r.length,t=o,e=vt.prototype.thru;for(c&&r.reverse();t--;){var i=r[t];if("function"!=typeof i)throw new A(ns);if(e&&!s&&"wrapper"==Ii(i))var s=new vt([],!0)}for(t=s?t:o;++t<o;){var n=Ii(i=r[t]),a="wrapper"==n?Oi(i):is;s=a&&Yi(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?s[Ii(a[0])].apply(s,a[3]):1==i.length&&Yi(i)?s[n]():s.thru(i)}return function(){var t=arguments,e=t[0];if(s&&1==t.length&&br(e))return s.plant(e).value();for(var i=0,n=o?r[i].apply(this,t):e;++i<o;)n=r[i].call(this,n);return n}})}function pi(l,h,u,d,f,p,g,m,v,y){var _=h&ss,b=1&h,w=2&h,x=24&h,C=512&h,S=w?is:ui(l);return function t(){for(var e=arguments.length,i=P(e),n=e;n--;)i[n]=arguments[n];if(x)var r=Di(t),o=function(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&++n;return n}(i,r);if(d&&(i=ei(i,d,f,x)),p&&(i=ii(i,p,g,x)),e-=o,x&&e<y){var s=gc(i,r);return wi(l,h,pi,t.placeholder,u,i,s,m,v,y-e)}var a=b?u:this,c=w?a[l]:l;return e=i.length,m?i=function(t,e){for(var i=t.length,n=q(e.length,i),r=ni(t);n--;){var o=e[n];t[n]=Ui(o,i)?r[o]:is}return t}(i,m):C&&1<e&&i.reverse(),_&&v<e&&(i.length=v),this&&this!==Ka&&this instanceof t&&(c=S||ui(c)),c.apply(a,i)}}function gi(s,a){return function(t,e){return i=t,n=s,r=a(e),o={},Vt(i,function(t,e,i){n(o,r(t),e,i)}),o;var i,n,r,o}}function mi(n,r){return function(t,e){var i;if(t===is&&e===is)return r;if(t!==is&&(i=t),e!==is){if(i===is)return e;e="string"==typeof t||"string"==typeof e?(t=je(t),je(e)):(t=Fe(t),Fe(e)),i=n(t,e)}return i}}function vi(n){return Mi(function(t){return t=Ha(t,rc(Fi())),Se(function(e){var i=this;return n(t,function(t){return Da(t,i,e)})})})}function yi(t,e){var i=(e=e===is?" ":je(e)).length;if(i<2)return i?Ce(e,t):e;var n=Ce(e,L(t/vc(e)));return dc(e)?Ye(yc(n),0,t).join(""):n.slice(0,t)}function _i(n){return function(t,e,i){return i&&"number"!=typeof i&&qi(t,e,i)&&(e=i=is),t=Hr(t),e===is?(e=t,t=0):e=Hr(e),function(t,e,i,n){for(var r=-1,o=U(L((e-t)/(i||1)),0),s=P(o);o--;)s[n?o:++r]=t,t+=i;return s}(t,e,i=i===is?t<e?1:-1:Hr(i),n)}}function bi(i){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=Ur(t),e=Ur(e)),i(t,e)}}function wi(t,e,i,n,r,o,s,a,c,l){var h=8&e;e|=h?32:64,4&(e&=~(h?64:32))||(e&=-4);var u=[t,e,r,h?o:is,h?s:is,h?is:o,h?is:s,a,c,l],d=i.apply(is,u);return Yi(t)&&rn(d,u),d.placeholder=n,an(d,t,e)}function xi(t){var n=o[t];return function(t,e){if(t=Ur(t),e=null==e?0:q(Wr(e),292)){var i=(Vr(t)+"e").split("e");return+((i=(Vr(n(i[0]+"e"+(+i[1]+e)))+"e").split("e"))[0]+"e"+(+i[1]-e))}return n(t)}}var Ci=et&&1/mc(new et([,-0]))[1]==1/0?function(t){return new et(t)}:Lo;function Si(s){return function(t){var e,i,n,r,o=Bi(t);return o==ys?fc(t):o==Cs?(e=t,i=-1,n=Array(e.size),e.forEach(function(t){n[++i]=[t,t]}),n):Ha(s(r=t),function(t){return[t,r[t]]})}}function ki(t,e,i,n,r,o,s,a){var c=2&e;if(!c&&"function"!=typeof t)throw new A(ns);var l=n?n.length:0;if(l||(e&=-97,n=r=is),s=s===is?s:U(Wr(s),0),a=a===is?a:Wr(a),l-=r?r.length:0,64&e){var h=n,u=r;n=r=is}var d,f,p,g,m,v,y,_,b,w,x,C,S,k=c?is:Oi(t),T=[t,e,i,n,r,h,u,o,s,a];if(k&&function(t,e){var i=t[1],n=e[1],r=i|n,o=r<131,s=n==ss&&8==i||n==ss&&256==i&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==i;if(o||s){1&n&&(t[2]=e[2],r|=1&i?0:4);var a=e[3];if(a){var c=t[3];t[3]=c?ei(c,a,e[4]):a,t[4]=c?gc(t[3],os):e[4]}(a=e[5])&&(c=t[5],t[5]=c?ii(c,a,e[6]):a,t[6]=c?gc(t[5],os):e[6]),(a=e[7])&&(t[7]=a),n&ss&&(t[8]=null==t[8]?e[8]:q(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}}(T,k),t=T[0],e=T[1],i=T[2],n=T[3],r=T[4],!(a=T[9]=T[9]===is?c?0:t.length:U(T[9]-l,0))&&24&e&&(e&=-25),e&&1!=e)K=8==e||16==e?(y=e,_=a,b=ui(v=t),function t(){for(var e=arguments.length,i=P(e),n=e,r=Di(t);n--;)i[n]=arguments[n];var o=e<3&&i[0]!==r&&i[e-1]!==r?[]:gc(i,r);return(e-=o.length)<_?wi(v,y,pi,t.placeholder,is,i,o,is,is,_-e):Da(this&&this!==Ka&&this instanceof t?b:v,this,i)}):32!=e&&33!=e||r.length?pi.apply(is,T):(f=i,p=n,g=1&e,m=ui(d=t),function t(){for(var e=-1,i=arguments.length,n=-1,r=p.length,o=P(r+i),s=this&&this!==Ka&&this instanceof t?m:d;++n<r;)o[n]=p[n];for(;i--;)o[n++]=arguments[++e];return Da(s,g?f:this,o)});else var K=(x=i,C=1&e,S=ui(w=t),function t(){return(this&&this!==Ka&&this instanceof t?S:w).apply(C?x:this,arguments)});return an((k?Pe:rn)(K,T),t,e)}function Ti(t,e,i,n){return t===is||mr(t,u[i])&&!k.call(n,i)?e:t}function Ki(t,e,i,n,r,o){return Mr(t)&&Mr(e)&&(o.set(e,t),me(t,e,is,Ki,o),o.delete(e)),t}function Pi(t){return Ir(t)?is:t}function Ai(t,e,i,n,r,o){var s=1&i,a=t.length,c=e.length;if(a!=c&&!(s&&a<c))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var h=-1,u=!0,d=2&i?new xt:is;for(o.set(t,e),o.set(e,t);++h<a;){var f=t[h],p=e[h];if(n)var g=s?n(p,f,h,e,t,o):n(f,p,h,t,e,o);if(g!==is){if(g)continue;u=!1;break}if(d){if(!qa(e,function(t,e){if(!sc(d,e)&&(f===t||r(f,t,i,n,o)))return d.push(e)})){u=!1;break}}else if(f!==p&&!r(f,p,i,n,o)){u=!1;break}}return o.delete(t),o.delete(e),u}function Mi(t){return sn(tn(t,is,wn),t+"")}function Ei(t){return Zt(t,ao,Ri)}function $i(t){return Zt(t,co,zi)}var Oi=rt?function(t){return rt.get(t)}:Lo;function Ii(t){for(var e=t.name+"",i=ot[e],n=k.call(ot,e)?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function Di(t){return(k.call(pt,"placeholder")?pt:t).placeholder}function Fi(){var t=pt.iteratee||Do;return t=t===Do?le:t,arguments.length?t(arguments[0],arguments[1]):t}function ji(t,e){var i,n,r=t.__data__;return("string"==(n=_typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof e?"string":"hash"]:r.map}function Ni(t){for(var e=ao(t),i=e.length;i--;){var n=e[i],r=t[n];e[i]=[n,r,Zi(r)]}return e}function Li(t,e){var i,n,r=(n=e,null==(i=t)?is:i[n]);return ce(r)?r:is}var Ri=z?function(e){return null==e?[]:(e=S(e),Ra(z(e),function(t){return M.call(e,t)}))}:Uo,zi=z?function(t){for(var e=[];t;)Wa(e,Ri(t)),t=T(t);return e}:Uo,Bi=Jt;function Hi(t,e,i){for(var n=-1,r=(e=qe(e,t)).length,o=!1;++n<r;){var s=fn(e[n]);if(!(o=null!=t&&i(t,s)))break;t=t[s]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&Ar(r)&&Ui(s,r)&&(br(t)||_r(t))}function Wi(t){return"function"!=typeof t.constructor||Qi(t)?{}:gt(T(t))}function Gi(t){return br(t)||_r(t)||!!($&&t&&t[$])}function Ui(t,e){var i=_typeof(t);return!!(e=null==e?as:e)&&("number"==i||"symbol"!=i&&fa.test(t))&&-1<t&&t%1==0&&t<e}function qi(t,e,i){if(!Mr(i))return!1;var n=_typeof(e);return!!("number"==n?xr(i)&&Ui(e,i.length):"string"==n&&e in i)&&mr(i[e],t)}function Vi(t,e){if(br(t))return!1;var i=_typeof(t);return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!Nr(t))||Ys.test(t)||!Vs.test(t)||null!=e&&t in S(e)}function Yi(t){var e=Ii(t),i=pt[e];if("function"!=typeof i||!(e in yt.prototype))return!1;if(t===i)return!0;var n=Oi(i);return!!n&&t===n[0]}(Z&&Bi(new Z(new ArrayBuffer(1)))!=Ps||J&&Bi(new J)!=ys||tt&&Bi(tt.resolve())!=ws||et&&Bi(new et)!=Cs||it&&Bi(new it)!=Ts)&&(Bi=function(t){var e=Jt(t),i=e==bs?t.constructor:is,n=i?pn(i):"";if(n)switch(n){case st:return Ps;case at:return ys;case ct:return ws;case lt:return Cs;case ht:return Ts}return e});var Xi=c?Kr:qo;function Qi(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||u)}function Zi(t){return t==t&&!Mr(t)}function Ji(e,i){return function(t){return null!=t&&t[e]===i&&(i!==is||e in S(t))}}function tn(o,s,a){return s=U(s===is?o.length-1:s,0),function(){for(var t=arguments,e=-1,i=U(t.length-s,0),n=P(i);++e<i;)n[e]=t[s+e];e=-1;for(var r=P(s+1);++e<s;)r[e]=t[e];return r[s]=a(n),Da(o,this,r)}}function en(t,e){return e.length<2?t:Qt(t,Ee(e,0,-1))}function nn(t,e){if("__proto__"!=e)return t[e]}var rn=cn(Pe),on=N||function(t,e){return Ka.setTimeout(t,e)},sn=cn(Ae);function an(t,e,i){var n,r,o,s=e+"";return sn(t,function(t,e){var i=e.length;if(!i)return t;var n=i-1;return e[n]=(1<i?"& ":"")+e[n],e=e.join(2<i?", ":" "),t.replace(ia,"{\n/* [wrapped with "+e+"] */\n")}(s,(o=s.match(na),n=o?o[1].split(ra):[],r=i,ja(hs,function(t){var e="_."+t[0];r&t[1]&&!za(n,e)&&n.push(e)}),n.sort())))}function cn(i){var n=0,r=0;return function(){var t=V(),e=16-(t-r);if(r=t,0<e){if(800<=++n)return arguments[0]}else n=0;return i.apply(is,arguments)}}function ln(t,e){var i=-1,n=t.length,r=n-1;for(e=e===is?n:e;++i<e;){var o=xe(i,r),s=t[o];t[o]=t[i],t[i]=s}return t.length=e,t}var hn,un,dn=(un=(hn=hr(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Xs,function(t,e,i,n){r.push(i?n.replace(sa,"$1"):e||t)}),r},function(t){return 500===un.size&&un.clear(),t})).cache,hn);function fn(t){if("string"==typeof t||Nr(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pn(t){if(null!=t){try{return l.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function gn(t){if(t instanceof yt)return t.clone();var e=new vt(t.__wrapped__,t.__chain__);return e.__actions__=ni(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var mn=Se(function(t,e){return Cr(t)?Lt(t,Gt(e,1,Cr,!0)):[]}),vn=Se(function(t,e){var i=Tn(e);return Cr(i)&&(i=is),Cr(t)?Lt(t,Gt(e,1,Cr,!0),Fi(i,2)):[]}),yn=Se(function(t,e){var i=Tn(e);return Cr(i)&&(i=is),Cr(t)?Lt(t,Gt(e,1,Cr,!0),is,i):[]});function _n(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:Wr(i);return r<0&&(r=U(n+r,0)),Ya(t,Fi(e,3),r)}function bn(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=n-1;return i!==is&&(r=Wr(i),r=i<0?U(n+r,0):q(r,n-1)),Ya(t,Fi(e,3),r,!0)}function wn(t){return null!=t&&t.length?Gt(t,1):[]}function xn(t){return t&&t.length?t[0]:is}var Cn=Se(function(t){var e=Ha(t,Ge);return e.length&&e[0]===t[0]?ne(e):[]}),Sn=Se(function(t){var e=Tn(t),i=Ha(t,Ge);return e===Tn(i)?e=is:i.pop(),i.length&&i[0]===t[0]?ne(i,Fi(e,2)):[]}),kn=Se(function(t){var e=Tn(t),i=Ha(t,Ge);return(e="function"==typeof e?e:is)&&i.pop(),i.length&&i[0]===t[0]?ne(i,is,e):[]});function Tn(t){var e=null==t?0:t.length;return e?t[e-1]:is}var Kn=Se(Pn);function Pn(t,e){return t&&t.length&&e&&e.length?be(t,e):t}var An=Mi(function(t,e){var i=null==t?0:t.length,n=It(t,e);return we(t,Ha(e,function(t){return Ui(t,i)?+t:t}).sort(ti)),n});function Mn(t){return null==t?t:Q.call(t)}var En=Se(function(t){return Ne(Gt(t,1,Cr,!0))}),$n=Se(function(t){var e=Tn(t);return Cr(e)&&(e=is),Ne(Gt(t,1,Cr,!0),Fi(e,2))}),On=Se(function(t){var e=Tn(t);return e="function"==typeof e?e:is,Ne(Gt(t,1,Cr,!0),is,e)});function In(e){if(!e||!e.length)return[];var i=0;return e=Ra(e,function(t){if(Cr(t))return i=U(t.length,i),!0}),nc(i,function(t){return Ha(e,tc(t))})}function Dn(t,e){if(!t||!t.length)return[];var i=In(t);return null==e?i:Ha(i,function(t){return Da(e,is,t)})}var Fn=Se(function(t,e){return Cr(t)?Lt(t,e):[]}),jn=Se(function(t){return He(Ra(t,Cr))}),Nn=Se(function(t){var e=Tn(t);return Cr(e)&&(e=is),He(Ra(t,Cr),Fi(e,2))}),Ln=Se(function(t){var e=Tn(t);return e="function"==typeof e?e:is,He(Ra(t,Cr),is,e)}),Rn=Se(In);var zn=Se(function(t){var e=t.length,i=1<e?t[e-1]:is;return i="function"==typeof i?(t.pop(),i):is,Dn(t,i)});function Bn(t){var e=pt(t);return e.__chain__=!0,e}function Hn(t,e){return e(t)}var Wn=Mi(function(e){var i=e.length,t=i?e[0]:0,n=this.__wrapped__,r=function(t){return It(t,e)};return!(1<i||this.__actions__.length)&&n instanceof yt&&Ui(t)?((n=n.slice(t,+t+(i?1:0))).__actions__.push({func:Hn,args:[r],thisArg:is}),new vt(n,this.__chain__).thru(function(t){return i&&!t.length&&t.push(is),t})):this.thru(r)});var Gn=oi(function(t,e,i){k.call(t,i)?++t[i]:Ot(t,i,1)});var Un=di(_n),qn=di(bn);function Vn(t,e){return(br(t)?ja:Rt)(t,Fi(e,3))}function Yn(t,e){return(br(t)?Na:zt)(t,Fi(e,3))}var Xn=oi(function(t,e,i){k.call(t,i)?t[i].push(e):Ot(t,i,[e])});var Qn=Se(function(t,e,i){var n=-1,r="function"==typeof e,o=xr(t)?P(t.length):[];return Rt(t,function(t){o[++n]=r?Da(e,t,i):re(t,e,i)}),o}),Zn=oi(function(t,e,i){Ot(t,i,e)});function Jn(t,e){return(br(t)?Ha:fe)(t,Fi(e,3))}var tr=oi(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]});var er=Se(function(t,e){if(null==t)return[];var i=e.length;return 1<i&&qi(t,e[0],e[1])?e=[]:2<i&&qi(e[0],e[1],e[2])&&(e=[e[0]]),ye(t,Gt(e,1),[])}),ir=j||function(){return Ka.Date.now()};function nr(t,e,i){return e=i?is:e,e=t&&null==e?t.length:e,ki(t,ss,is,is,is,is,e)}function rr(t,e){var i;if("function"!=typeof e)throw new A(ns);return t=Wr(t),function(){return 0<--t&&(i=e.apply(this,arguments)),t<=1&&(e=is),i}}var or=Se(function(t,e,i){var n=1;if(i.length){var r=gc(i,Di(or));n|=32}return ki(t,n,e,i,r)}),sr=Se(function(t,e,i){var n=3;if(i.length){var r=gc(i,Di(sr));n|=32}return ki(e,n,t,i,r)});function ar(n,r,t){var o,s,a,c,l,h,u=0,d=!1,f=!1,e=!0;if("function"!=typeof n)throw new A(ns);function p(t){var e=o,i=s;return o=s=is,u=t,c=n.apply(i,e)}function g(t){var e=t-h;return h===is||r<=e||e<0||f&&a<=t-u}function m(){var t,e,i=ir();if(g(i))return v(i);l=on(m,(e=r-((t=i)-h),f?q(e,a-(t-u)):e))}function v(t){return l=is,e&&o?p(t):(o=s=is,c)}function i(){var t,e=ir(),i=g(e);if(o=arguments,s=this,h=e,i){if(l===is)return u=t=h,l=on(m,r),d?p(t):c;if(f)return l=on(m,r),p(h)}return l===is&&(l=on(m,r)),c}return r=Ur(r)||0,Mr(t)&&(d=!!t.leading,a=(f="maxWait"in t)?U(Ur(t.maxWait)||0,r):a,e="trailing"in t?!!t.trailing:e),i.cancel=function(){l!==is&&Xe(l),u=0,o=h=s=l=is},i.flush=function(){return l===is?c:v(ir())},i}var cr=Se(function(t,e){return Nt(t,1,e)}),lr=Se(function(t,e,i){return Nt(t,Ur(e)||0,i)});function hr(o,s){if("function"!=typeof o||null!=s&&"function"!=typeof s)throw new A(ns);var t=function t(){var e=arguments,i=s?s.apply(this,e):e[0],n=t.cache;if(n.has(i))return n.get(i);var r=o.apply(this,e);return t.cache=n.set(i,r)||n,r};return t.cache=new(hr.Cache||wt),t}function ur(e){if("function"!=typeof e)throw new A(ns);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}hr.Cache=wt;var dr=Ve(function(n,r){var o=(r=1==r.length&&br(r[0])?Ha(r[0],rc(Fi())):Ha(Gt(r,1),rc(Fi()))).length;return Se(function(t){for(var e=-1,i=q(t.length,o);++e<i;)t[e]=r[e].call(this,t[e]);return Da(n,this,t)})}),fr=Se(function(t,e){var i=gc(e,Di(fr));return ki(t,32,is,e,i)}),pr=Se(function(t,e){var i=gc(e,Di(pr));return ki(t,64,is,e,i)}),gr=Mi(function(t,e){return ki(t,256,is,is,is,e)});function mr(t,e){return t===e||t!=t&&e!=e}var vr=bi(te),yr=bi(function(t,e){return e<=t}),_r=oe(function(){return arguments}())?oe:function(t){return Er(t)&&k.call(t,"callee")&&!M.call(t,"callee")},br=P.isArray,wr=Aa?rc(Aa):function(t){return Er(t)&&Jt(t)==Ks};function xr(t){return null!=t&&Ar(t.length)&&!Kr(t)}function Cr(t){return Er(t)&&xr(t)}var Sr=B||qo,kr=Ma?rc(Ma):function(t){return Er(t)&&Jt(t)==ps};function Tr(t){if(!Er(t))return!1;var e=Jt(t);return e==gs||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Ir(t)}function Kr(t){if(!Mr(t))return!1;var e=Jt(t);return e==ms||e==vs||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Pr(t){return"number"==typeof t&&t==Wr(t)}function Ar(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=as}function Mr(t){var e=_typeof(t);return null!=t&&("object"==e||"function"==e)}function Er(t){return null!=t&&"object"==_typeof(t)}var $r=Ea?rc(Ea):function(t){return Er(t)&&Bi(t)==ys};function Or(t){return"number"==typeof t||Er(t)&&Jt(t)==_s}function Ir(t){if(!Er(t)||Jt(t)!=bs)return!1;var e=T(t);if(null===e)return!0;var i=k.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==g}var Dr=$a?rc($a):function(t){return Er(t)&&Jt(t)==xs};var Fr=Oa?rc(Oa):function(t){return Er(t)&&Bi(t)==Cs};function jr(t){return"string"==typeof t||!br(t)&&Er(t)&&Jt(t)==Ss}function Nr(t){return"symbol"==_typeof(t)||Er(t)&&Jt(t)==ks}var Lr=Ia?rc(Ia):function(t){return Er(t)&&Ar(t.length)&&!!Ca[Jt(t)]};var Rr=bi(de),zr=bi(function(t,e){return t<=e});function Br(t){if(!t)return[];if(xr(t))return jr(t)?yc(t):ni(t);if(O&&t[O])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[O]());var e=Bi(t);return(e==ys?fc:e==Cs?mc:vo)(t)}function Hr(t){return t?(t=Ur(t))!==1/0&&t!==-1/0?t==t?t:0:17976931348623157e292*(t<0?-1:1):0===t?t:0}function Wr(t){var e=Hr(t),i=e%1;return e==e?i?e-i:e:0}function Gr(t){return t?Dt(Wr(t),0,ls):0}function Ur(t){if("number"==typeof t)return t;if(Nr(t))return cs;if(Mr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Mr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Js,"");var i=ha.test(t);return i||da.test(t)?Ta(t.slice(2),i?2:8):la.test(t)?cs:+t}function qr(t){return ri(t,co(t))}function Vr(t){return null==t?"":je(t)}var Yr=si(function(t,e){if(Qi(e)||xr(e))ri(e,ao(e),t);else for(var i in e)k.call(e,i)&&At(t,i,e[i])}),Xr=si(function(t,e){ri(e,co(e),t)}),Qr=si(function(t,e,i,n){ri(e,co(e),t,n)}),Zr=si(function(t,e,i,n){ri(e,ao(e),t,n)}),Jr=Mi(It);var to=Se(function(t,e){t=S(t);var i=-1,n=e.length,r=2<n?e[2]:is;for(r&&qi(e[0],e[1],r)&&(n=1);++i<n;)for(var o=e[i],s=co(o),a=-1,c=s.length;++a<c;){var l=s[a],h=t[l];(h===is||mr(h,u[l])&&!k.call(t,l))&&(t[l]=o[l])}return t}),eo=Se(function(t){return t.push(is,Ki),Da(ho,is,t)});function io(t,e,i){var n=null==t?is:Qt(t,e);return n===is?i:n}function no(t,e){return null!=t&&Hi(t,e,ie)}var ro=gi(function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=p.call(e)),t[e]=i},Eo(Io)),oo=gi(function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=p.call(e)),k.call(t,e)?t[e].push(i):t[e]=[i]},Fi),so=Se(re);function ao(t){return xr(t)?St(t):he(t)}function co(t){return xr(t)?St(t,!0):ue(t)}var lo=si(function(t,e,i){me(t,e,i)}),ho=si(function(t,e,i,n){me(t,e,i,n)}),uo=Mi(function(e,t){var i={};if(null==e)return i;var n=!1;t=Ha(t,function(t){return t=qe(t,e),n||(n=1<t.length),t}),ri(e,$i(e),i),n&&(i=Ft(i,7,Pi));for(var r=t.length;r--;)Le(i,t[r]);return i});var fo=Mi(function(t,e){return null==t?{}:_e(i=t,e,function(t,e){return no(i,e)});var i});function po(t,i){if(null==t)return{};var e=Ha($i(t),function(t){return[t]});return i=Fi(i),_e(t,e,function(t,e){return i(t,e[0])})}var go=Si(ao),mo=Si(co);function vo(t){return null==t?[]:oc(t,ao(t))}var yo=hi(function(t,e,i){return e=e.toLowerCase(),t+(i?_o(e):e)});function _o(t){return Ko(Vr(t).toLowerCase())}function bo(t){return(t=Vr(t))&&t.replace(pa,lc).replace(ya,"")}var wo=hi(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),xo=hi(function(t,e,i){return t+(i?" ":"")+e.toLowerCase()}),Co=li("toLowerCase");var So=hi(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()});var ko=hi(function(t,e,i){return t+(i?" ":"")+Ko(e)});var To=hi(function(t,e,i){return t+(i?" ":"")+e.toUpperCase()}),Ko=li("toUpperCase");function Po(t,e,i){return t=Vr(t),(e=i?is:e)===is?(n=t,ba.test(n)?t.match(_a)||[]:t.match(oa)||[]):t.match(e)||[];var n}var Ao=Se(function(t,e){try{return Da(t,is,e)}catch(t){return Tr(t)?t:new r(t)}}),Mo=Mi(function(e,t){return ja(t,function(t){t=fn(t),Ot(e,t,or(e[t],e))}),e});function Eo(t){return function(){return t}}var $o=fi(),Oo=fi(!0);function Io(t){return t}function Do(t){return le("function"==typeof t?t:Ft(t,1))}var Fo=Se(function(e,i){return function(t){return re(t,e,i)}}),jo=Se(function(e,i){return function(t){return re(e,t,i)}});function No(n,e,t){var i=ao(e),r=Xt(e,i);null!=t||Mr(e)&&(r.length||!i.length)||(t=e,e=n,n=this,r=Xt(e,ao(e)));var o=!(Mr(t)&&"chain"in t&&!t.chain),s=Kr(n);return ja(r,function(t){var i=e[t];n[t]=i,s&&(n.prototype[t]=function(){var t=this.__chain__;if(o||t){var e=n(this.__wrapped__);return(e.__actions__=ni(this.__actions__)).push({func:i,args:arguments,thisArg:n}),e.__chain__=t,e}return i.apply(n,Wa([this.value()],arguments))})}),n}function Lo(){}var Ro=vi(Ha),zo=vi(La),Bo=vi(qa);function Ho(t){return Vi(t)?tc(fn(t)):(e=t,function(t){return Qt(t,e)});var e}var Wo=_i(),Go=_i(!0);function Uo(){return[]}function qo(){return!1}var Vo=mi(function(t,e){return t+e},0),Yo=xi("ceil"),Xo=mi(function(t,e){return t/e},1),Qo=xi("floor");var Zo,Jo=mi(function(t,e){return t*e},1),ts=xi("round"),es=mi(function(t,e){return t-e},0);return pt.after=function(t,e){if("function"!=typeof e)throw new A(ns);return t=Wr(t),function(){if(--t<1)return e.apply(this,arguments)}},pt.ary=nr,pt.assign=Yr,pt.assignIn=Xr,pt.assignInWith=Qr,pt.assignWith=Zr,pt.at=Jr,pt.before=rr,pt.bind=or,pt.bindAll=Mo,pt.bindKey=sr,pt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return br(t)?t:[t]},pt.chain=Bn,pt.chunk=function(t,e,i){e=(i?qi(t,e,i):e===is)?1:U(Wr(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var r=0,o=0,s=P(L(n/e));r<n;)s[o++]=Ee(t,r,r+=e);return s},pt.compact=function(t){for(var e=-1,i=null==t?0:t.length,n=0,r=[];++e<i;){var o=t[e];o&&(r[n++]=o)}return r},pt.concat=function(){var t=arguments.length;if(!t)return[];for(var e=P(t-1),i=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Wa(br(i)?ni(i):[i],Gt(e,1))},pt.cond=function(n){var r=null==n?0:n.length,e=Fi();return n=r?Ha(n,function(t){if("function"!=typeof t[1])throw new A(ns);return[e(t[0]),t[1]]}):[],Se(function(t){for(var e=-1;++e<r;){var i=n[e];if(Da(i[0],this,t))return Da(i[1],this,t)}})},pt.conforms=function(t){return e=Ft(t,1),i=ao(e),function(t){return jt(t,e,i)};var e,i},pt.constant=Eo,pt.countBy=Gn,pt.create=function(t,e){var i=gt(t);return null==e?i:$t(i,e)},pt.curry=function t(e,i,n){var r=ki(e,8,is,is,is,is,is,i=n?is:i);return r.placeholder=t.placeholder,r},pt.curryRight=function t(e,i,n){var r=ki(e,16,is,is,is,is,is,i=n?is:i);return r.placeholder=t.placeholder,r},pt.debounce=ar,pt.defaults=to,pt.defaultsDeep=eo,pt.defer=cr,pt.delay=lr,pt.difference=mn,pt.differenceBy=vn,pt.differenceWith=yn,pt.drop=function(t,e,i){var n=null==t?0:t.length;return n?Ee(t,(e=i||e===is?1:Wr(e))<0?0:e,n):[]},pt.dropRight=function(t,e,i){var n=null==t?0:t.length;return n?Ee(t,0,(e=n-(e=i||e===is?1:Wr(e)))<0?0:e):[]},pt.dropRightWhile=function(t,e){return t&&t.length?ze(t,Fi(e,3),!0,!0):[]},pt.dropWhile=function(t,e){return t&&t.length?ze(t,Fi(e,3),!0):[]},pt.fill=function(t,e,i,n){var r=null==t?0:t.length;return r?(i&&"number"!=typeof i&&qi(t,e,i)&&(i=0,n=r),function(t,e,i,n){var r=t.length;for((i=Wr(i))<0&&(i=r<-i?0:r+i),(n=n===is||r<n?r:Wr(n))<0&&(n+=r),n=n<i?0:Gr(n);i<n;)t[i++]=e;return t}(t,e,i,n)):[]},pt.filter=function(t,e){return(br(t)?Ra:Wt)(t,Fi(e,3))},pt.flatMap=function(t,e){return Gt(Jn(t,e),1)},pt.flatMapDeep=function(t,e){return Gt(Jn(t,e),1/0)},pt.flatMapDepth=function(t,e,i){return i=i===is?1:Wr(i),Gt(Jn(t,e),i)},pt.flatten=wn,pt.flattenDeep=function(t){return null!=t&&t.length?Gt(t,1/0):[]},pt.flattenDepth=function(t,e){return null!=t&&t.length?Gt(t,e=e===is?1:Wr(e)):[]},pt.flip=function(t){return ki(t,512)},pt.flow=$o,pt.flowRight=Oo,pt.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,n={};++e<i;){var r=t[e];n[r[0]]=r[1]}return n},pt.functions=function(t){return null==t?[]:Xt(t,ao(t))},pt.functionsIn=function(t){return null==t?[]:Xt(t,co(t))},pt.groupBy=Xn,pt.initial=function(t){return null!=t&&t.length?Ee(t,0,-1):[]},pt.intersection=Cn,pt.intersectionBy=Sn,pt.intersectionWith=kn,pt.invert=ro,pt.invertBy=oo,pt.invokeMap=Qn,pt.iteratee=Do,pt.keyBy=Zn,pt.keys=ao,pt.keysIn=co,pt.map=Jn,pt.mapKeys=function(t,n){var r={};return n=Fi(n,3),Vt(t,function(t,e,i){Ot(r,n(t,e,i),t)}),r},pt.mapValues=function(t,n){var r={};return n=Fi(n,3),Vt(t,function(t,e,i){Ot(r,e,n(t,e,i))}),r},pt.matches=function(t){return pe(Ft(t,1))},pt.matchesProperty=function(t,e){return ge(t,Ft(e,1))},pt.memoize=hr,pt.merge=lo,pt.mergeWith=ho,pt.method=Fo,pt.methodOf=jo,pt.mixin=No,pt.negate=ur,pt.nthArg=function(e){return e=Wr(e),Se(function(t){return ve(t,e)})},pt.omit=uo,pt.omitBy=function(t,e){return po(t,ur(Fi(e)))},pt.once=function(t){return rr(2,t)},pt.orderBy=function(t,e,i,n){return null==t?[]:(br(e)||(e=null==e?[]:[e]),br(i=n?is:i)||(i=null==i?[]:[i]),ye(t,e,i))},pt.over=Ro,pt.overArgs=dr,pt.overEvery=zo,pt.overSome=Bo,pt.partial=fr,pt.partialRight=pr,pt.partition=tr,pt.pick=fo,pt.pickBy=po,pt.property=Ho,pt.propertyOf=function(e){return function(t){return null==e?is:Qt(e,t)}},pt.pull=Kn,pt.pullAll=Pn,pt.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?be(t,e,Fi(i,2)):t},pt.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?be(t,e,is,i):t},pt.pullAt=An,pt.range=Wo,pt.rangeRight=Go,pt.rearg=gr,pt.reject=function(t,e){return(br(t)?Ra:Wt)(t,ur(Fi(e,3)))},pt.remove=function(t,e){var i=[];if(!t||!t.length)return i;var n=-1,r=[],o=t.length;for(e=Fi(e,3);++n<o;){var s=t[n];e(s,n,t)&&(i.push(s),r.push(n))}return we(t,r),i},pt.rest=function(t,e){if("function"!=typeof t)throw new A(ns);return Se(t,e=e===is?e:Wr(e))},pt.reverse=Mn,pt.sampleSize=function(t,e,i){return e=(i?qi(t,e,i):e===is)?1:Wr(e),(br(t)?Tt:Te)(t,e)},pt.set=function(t,e,i){return null==t?t:Ke(t,e,i)},pt.setWith=function(t,e,i,n){return n="function"==typeof n?n:is,null==t?t:Ke(t,e,i,n)},pt.shuffle=function(t){return(br(t)?Kt:Me)(t)},pt.slice=function(t,e,i){var n=null==t?0:t.length;return n?(i=i&&"number"!=typeof i&&qi(t,e,i)?(e=0,n):(e=null==e?0:Wr(e),i===is?n:Wr(i)),Ee(t,e,i)):[]},pt.sortBy=er,pt.sortedUniq=function(t){return t&&t.length?De(t):[]},pt.sortedUniqBy=function(t,e){return t&&t.length?De(t,Fi(e,2)):[]},pt.split=function(t,e,i){return i&&"number"!=typeof i&&qi(t,e,i)&&(e=i=is),(i=i===is?ls:i>>>0)?(t=Vr(t))&&("string"==typeof e||null!=e&&!Dr(e))&&!(e=je(e))&&dc(t)?Ye(yc(t),0,i):t.split(e,i):[]},pt.spread=function(n,r){if("function"!=typeof n)throw new A(ns);return r=null==r?0:U(Wr(r),0),Se(function(t){var e=t[r],i=Ye(t,0,r);return e&&Wa(i,e),Da(n,this,i)})},pt.tail=function(t){var e=null==t?0:t.length;return e?Ee(t,1,e):[]},pt.take=function(t,e,i){return t&&t.length?Ee(t,0,(e=i||e===is?1:Wr(e))<0?0:e):[]},pt.takeRight=function(t,e,i){var n=null==t?0:t.length;return n?Ee(t,(e=n-(e=i||e===is?1:Wr(e)))<0?0:e,n):[]},pt.takeRightWhile=function(t,e){return t&&t.length?ze(t,Fi(e,3),!1,!0):[]},pt.takeWhile=function(t,e){return t&&t.length?ze(t,Fi(e,3)):[]},pt.tap=function(t,e){return e(t),t},pt.throttle=function(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new A(ns);return Mr(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),ar(t,e,{leading:n,maxWait:e,trailing:r})},pt.thru=Hn,pt.toArray=Br,pt.toPairs=go,pt.toPairsIn=mo,pt.toPath=function(t){return br(t)?Ha(t,fn):Nr(t)?[t]:ni(dn(Vr(t)))},pt.toPlainObject=qr,pt.transform=function(t,n,r){var e=br(t),i=e||Sr(t)||Lr(t);if(n=Fi(n,4),null==r){var o=t&&t.constructor;r=i?e?new o:[]:Mr(t)&&Kr(o)?gt(T(t)):{}}return(i?ja:Vt)(t,function(t,e,i){return n(r,t,e,i)}),r},pt.unary=function(t){return nr(t,1)},pt.union=En,pt.unionBy=$n,pt.unionWith=On,pt.uniq=function(t){return t&&t.length?Ne(t):[]},pt.uniqBy=function(t,e){return t&&t.length?Ne(t,Fi(e,2)):[]},pt.uniqWith=function(t,e){return e="function"==typeof e?e:is,t&&t.length?Ne(t,is,e):[]},pt.unset=function(t,e){return null==t||Le(t,e)},pt.unzip=In,pt.unzipWith=Dn,pt.update=function(t,e,i){return null==t?t:Re(t,e,Ue(i))},pt.updateWith=function(t,e,i,n){return n="function"==typeof n?n:is,null==t?t:Re(t,e,Ue(i),n)},pt.values=vo,pt.valuesIn=function(t){return null==t?[]:oc(t,co(t))},pt.without=Fn,pt.words=Po,pt.wrap=function(t,e){return fr(Ue(e),t)},pt.xor=jn,pt.xorBy=Nn,pt.xorWith=Ln,pt.zip=Rn,pt.zipObject=function(t,e){return We(t||[],e||[],At)},pt.zipObjectDeep=function(t,e){return We(t||[],e||[],Ke)},pt.zipWith=zn,pt.entries=go,pt.entriesIn=mo,pt.extend=Xr,pt.extendWith=Qr,No(pt,pt),pt.add=Vo,pt.attempt=Ao,pt.camelCase=yo,pt.capitalize=_o,pt.ceil=Yo,pt.clamp=function(t,e,i){return i===is&&(i=e,e=is),i!==is&&(i=(i=Ur(i))==i?i:0),e!==is&&(e=(e=Ur(e))==e?e:0),Dt(Ur(t),e,i)},pt.clone=function(t){return Ft(t,4)},pt.cloneDeep=function(t){return Ft(t,5)},pt.cloneDeepWith=function(t,e){return Ft(t,5,e="function"==typeof e?e:is)},pt.cloneWith=function(t,e){return Ft(t,4,e="function"==typeof e?e:is)},pt.conformsTo=function(t,e){return null==e||jt(t,e,ao(e))},pt.deburr=bo,pt.defaultTo=function(t,e){return null==t||t!=t?e:t},pt.divide=Xo,pt.endsWith=function(t,e,i){t=Vr(t),e=je(e);var n=t.length,r=i=i===is?n:Dt(Wr(i),0,n);return 0<=(i-=e.length)&&t.slice(i,r)==e},pt.eq=mr,pt.escape=function(t){return(t=Vr(t))&&Ws.test(t)?t.replace(Bs,hc):t},pt.escapeRegExp=function(t){return(t=Vr(t))&&Zs.test(t)?t.replace(Qs,"\\$&"):t},pt.every=function(t,e,i){var n=br(t)?La:Bt;return i&&qi(t,e,i)&&(e=is),n(t,Fi(e,3))},pt.find=Un,pt.findIndex=_n,pt.findKey=function(t,e){return Va(t,Fi(e,3),Vt)},pt.findLast=qn,pt.findLastIndex=bn,pt.findLastKey=function(t,e){return Va(t,Fi(e,3),Yt)},pt.floor=Qo,pt.forEach=Vn,pt.forEachRight=Yn,pt.forIn=function(t,e){return null==t?t:Ut(t,Fi(e,3),co)},pt.forInRight=function(t,e){return null==t?t:qt(t,Fi(e,3),co)},pt.forOwn=function(t,e){return t&&Vt(t,Fi(e,3))},pt.forOwnRight=function(t,e){return t&&Yt(t,Fi(e,3))},pt.get=io,pt.gt=vr,pt.gte=yr,pt.has=function(t,e){return null!=t&&Hi(t,e,ee)},pt.hasIn=no,pt.head=xn,pt.identity=Io,pt.includes=function(t,e,i,n){t=xr(t)?t:vo(t),i=i&&!n?Wr(i):0;var r=t.length;return i<0&&(i=U(r+i,0)),jr(t)?i<=r&&-1<t.indexOf(e,i):!!r&&-1<Xa(t,e,i)},pt.indexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:Wr(i);return r<0&&(r=U(n+r,0)),Xa(t,e,r)},pt.inRange=function(t,e,i){return e=Hr(e),i===is?(i=e,e=0):i=Hr(i),t=Ur(t),(n=t)>=q(r=e,o=i)&&n<U(r,o);var n,r,o},pt.invoke=so,pt.isArguments=_r,pt.isArray=br,pt.isArrayBuffer=wr,pt.isArrayLike=xr,pt.isArrayLikeObject=Cr,pt.isBoolean=function(t){return!0===t||!1===t||Er(t)&&Jt(t)==fs},pt.isBuffer=Sr,pt.isDate=kr,pt.isElement=function(t){return Er(t)&&1===t.nodeType&&!Ir(t)},pt.isEmpty=function(t){if(null==t)return!0;if(xr(t)&&(br(t)||"string"==typeof t||"function"==typeof t.splice||Sr(t)||Lr(t)||_r(t)))return!t.length;var e=Bi(t);if(e==ys||e==Cs)return!t.size;if(Qi(t))return!he(t).length;for(var i in t)if(k.call(t,i))return!1;return!0},pt.isEqual=function(t,e){return se(t,e)},pt.isEqualWith=function(t,e,i){var n=(i="function"==typeof i?i:is)?i(t,e):is;return n===is?se(t,e,is,i):!!n},pt.isError=Tr,pt.isFinite=function(t){return"number"==typeof t&&H(t)},pt.isFunction=Kr,pt.isInteger=Pr,pt.isLength=Ar,pt.isMap=$r,pt.isMatch=function(t,e){return t===e||ae(t,e,Ni(e))},pt.isMatchWith=function(t,e,i){return i="function"==typeof i?i:is,ae(t,e,Ni(e),i)},pt.isNaN=function(t){return Or(t)&&t!=+t},pt.isNative=function(t){if(Xi(t))throw new r("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ce(t)},pt.isNil=function(t){return null==t},pt.isNull=function(t){return null===t},pt.isNumber=Or,pt.isObject=Mr,pt.isObjectLike=Er,pt.isPlainObject=Ir,pt.isRegExp=Dr,pt.isSafeInteger=function(t){return Pr(t)&&-as<=t&&t<=as},pt.isSet=Fr,pt.isString=jr,pt.isSymbol=Nr,pt.isTypedArray=Lr,pt.isUndefined=function(t){return t===is},pt.isWeakMap=function(t){return Er(t)&&Bi(t)==Ts},pt.isWeakSet=function(t){return Er(t)&&"[object WeakSet]"==Jt(t)},pt.join=function(t,e){return null==t?"":W.call(t,e)},pt.kebabCase=wo,pt.last=Tn,pt.lastIndexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=n;return i!==is&&(r=(r=Wr(i))<0?U(n+r,0):q(r,n-1)),e==e?function(t,e,i){for(var n=i+1;n--;)if(t[n]===e)return n;return n}(t,e,r):Ya(t,Za,r,!0)},pt.lowerCase=xo,pt.lowerFirst=Co,pt.lt=Rr,pt.lte=zr,pt.max=function(t){return t&&t.length?Ht(t,Io,te):is},pt.maxBy=function(t,e){return t&&t.length?Ht(t,Fi(e,2),te):is},pt.mean=function(t){return Ja(t,Io)},pt.meanBy=function(t,e){return Ja(t,Fi(e,2))},pt.min=function(t){return t&&t.length?Ht(t,Io,de):is},pt.minBy=function(t,e){return t&&t.length?Ht(t,Fi(e,2),de):is},pt.stubArray=Uo,pt.stubFalse=qo,pt.stubObject=function(){return{}},pt.stubString=function(){return""},pt.stubTrue=function(){return!0},pt.multiply=Jo,pt.nth=function(t,e){return t&&t.length?ve(t,Wr(e)):is},pt.noConflict=function(){return Ka._===this&&(Ka._=y),this},pt.noop=Lo,pt.now=ir,pt.pad=function(t,e,i){t=Vr(t);var n=(e=Wr(e))?vc(t):0;if(!e||e<=n)return t;var r=(e-n)/2;return yi(R(r),i)+t+yi(L(r),i)},pt.padEnd=function(t,e,i){t=Vr(t);var n=(e=Wr(e))?vc(t):0;return e&&n<e?t+yi(e-n,i):t},pt.padStart=function(t,e,i){t=Vr(t);var n=(e=Wr(e))?vc(t):0;return e&&n<e?yi(e-n,i)+t:t},pt.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),Y(Vr(t).replace(ta,""),e||0)},pt.random=function(t,e,i){if(i&&"boolean"!=typeof i&&qi(t,e,i)&&(e=i=is),i===is&&("boolean"==typeof e?(i=e,e=is):"boolean"==typeof t&&(i=t,t=is)),t===is&&e===is?(t=0,e=1):(t=Hr(t),e===is?(e=t,t=0):e=Hr(e)),e<t){var n=t;t=e,e=n}if(i||t%1||e%1){var r=X();return q(t+r*(e-t+ka("1e-"+((r+"").length-1))),e)}return xe(t,e)},pt.reduce=function(t,e,i){var n=br(t)?Ga:ec,r=arguments.length<3;return n(t,Fi(e,4),i,r,Rt)},pt.reduceRight=function(t,e,i){var n=br(t)?Ua:ec,r=arguments.length<3;return n(t,Fi(e,4),i,r,zt)},pt.repeat=function(t,e,i){return e=(i?qi(t,e,i):e===is)?1:Wr(e),Ce(Vr(t),e)},pt.replace=function(){var t=arguments,e=Vr(t[0]);return t.length<3?e:e.replace(t[1],t[2])},pt.result=function(t,e,i){var n=-1,r=(e=qe(e,t)).length;for(r||(r=1,t=is);++n<r;){var o=null==t?is:t[fn(e[n])];o===is&&(n=r,o=i),t=Kr(o)?o.call(t):o}return t},pt.round=ts,pt.runInContext=t,pt.sample=function(t){return(br(t)?kt:ke)(t)},pt.size=function(t){if(null==t)return 0;if(xr(t))return jr(t)?vc(t):t.length;var e=Bi(t);return e==ys||e==Cs?t.size:he(t).length},pt.snakeCase=So,pt.some=function(t,e,i){var n=br(t)?qa:$e;return i&&qi(t,e,i)&&(e=is),n(t,Fi(e,3))},pt.sortedIndex=function(t,e){return Oe(t,e)},pt.sortedIndexBy=function(t,e,i){return Ie(t,e,Fi(i,2))},pt.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var n=Oe(t,e);if(n<i&&mr(t[n],e))return n}return-1},pt.sortedLastIndex=function(t,e){return Oe(t,e,!0)},pt.sortedLastIndexBy=function(t,e,i){return Ie(t,e,Fi(i,2),!0)},pt.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=Oe(t,e,!0)-1;if(mr(t[i],e))return i}return-1},pt.startCase=ko,pt.startsWith=function(t,e,i){return t=Vr(t),i=null==i?0:Dt(Wr(i),0,t.length),e=je(e),t.slice(i,i+e.length)==e},pt.subtract=es,pt.sum=function(t){return t&&t.length?ic(t,Io):0},pt.sumBy=function(t,e){return t&&t.length?ic(t,Fi(e,2)):0},pt.template=function(s,t,e){var i=pt.templateSettings;e&&qi(s,t,e)&&(t=is),s=Vr(s),t=Qr({},t,i,Ti);var a,c,n=Qr({},t.imports,i.imports,Ti),r=ao(n),o=oc(n,r),l=0,h=t.interpolate||ga,u="__p += '",d=v((t.escape||ga).source+"|"+h.source+"|"+(h===qs?aa:ga).source+"|"+(t.evaluate||ga).source+"|$","g"),f="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++xa+"]")+"\n";s.replace(d,function(t,e,i,n,r,o){return i||(i=n),u+=s.slice(l,o).replace(ma,uc),e&&(a=!0,u+="' +\n__e("+e+") +\n'"),r&&(c=!0,u+="';\n"+r+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=o+t.length,t}),u+="';\n";var p=t.variable;p||(u="with (obj) {\n"+u+"\n}\n"),u=(c?u.replace(Ns,""):u).replace(Ls,"$1").replace(Rs,"$1;"),u="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var g=Ao(function(){return m(r,f+"return "+u).apply(is,o)});if(g.source=u,Tr(g))throw g;return g},pt.times=function(t,e){if((t=Wr(t))<1||as<t)return[];var i=ls,n=q(t,ls);e=Fi(e),t-=ls;for(var r=nc(n,e);++i<t;)e(i);return r},pt.toFinite=Hr,pt.toInteger=Wr,pt.toLength=Gr,pt.toLower=function(t){return Vr(t).toLowerCase()},pt.toNumber=Ur,pt.toSafeInteger=function(t){return t?Dt(Wr(t),-as,as):0===t?t:0},pt.toString=Vr,pt.toUpper=function(t){return Vr(t).toUpperCase()},pt.trim=function(t,e,i){if((t=Vr(t))&&(i||e===is))return t.replace(Js,"");if(!t||!(e=je(e)))return t;var n=yc(t),r=yc(e);return Ye(n,ac(n,r),cc(n,r)+1).join("")},pt.trimEnd=function(t,e,i){if((t=Vr(t))&&(i||e===is))return t.replace(ea,"");if(!t||!(e=je(e)))return t;var n=yc(t);return Ye(n,0,cc(n,yc(e))+1).join("")},pt.trimStart=function(t,e,i){if((t=Vr(t))&&(i||e===is))return t.replace(ta,"");if(!t||!(e=je(e)))return t;var n=yc(t);return Ye(n,ac(n,yc(e))).join("")},pt.truncate=function(t,e){var i=30,n="...";if(Mr(e)){var r="separator"in e?e.separator:r;i="length"in e?Wr(e.length):i,n="omission"in e?je(e.omission):n}var o=(t=Vr(t)).length;if(dc(t)){var s=yc(t);o=s.length}if(o<=i)return t;var a=i-vc(n);if(a<1)return n;var c=s?Ye(s,0,a).join(""):t.slice(0,a);if(r===is)return c+n;if(s&&(a+=c.length-a),Dr(r)){if(t.slice(a).search(r)){var l,h=c;for(r.global||(r=v(r.source,Vr(ca.exec(r))+"g")),r.lastIndex=0;l=r.exec(h);)var u=l.index;c=c.slice(0,u===is?a:u)}}else if(t.indexOf(je(r),a)!=a){var d=c.lastIndexOf(r);-1<d&&(c=c.slice(0,d))}return c+n},pt.unescape=function(t){return(t=Vr(t))&&Hs.test(t)?t.replace(zs,_c):t},pt.uniqueId=function(t){var e=++d;return Vr(t)+e},pt.upperCase=To,pt.upperFirst=Ko,pt.each=Vn,pt.eachRight=Yn,pt.first=xn,No(pt,(Zo={},Vt(pt,function(t,e){k.call(pt.prototype,e)||(Zo[e]=t)}),Zo),{chain:!1}),pt.VERSION="4.17.11",ja(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){pt[t].placeholder=pt}),ja(["drop","take"],function(i,n){yt.prototype[i]=function(t){t=t===is?1:U(Wr(t),0);var e=this.__filtered__&&!n?new yt(this):this.clone();return e.__filtered__?e.__takeCount__=q(t,e.__takeCount__):e.__views__.push({size:q(t,ls),type:i+(e.__dir__<0?"Right":"")}),e},yt.prototype[i+"Right"]=function(t){return this.reverse()[i](t).reverse()}}),ja(["filter","map","takeWhile"],function(t,e){var i=e+1,n=1==i||3==i;yt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Fi(t,3),type:i}),e.__filtered__=e.__filtered__||n,e}}),ja(["head","last"],function(t,e){var i="take"+(e?"Right":"");yt.prototype[t]=function(){return this[i](1).value()[0]}}),ja(["initial","tail"],function(t,e){var i="drop"+(e?"":"Right");yt.prototype[t]=function(){return this.__filtered__?new yt(this):this[i](1)}}),yt.prototype.compact=function(){return this.filter(Io)},yt.prototype.find=function(t){return this.filter(t).head()},yt.prototype.findLast=function(t){return this.reverse().find(t)},yt.prototype.invokeMap=Se(function(e,i){return"function"==typeof e?new yt(this):this.map(function(t){return re(t,e,i)})}),yt.prototype.reject=function(t){return this.filter(ur(Fi(t)))},yt.prototype.slice=function(t,e){t=Wr(t);var i=this;return i.__filtered__&&(0<t||e<0)?new yt(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==is&&(i=(e=Wr(e))<0?i.dropRight(-e):i.take(e-t)),i)},yt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},yt.prototype.toArray=function(){return this.take(ls)},Vt(yt.prototype,function(u,t){var d=/^(?:filter|find|map|reject)|While$/.test(t),f=/^(?:head|last)$/.test(t),p=pt[f?"take"+("last"==t?"Right":""):t],g=f||/^find/.test(t);p&&(pt.prototype[t]=function(){var t=this.__wrapped__,i=f?[1]:arguments,e=t instanceof yt,n=i[0],r=e||br(t),o=function(t){var e=p.apply(pt,Wa([t],i));return f&&s?e[0]:e};r&&d&&"function"==typeof n&&1!=n.length&&(e=r=!1);var s=this.__chain__,a=!!this.__actions__.length,c=g&&!s,l=e&&!a;if(g||!r)return c&&l?u.apply(this,i):(h=this.thru(o),c?f?h.value()[0]:h.value():h);t=l?t:new yt(this);var h=u.apply(t,i);return h.__actions__.push({func:Hn,args:[o],thisArg:is}),new vt(h,s)})}),ja(["pop","push","shift","sort","splice","unshift"],function(t){var i=s[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);pt.prototype[t]=function(){var e=arguments;if(!r||this.__chain__)return this[n](function(t){return i.apply(br(t)?t:[],e)});var t=this.value();return i.apply(br(t)?t:[],e)}}),Vt(yt.prototype,function(t,e){var i=pt[e];if(i){var n=i.name+"";(ot[n]||(ot[n]=[])).push({name:e,func:i})}}),ot[pi(is,2).name]=[{name:"wrapper",func:is}],yt.prototype.clone=function(){var t=new yt(this.__wrapped__);return t.__actions__=ni(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ni(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ni(this.__views__),t},yt.prototype.reverse=function(){if(this.__filtered__){var t=new yt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},yt.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=br(t),n=e<0,r=i?t.length:0,o=function(t,e,i){for(var n=-1,r=i.length;++n<r;){var o=i[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=q(e,t+s);break;case"takeRight":t=U(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,c=a-s,l=n?a:s-1,h=this.__iteratees__,u=h.length,d=0,f=q(c,this.__takeCount__);if(!i||!n&&r==c&&f==c)return Be(t,this.__actions__);var p=[];t:for(;c--&&d<f;){for(var g=-1,m=t[l+=e];++g<u;){var v=h[g],y=v.iteratee,_=v.type,b=y(m);if(2==_)m=b;else if(!b){if(1==_)continue t;break t}}p[d++]=m}return p},pt.prototype.at=Wn,pt.prototype.chain=function(){return Bn(this)},pt.prototype.commit=function(){return new vt(this.value(),this.__chain__)},pt.prototype.next=function(){this.__values__===is&&(this.__values__=Br(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?is:this.__values__[this.__index__++]}},pt.prototype.plant=function(t){for(var e,i=this;i instanceof mt;){var n=gn(i);n.__index__=0,n.__values__=is,e?r.__wrapped__=n:e=n;var r=n;i=i.__wrapped__}return r.__wrapped__=t,e},pt.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof yt){var e=t;return this.__actions__.length&&(e=new yt(this)),(e=e.reverse()).__actions__.push({func:Hn,args:[Mn],thisArg:is}),new vt(e,this.__chain__)}return this.thru(Mn)},pt.prototype.toJSON=pt.prototype.valueOf=pt.prototype.value=function(){return Be(this.__wrapped__,this.__actions__)},pt.prototype.first=pt.prototype.head,O&&(pt.prototype[O]=function(){return this}),pt}();"function"==typeof define&&"object"==_typeof(define.amd)&&define.amd?(Ka._=bc,define(function(){return bc})):F?((F.exports=bc)._=bc,D._=bc):Ka._=bc}.call(this),function(){var u=function o(s,a,c){function l(i,t){if(!a[i]){if(!s[i]){var e="function"==typeof u&&u;if(!t&&e)return e(i,!0);if(h)return h(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[i]={exports:{}};s[i][0].call(r.exports,function(t){var e=s[i][1][t];return l(e||t)},r,r.exports,o,s,a,c)}return a[i].exports}for(var h="function"==typeof u&&u,t=0;t<c.length;t++)l(c[t]);return l}({1:[function(t,e,i){var s=t("./utils.js"),a=t("./browser.js"),n=function t(){return this instanceof t?void this.init():new t};n.prototype.init=function(){this.data={},this.dead=!1},n.prototype.event=function(t){return s.isObject(t)?(s.assert(t.event,"a.event no event"),s.assert(t.listener,"a.event no listener"),[t.event,t.listener].join(".")):t},n.prototype.add=function(t,e,i,n){i=!0===i,t=this.event(t);var r={func:e,one:i,ctx:n};return this.data.hasOwnProperty(t)?this.data[t].push(r):this.data[t]=[r],this},n.prototype.on=function(t,e,i){return this.add(t,e,!1,i)},n.prototype.off=function(t,i){if(!this.data.hasOwnProperty(t))return this;var e=s.reduce(this.data[t],function(t,e){return(s.isNone(i)||e.func!==i)&&(s.isNone(i)||t.push(e)),t},[]);return 0===e.length?delete this.data[t]:this.data[t]=e,this},n.prototype.one=function(t,e,i){return this.add(t,e,!0,i)},n.prototype.get=function(t,e,i,n){s.isFunction(e)&&(i=e,e={},i&&(n=i)),e||(e={}),s.assert(i),e.hasOwnProperty("listener")||(e.listener="l"+s.getUUID()),this.one({event:t,listener:e.listener},i,n),this.notify(t,e)},n.prototype.notify=function(){if(this.dead)return!1;var e=Array.prototype.slice.call(arguments,0);if(0===e.length)return this;var i=this.event(e.splice(0,1)[0]);if(!this.data.hasOwnProperty(i))return this;var n,r=[],o=[];return s.each(this.data[i],function(t){o.push(t),!1===t.one&&r.push(t)}),0===r.length?delete this.data[i]:this.data[i]=r,s.each(o,function(t){try{n=s.isNone(t.ctx)?this:t.ctx,t.func.apply(n,e)}catch(t){a.console.error(i,e,t)}},this),this},n.prototype.listeners=function(r){return s.reduce(this.data,function(t,e,i){var n=i.split(".");return 2===n.length&&n[0]===r&&t.push(n[1]),t},[])},n.prototype.clear=function(){this.dead=!0,this.data={}},e.exports=n},{"./browser.js":4,"./utils.js":29}],2:[function(t,e,i){var a=t("./utils.js"),c=t("./browser.js"),s=t("conf"),l={random:function(t){return Math.floor(Math.random()*t)},safeCreateQuery:function(t){var e=a.map(t,function(t,e){return e+"="+("urls"===e?t:encodeURIComponent(t))});return e.sort(),e.join("&")},Keeper:function(t,e){this.init(t,e)}};l.Keeper.prototype={init:function(t,e){this.urls=t,this.count=0,this.results={},this.callback=e},each:function(t){if(this.results[t.original_url]=t,this.count++,this.count===this.urls.length){var e=a.map(this.urls,function(t){return this.results[t]},this);this.callback(e)}return this}},l.ajax=function(t,e,i,n){var r=new XMLHttpRequest,o=n?"POST":"GET";if("withCredentials"in r)r.open(o,t,!0),i&&a.map(i,function(t,e){r.setRequestHeader(e,t)}),r.setRequestHeader("Accept","application/json"),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?e&&e(JSON.parse(r.responseText)):e&&e({type:"error"}))};else{if("undefined"==typeof XDomainRequest)return e({type:"error"}),!1;(r=new XDomainRequest).open(o,t),r.onload=function(){e&&e(JSON.parse(r.responseText))},r.onerror=function(){e({type:"error"})},r.onprogress=function(){}}r.send(n||null)},l.API=function(t){this.init(t)},l.API.prototype.init=function(t){a.isString(t)?this.key=t:a.isNone(t)||(this.key=t.key),this.key=this.key?this.key:s.EMB_API_KEY,this.protocol="http:"===window.location.protocol?"http:":"https:"},l.API.prototype._buildUrl=function(t,e){if(a.isNone(this.key))return null;var i=this.protocol+"//api-cdn.embed.ly/"+t;return(e=e||{}).key||(e.key=this.key),i+"?"+l.safeCreateQuery(e)},l.API.prototype._data=function(n,e,o,i){if(c.console.log(n,e,o,i),a.isNone(i)&&a.isFunction(o)&&(i=o,o={}),a.isNone(i))return!1;if(a.isString(e)){o.url=e;var t=this._buildUrl(n,o);return l.ajax(t,function(t){t.url=e,i(t)}),!0}if(a.isArray(e)){if(0===e.length)return!1;var s=new l.Keeper(e,i),r=a.batch(e,10);return a.each(r,function(t){o.urls=a.map(t,function(t){return encodeURIComponent(t)}).join(",");var r,e,i=this._buildUrl(n,o);l.ajax(i,(r=s,e=t,function(n){a.each(e,function(t,e){var i=n[e];i.original_url=t,r.each(i)})}))},this),!0}return i({type:"error"}),!1},l.API.prototype.oembed=function(t,e,i){return this._data("1/oembed",t,e,i)},l.API.prototype.extract=function(t,e,i){return this._data("1/extract",t,e,i)},l.API.prototype.card=function(t,e,i){return this._data("1/card-details",t,e,i)},l.API.prototype.event=function(t,e){var i="api-"+l.random(10)+".embed.ly",n=this.protocol+"//"+i+"/1/e"+"?"+l.safeCreateQuery(t);l.ajax(n,e)},l.Display=function(){},l.Display.prototype._buildUrl=function(t,e,i){var n={key:s.EMB_API_KEY,url:e},r=a.extend(n,a.isNone(i)?{}:i),o="://i-cdn.embed.ly/1/display"+("display"===t?"":"/"+t);return(s.EMB_HTTPS?"https":"http")+o+"?"+l.safeCreateQuery(r)},l.Display.prototype.display=function(t,e){return this._buildUrl("display",t,e)},l.Display.prototype.crop=function(t,e){return this._buildUrl("crop",t,e)},l.Display.prototype.resize=function(t,e){return this._buildUrl("resize",t,e)},l.api=function(t){return new l.API(t)},l.display=function(){return new l.Display},e.exports=l},{"./browser.js":4,"./utils.js":29,conf:"conf"}],3:[function(t,e,i){var n=t("./utils"),r=t("./urlparse.js"),o={disallowed:["1kd60cb"],allowed:function(t){if(!t)return!0;var e=r.getDomain(t);if(!e)return!0;var i=n.fullHash(e);return-1===o.disallowed.indexOf(i)}};e.exports=o},{"./urlparse.js":28,"./utils":29}],4:[function(t,e,i){var c=t("./utils.js"),u=t("./dom.js"),n=t("./urlparse.js"),r=t("conf"),d={};d.supports={_test:function(t){var e=document.createElement("div"),i=t.charAt(0).toUpperCase()+t.substr(1),n=[t];c.each(["Webkit","Moz","O","ms","Khtml"],function(t){n.push(t+i)});for(var r=0;r<n.length;r++)if(""===e.style[n[r]])return!0;return!1},postMessage:function(){return!!window.postMessage},boxShadow:function(){return d.supports._test("boxShadow")},borderRadius:function(){return d.supports._test("borderRadius")},touch:function(){return!!("ontouchstart"in window)},svg:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},mediaQuery:function(){return!(void 0===window.matchMedia&&void 0===window.msMatchMedia)},rgba:function(){var t=document.createElement("div"),e=t.style.color;try{t.style.color="rgba(1,5,13,0.44)"}catch(t){}return t.style.color!==e},cors:function(){return"undefined"!=typeof XMLHttpRequest&&("withCredentials"in new XMLHttpRequest||"undefined"!=typeof XDomainRequest)},flash:function(){if(void 0!==navigator.plugins&&0!==navigator.plugins.length)return!!navigator.plugins["Shockwave Flash"];try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){return!1}},canvas:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}},d.detect=function(){var t=function(t,e){e?u.addClass(document.body,t):u.addClass(document.body,"no-"+t)};t("touch",d.supports.touch()),t("boxshadow",d.supports.boxShadow()),t("borderradius",d.supports.borderRadius()),t("rgba",d.supports.rgba()),t("mediaquery",d.supports.mediaQuery())},d.console={_log:function(t,e){if((r.EMB_DEBUG||window.EMB_DEBUG)&&!c.isNone(window.console)&&window.console&&window.console[t])if(window.console[t].apply)window.console[t].apply(window.console,e);else{var i=Array.prototype.join.call(e,", ");window.console[t](i)}},log:function(){this._log("log",arguments)},error:function(){this._log("error",arguments)}},d.open=function(t,e,i,n,r,o){if(c.isNone(r)||c.isNone(o)){var s=d.window.center(i,n);r=s.top,o=s.left}var a=window.open(t,e,"scrollbars=no, resizable=1, width="+i+", height="+n+", top="+r+", left="+o);window.focus&&a.focus()},d.cookie={set:function(t,e,i,n){var r="";if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),r="; expires="+o.toGMTString()}document.cookie=t+"="+e+r+"; path=/"+(n?"; secure":"")},get:function(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var r=i[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return null},del:function(t){d.cookie.set(t,"",-1)}},d.window={innerHeight:function(){return c.isNone(window.innerHeight)?document.documentElement.clientHeight:window.innerHeight},innerWidth:function(){return c.isNone(window.innerWidth)?document.documentElement.clientWidth:window.innerWidth},scrollY:function(){return c.isNone(window.pageYOffset)?(document.documentElement||document.body.parentNode||document.body).scrollTop:window.pageYOffset},center:function(t,e){var i=void 0!==window.screenLeft?window.screenLeft:screen.left,n=void 0!==window.screenTop?window.screenTop:screen.top;return{left:(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-t/2+i,top:(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-e/2+n}}},d.location={hash:function(){var t=window.location.href.split("#");return 2===t.length?t[1]:""},params:function(){return c.extend({},n.parseQuery(document.location.search),n.parseQuery(d.location.hash()))}},d.mobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},d.isIE=function(){return/msie|trident/i.test(navigator.userAgent)},d.isFirefox=function(){return/firefox/i.test(navigator.userAgent)},d.isPhantom=function(){return/phantomjs/i.test(navigator.userAgent)},d.isSafari=function(){return/safari/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent)},d.language=function(){return window.navigator.userLanguage||window.navigator.language},d.animateScroll=function(e,t){var i,n,r=d.window.scrollY(),o=e-r,s=(new Date).getTime(),a=!1;t=t||500;var c=Math.round(o/t*10),l=function(t){return e<t};c<0&&(l=function(t){return t<e});var h=function(){clearInterval(i),d.console.log("duration",(new Date).getTime()-s),u.detachEvent("scroll",n)};i=setInterval(function(){return l(r+=c)?(h(),!1):(window.scrollTo(0,r),void(a=!0))},10),n=function(){a&&r!==d.window.scrollY()&&h()},u.addEvent("scroll",n)},d.isSandboxIframe=function(){if(window.parent===window)return!1;try{return!window.frameElement.src}catch(t){return!1}return!1},e.exports=d},{"./dom.js":7,"./urlparse.js":28,"./utils.js":29,conf:"conf"}],5:[function(t,e,i){var o=!1,s=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,n=function(){};n.extend=function(t){function e(){!o&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;o=!0;var i=new this;for(var n in o=!1,t)i[n]="function"==typeof t[n]&&"function"==typeof r[n]&&s.test(t[n])?function(i,n){return function(){var t=this._super;this._super=r[i];var e=n.apply(this,arguments);return this._super=t,e}}(n,t[n]):t[n];return((e.prototype=i).constructor=e).extend=arguments.callee,e},e.exports=n},{}],6:[function(t,e,i){var r=t("./iframes/comms.js").one,o=t("./utils.js"),s={started:!1,instance:null,EVENTS:["xcomm.options.access","xcomm.media.recommend","xcomm.card.recommend","xcomm.user.set","xcomm.user.get","xcomm.user.remove","xcomm.log.event","xcomm.page.progress"],clear:function(){s.instance&&(s.instance.remove(),s.instance=null),s.started=!1},connect:function(n,t){if(!n||s.started)return!1;s.started=!0;var e=r(n,t);return s.instance=e,o.each(s.EVENTS,function(i){e.on(i,function(t){var e=i;t.listener&&(e={event:i,listener:t.listener}),n.notify(e,t)}),n.on(i,function(t){e.send(i,t)})}),e.on("xcomm.ready",function(t){n.notify("xcomm.ready",t)}),e}};e.exports=s},{"./iframes/comms.js":13,"./utils.js":29}],7:[function(t,e,i){var o=t("./utils.js"),n=t("conf"),s={toArray:function(t){return o.map(t,function(t){return t})},all:function(t){return document.querySelectorAll?s.toArray(document.querySelectorAll(t)):[]},one:function(t,e){var i=s.all(t,e);return 0===i.length?null:i[0]},create:function(t,e,i,n){return t&&o.isString(t)?(o.isString(e)&&o.isNone(i)&&(i=e,e={}),r=n?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t),o.each(e,function(t,e){r.setAttribute(e,t)}),i&&s.text(r,i),r):null;var r},set:function(t,e,i){if(!t||!o.isString(t))return null;o.isString(e)&&o.isNone(i)&&(i=e,e={});var n=s.one(t);return n?(o.each(e,function(t,e){n.setAttribute(e,t)}),o.isNone(i)||s.text(n,i),n):null},replace:function(t,e){o.assert(o.isElement(t),"replace requires an element to be replaced"),o.assert(o.isElement(e),"replace requires an element to replace with."),t.parentNode.replaceChild(e,t)},remove:function(t){return!(!o.isElement(t)||!o.isElement(t.parentNode))&&void t.parentNode.removeChild(t)},hide:function(t){return o.isString(t)&&(t=s.one(t)),o.isElement(t)&&(t.style.display="none"),t},show:function(t,e){return o.isString(t)&&(t=s.one(t)),o.isElement(t)&&(t.style.display=e?"inline-block":"block"),t},svg:function(t,e,i){return s.create(t,e,i,"http://www.w3.org/2000/svg")},children:function(t,i){return o.isElement(t)?o.reduce(t.childNodes,function(t,e){if(o.isElement(e)){if(!o.isNone(i))if(e.namespaceURI&&"http://www.w3.org/2000/svg"===e.namespaceURI){if(e.nodeName!==i)return t}else if(i.toUpperCase()!==e.nodeName)return t;t.push(e)}return t},[]):[]},child:function(t,e){var i=s.children(t,e);return 0!==i.length?i[0]:null},text:function(t,e){return o.isString(t)&&(t=s.one(t)),t&&o.isElement(t)?o.isNone(e)?t.innerText||t.textContent:void(t[void 0===t.textContent?"innerText":"textContent"]=e):null},hasClass:function(t,e){if(o.isString(t)&&(t=s.one(t)),!o.isElement(t)||!o.isString(e)||!e)return!1;var i=t.getAttribute("class");return!o.isNone(i)&&-1<(" "+i+" ").indexOf(" "+e+" ")},addClass:function(t,e){if(o.isString(t)&&(t=s.one(t)),!o.isElement(t)||!o.isString(e)||!e)return!1;if(s.hasClass(t,e))return!1;var i=t.getAttribute("class");if(o.isNone(i))return t.setAttribute("class",e),!0;var n=i.split(" "),r=[];return o.map(n,function(t){var e=o.trim(t);""!==e&&r.push(e)}),r.push(e),t.setAttribute("class",r.join(" ")),!0},removeClass:function(t,n){if(o.isString(t)&&(t=s.one(t)),!o.isElement(t)||!o.isString(n)||!n)return!1;var e=t.getAttribute("class");if(o.isNone(e))return!1;var r=!1,i=o.reduce(e.split(" "),function(t,e){var i=o.trim(e);return i&&(i===n?r=!0:t.push(i)),t},[]);return t.setAttribute("class",i.join(" ")),r},data:function(t,e,i){o.assert(t&&o.isElement(t),"dom.data needs an element."),o.assert(e&&o.isString(e),"dom.data needs an attr.");var n=o.camelCase(e,1);return o.isNone(i)?o.isNone(t.dataset)?t.getAttribute("data-"+e):o.isNone(t.dataset[n])?null:t.dataset[n]:void(o.isNone(t.dataset)?t.setAttribute("data-"+e,i):t.dataset[n]=i)},attrize:function(t){return t&&o.isObject(t)?o.map(t,function(t,e){return e+'="'+t+'"'}).sort().join(" "):""},event:function(t){var e=o.extend({},t||window.event);return e.target||(e.target=e.srcElement||document),3===e.target.nodeType&&(e.target=e.target.parentNode),!t.metaKey&&t.ctrlKey&&(e.metaKey=e.ctrlKey),e.stop=function(){t.preventDefault?t.preventDefault():t.returnValue=!1},e.pageX||e.pageY||!e.clientX&&!e.clientY||(e.pageX=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.pageY=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),e},addEvent:function(t,e,i){o.isNone(t)||(t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i)},detachEvent:function(t,e,i){o.isNone(t)||(t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null)},trigger:function(t,e){var i;o.assert(o.contains(["click"],e),"Not a valid event"),t.dispatchEvent?((i=document.createEvent("MouseEvents")).initEvent(e,!0,!0),t.dispatchEvent(i,!0)):(i=document.createEventObject(),t.fireEvent("on"+e,i))},rect:function(t){try{return t.getBoundingClientRect()}catch(t){}return!1},onResize:function(t){var e;s.addEvent(window,"resize",function(){clearTimeout(e),e=setTimeout(t,100)})}};!0===n.EMB_DEBUG&&(window.dom=s),e.exports=s},{"./utils.js":29,conf:"conf"}],8:[function(t,e,i){var n=t("./utils.js"),r=t("./swap.js"),o=t("./dom.js"),s=t("./mutations.js"),a={timeout:null,hub:null,selectors:{cards:[{selector:".embedly-card"},{selector:".reddit-card"}],button:[".embedly-button"],slideshow:[".embedly-slideshow"]},analytics:null,_queue:[],add:{}};a.add.cards=function(t){if(n.isString(t)){if(".embedly-card"===t)return!1;a.selectors.cards.push({selector:t})}else if(!n.isElement(t)&&n.isObject(t)){if(!t.selector&&!t.types)return!1;var e={};if(n.isArray(t.types)&&0<t.types.length&&(e.types=t.types),t.selector)e.selector=t.selector,a.selectors.cards.push(e);else{var i=a.selectors.cards.reduce(function(t,e){return".embedly-card"===e.selector?e:t},{});if(!i)return!1;i.types=e.types}}a.look()},a.add.button=function(t){n.isString(t)&&(a.selectors.button.push(t),a.look())},a.select=function(t,e){return"."===t.substr(0,1)?!!o.hasClass(e,t.substr(1)):!!n.contains(o.all(t),e)},a.each=function(t){var e,i;if("A"===t.nodeName||"BLOCKQUOTE"===t.nodeName)for(e=0;e<a.selectors.cards.length;e++)if(i=a.selectors.cards[e],a.select(i.selector,t))return t._em_opts=i,{name:"card",node:t};if("A"===t.nodeName)for(e=0;e<a.selectors.button.length;e++)if(a.select(a.selectors.button[e],t))return{name:"button",node:t};if("DIV"===t.nodeName)for(e=0;e<a.selectors.slideshow.length;e++)if(a.select(a.selectors.slideshow[e],t))return{name:"slideshow",node:t};if("IFRAME"===t.nodeName){if("embedly-embed"===t.className)return{name:"iframe",node:t};if(t.src&&/\/\/cdn\.embedly\.com\/widgets\/media\.html/.test(t.src))return{name:"iframe",node:t};if(null!==a.analytics&&a.analytics.replace){var n=r.replace(t,a.analytics);if(null!==n)return{name:"iframe",node:n}}}return null},a.release=function(){var t=a._queue;a._queue=[],t=n.reduce(t,function(t,e){return n.contains(t,e)||e.className&&"embd-"===e.className.substr(0,5)||t.push(e),t},[]);var e=n.reduce(t,function(t,e){var i=a.each(e);return i&&t[i.name+"s"].push(i.node),t},{cards:[],buttons:[],slideshows:[],iframes:[]});a.hub.notify("found",e)},a.queue=function(t){clearTimeout(a.timeout),a._queue.push(t),a.timeout=setTimeout(function(){a.release()},50)},a.look=function(){n.each(a.selectors.cards,function(t){n.each(o.all(t.selector),function(t){a.queue(t)})}),n.each(a.selectors.button,function(t){n.each(o.all(t),function(t){a.queue(t)})}),n.each(a.selectors.slideshow,function(t){n.each(o.all(t),function(t){a.queue(t)})}),n.each(o.all("iframe"),function(t){a.queue(t)}),a.hub&&a.hub.notify("look.done")},a.stop=function(){s.stop()},a.connect=function(t){(a.hub=t).on("mutation.insert.a",a.queue),t.on("mutation.insert.blockquote",a.queue),t.on("mutation.insert.iframe",a.queue),s.connect(t),a.look()},e.exports=a},{"./dom.js":7,"./mutations.js":20,"./swap.js":26,"./utils.js":29}],9:[function(t,e,i){e.exports={cards:t("./cards.js"),button:t("./button.js"),modal:t("./modal.js"),slideshow:t("./slideshow.js"),comms:t("./comms.js"),connect:t("./base.js").connect}},{"./base.js":10,"./button.js":11,"./cards.js":12,"./comms.js":13,"./modal.js":14,"./slideshow.js":15}],10:[function(t,e,i){var h=t("../utils.js"),u=t("../dom.js"),d=t("../a.js"),f=t("../browser.js"),p=t("../urlparse.js"),g=t("conf"),s={connect:function(t,e,i){if(!e||!h.isElement(e))return!1;var r={sid:t,elem:e},o=p.getOrigin(e.src?e.src:document.location.toString()),n=new d,s=[],a=!1,c=e.src;r.on=function(t,e,i){n.on(t,e,i)},r.one=function(t,e,i){n.one(t,e,i)},r.off=function(t,e){n.off(t,e)},r.send=function(t,e,i){if(h.isNone(e)&&(e={}),h.isString(e)&&(e={msg:e}),e.method=t,!1===a&&!i)return f.console.log("frame.queue",e),s.push(e),!1;if(r.sid&&(e.sid=r.sid),f.console.log("frame.send",e),r.__tunnel)r.__tunnel.send(e);else if(r.elem.contentWindow&&r.elem.contentWindow.postMessage){var n=JSON.stringify(e);r.elem.contentWindow.postMessage(n,null===o?"*":o)}},r.ready=function(){a||(f.console.log("frame.ready",r.name),a=!0,h.each(s,function(t){r.send(t.method,t)}))},r.resize=function(t){t.width&&r.elem.setAttribute("width",t.width),t.height&&r.elem.setAttribute("height",t.height)},r.remove=function(){u.remove(r.elem),r.__hub.clear(),r.__tunnel&&r.__tunnel.clear(),r._remove&&r._remove()},n.on("message",function(t){"resize"===t.method&&r.resize&&r.resize(t),t.event&&t.listener?n.notify({event:t.event,listener:t.listener},t):t.method&&n.notify(t.method,t)});var l=function(t,e){if(t.origin===o||null===o||"about:"===t.origin){if(!e.src&&!e.sid&&!e.listener)return!1;if(r.sid&&e.sid!==r.sid)return!1;if(e.src&&e.src!==c)return!1;f.console.log("frame.message",e),n.notify("message",e)}};return i.on("window.message",l),r._remove=function(){i.off("window.message",l)},r.__hub=n,r},rendering:function(t){return"1"===u.data(t,"rendering")||(u.data(t,"rendering","1"),!1)},create:function(a,t,e,i,n){var r=h.getUUID();e.sid=r;var o=h.extend({},i);!1===e.sandbox&&(o.src=g.EMB_FRAME_SRC+a+".html#sid="+r),e.url&&(o.id="emb_"+h.hash(e.url)),o.class="embedly-"+a;var c=u.create("iframe",o);h.each(n,function(t,e){c.style[e]=t});var l=s.connect(r,c,t);return!(l.__appended=function(){})===e.sandbox||(l.__appended=function(){var t=c.contentWindow.document,e=decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E");t.open(),t.write(e),t.close();var i=t.getElementsByTagName("head")[0],n=g.EMB_ORIGIN_BASE+"js/all."+g.EMB_ASSET_VERSION+".js",r=g.EMB_ORIGIN_BASE+"css/all."+g.EMB_ASSET_VERSION+".css",o=t.createElement("script");o.type="text/javascript",o.src=n;var s=t.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=r,l.__hub.notify(a+".load",c,t),i.appendChild(s),t.body.appendChild(o)}),l}};e.exports=s},{"../a.js":1,"../browser.js":4,"../dom.js":7,"../urlparse.js":28,"../utils.js":29,conf:"conf"}],11:[function(t,e,i){var a=t("../utils.js"),c=t("../browser.js"),l=t("../dom.js"),h=t("./base.js"),u=t("../tunnels.js"),d={name:"button",attrs:{frameborder:"0",scrolling:"no",allowtransparency:"true",height:"20",width:"80"},styles:{border:"none"},one:function(e,t){if(!a.isElement(e))return null;if(h.rendering(e))return null;var i=l.data(e,"url");a.isNone(i)&&(i=document.location.toString());var n,r={url:i};a.each(["theme","target","lang"],function(t){n=l.data(e,t),a.isNone(n)||(r[t]=n)});var o=c.window.center(635,500);r.left=o.left,r.top=o.top;var s=h.create("button",t,r,d.attrs,d.styles);return s.one("button.load",function(t){var e,i,n=(e=s,i=r,function(t){e.__tunnel=new u.Tunnel(e.__hub),t.create(i,e.__tunnel)});t.contentWindow.buttons?n(t.contentWindow.buttons):t.contentWindow.onButtonsReady=n}),l.replace(e,s.elem),s.__appended(),s.on("button.click",function(){c.window.innerWidth()<=768||c.mobile()?window.location="http://embed.ly/code?url="+encodeURIComponent(r.url):t.notify("modal.create",r)}),s.on("button.ready",function(){s.ready()}),s}};e.exports=d},{"../browser.js":4,"../dom.js":7,"../tunnels.js":27,"../utils.js":29,"./base.js":10}],12:[function(t,e,i){var h=t("../api.js"),u=t("../utils.js"),d=t("../dom.js"),f=t("../urlparse.js"),s=t("../browser.js"),p=t("../keeper.js"),a=t("./base.js"),c=t("../share.js"),l=t("../tunnels.js"),g={attrs:{frameborder:"0",scrolling:"no",allowtransparency:"true",allowfullscreen:"true"},styles:{width:"1px",height:"0px",border:"none",position:"absolute",visibility:"hidden"},extractless:/https:\/\/(\w+\.pinterest\.com\/.*)|(\w+\.reddit\.com\/r\/.*\/comments\/.*)/,sandboxless:[{re:/https?:\/\/\w+\.facebook\.com\/.*/},{re:/https?:\/\/twitter\.com\/.*/,test:function(){return s.isFirefox()}}],isPercent:function(t){return/\%/i.test(t)},cleanWidth:function(t){t=u.trim(t);var e=/(\d+)px/i.exec(t);return e&&(t=e[1]),t},sandbox:function(t){var e,i;for(e=0;e<g.sandboxless.length;e++)if((i=g.sandboxless[e]).re.test(t))return!!u.isFunction(i.test)&&!i.test(t);return!0},css:function(){if(void 0!==g._css)return g._css;var t=d.one("style.embedly-css");if(u.isElement(t)){var e=d.text(t);u.spaceless(e)&&(g._css="style:"+u.trim(e))}else{var i=d.one("link.embedly-css");u.isElement(i)&&i.href&&(g._css="link:"+u.trim(i.href))}return g._css||(g._css=null),g._css},options:function(i){if(!u.isElement(i)||!u.isElement(i.parentNode))return null;var n={sandbox:!0};u.each(["type","via","chrome","image","description","key","align","embed","controls","analytics","lang","width","referrer","theme","recommend","branding","seo","preview","comment","created"],function(t){var e=d.data(i,"card-"+t);u.isNone(e)||(n[t]=e)});var e,r,o,t=g.css();if(t&&(n.css=t),u.each(["recommend-1","recommend-2","recommend-3"],function(t){var e=d.data(i,"card-"+t);u.isNone(e)||(n.hasOwnProperty("recommendations")?n.recommendations.push(e):n.recommendations=[e])}),"BLOCKQUOTE"===i.nodeName){var s,a,c=d.child(i,"h4"),l=d.child(i,"p");if(u.isNone(c)){if("reddit-card"===i.className){if(0<(a=d.toArray(i.querySelectorAll("a"))).length){if(!(s=a[0])||!s.href)return!1;n.url=s.href}}else if(l){if(0===(a=i.getElementsByTagName("a")).length)return!1;s=a[a.length-1],n.url=s.getAttribute("href")}}else s=d.child(c,"a"),n.url=s.getAttribute("href"),n.title=d.text(s),u.isNone(l)?n.description="0":n.description=d.text(l)}else"A"===i.nodeName&&(n.url=i.getAttribute("href"));if(u.each(["url","image","embed"],function(t){n.hasOwnProperty(t)&&(n[t]=f.sanitize(n[t]))}),u.each(document.getElementsByTagName("meta"),function(t){o=[t.getAttribute("name"),t.getAttribute("property")],u.contains(o,"twitter:site")?r=t.getAttribute("content"):u.contains(o,"twitter:creator")&&(e=t.getAttribute("content"))}),e?n.twitter_via=e:r&&(n.twitter_via=r),!n.url)return null;var h=f.parse(n.url);return h.valid()?(n.url=h.url,n.sandbox=g.sandbox(n.url),n.referrer||(n.referrer=document.URL),n.width&&(n.width=g.cleanWidth(n.width)),/thescore\.com/.test(n.referrer)&&(n.key="900b122ee8ee43f79b2240c831f24429"),n):null}},m=function(t,e,i,n){this.init(t,e,i,n)};m.prototype.init=function(t,e,i,n){if(this.elem=e,!(this.options=i).url)return this.error=!0,this.frame=null,!1;this.error=!1,this.frame=g.build(e,i,t),this._done=n;var r=new p,o=r.callback();this.frame.one("card.load",function(t,e){o({iframe:t,doc:e})}),this._extract=r.callback(),this.extract=u.bind(function(t){return!this.extracted&&(this.extracted=!0,void this._extract(t))},this),i.embed&&(this.media=r.callback());var s=e.parentNode;s&&s.offsetWidth&&(600<s.offsetWidth?this.frame.elem.style.width="600px":this.frame.elem.style.width=s.offsetWidth+"px");var a=d.create("div",{class:"embedly-card"}),c=d.create("div",{class:"embedly-card-hug"});a.appendChild(c),c.appendChild(this.frame.elem),s.insertBefore(a,e),this.frame.__appended(),r.wait(this.done,this)},m.prototype.done=function(t){var e,i,n,r=t[0].iframe,o=t[0].doc,s=t[1],a={};if(3===t.length&&(a=t[2].media),!this.frame.elem.parentNode)return!1;if(!1===this.options.sandbox)this.frame.ready(),this.frame.send("card.create",{options:this.options,extract:s,media:a});else{var c=(e=this.options,i=s,n=this.frame,function(t){n.__tunnel=new l.Tunnel(n.__hub),t.create(o.body,{options:e,extract:i,media:a,tunnel:n.__tunnel})});r.contentWindow.cards?c(r.contentWindow.cards):r.contentWindow.onCardsReady=c}this.frame.options=this.options,this.frame.extract=s,this._done(this.frame)},g.fetch=function(r,o,e,i){(e=u.extend({},e||{})).protocol=window.location.protocol,e=u.map(o,function(t){return!0===e.override?u.extend({},g.options(t),e):u.extend({},e,g.options(t))});var s=new p,a=[];e=u.reduce(e,function(t,e,i){var n=new m(r,o[i],e,s.callback());return g.extractless.test(e.url)?n.extract({}):n.error||t.push(e),a.push(n),t},[]);var t=u.reduce(e,function(t,e){return t.push(e.url),e.embed&&t.push(e.embed),t},[]);if(!t.length)return u.isFunction(i)&&i(u.map(a,function(t){return t.frame})),u.map(a,function(t){return t.frame});var n={card:1,v:"MTcyMDEw",youtube_showinfo:0,native:!0},c=u.reduce(e,function(t,e){return e.key&&!t?e.key:t},null);c&&(n.key=c);var l=window.location.protocol;return e.protocol&&(l=e.protocol),l=l.split(":")[0],u.contains(["http","https"],l)||(l="https"),n.scheme=l,h.api().card(t,n,function(t){u.each(t,function(e){u.each(a,function(t){t.options.url===e.original_url?t.extract(e):t.options.embed===e.original_url&&t.media(e)})})}),s.wait(function(t){i(t)}),u.map(a,function(t){return t.frame})},g.build=function(n,t,r){var o=a.create("card",r,t,g.attrs,g.styles);return s.isFirefox()&&(o.elem.style.visibility="visible",o.elem.style.height="1px"),o.on("card.repeat",function(e){var i={url:e.url,via:document.location.toString()};u.each(["image","embed","title","description","lang"],function(t){e.hasOwnProperty(t)&&(i[t]=e[t])}),r.notify("modal.create",i)}),o.on("card.ready",function(){o.ready()}),o.on("card.rendered",function(t){if(o.url=t.url,o.type=t.type,"error"===t.name)return o.__hub.notify("card.error",n),o.remove(),!1;if(n._em_opts){var e=u.extend({},n._em_opts);if(delete n._em_opts,u.isArray(e.types)&&0<e.types.length&&!u.contains(e.types,t.type))return o.__hub.notify("card.error",n),o.remove(),!1}o.rendered=!0,!o.options.twitter_via&&t.defaultTwitterVia&&(o.options.twitter_via=t.defaultTwitterVia);var i=o.elem.parentNode;o.elem.style.display="block",o.elem.style.margin="0",o.elem.style.padding="0",o.elem.style.visibility="visible",o.elem.style.position="relative",t.height?o.elem.height=t.height:o.elem.height="300",t.width?g.isPercent(t.width)?(i.style.width=t.width,o.elem.width="100%"):(o.elem.width=t.width,i.style.maxWidth=t.width+"px"):(o.elem.width="600",i.style.maxWidth="600px"),i.style.padding="0",i.style.position="relative",i.style.minWidth="200px","left"===t.align?i.style.margin="5px 0":"right"===t.align?i.style.margin="5px 0 5px auto":i.style.margin="5px auto",o.elem.style.width=null,o.elem.style.height=null,o.elem.style.maxWidth="100%",o.elem.style.minWidth="200px",d.remove(n),"error"!==t.type&&(r.notify("card.rendered",o.elem,o),t.controls&&c.card(o))}),o.one("card.error",function(t){r.notify("card.error",t)}),o.on("resize",function(){r.notify("card.resize",o.elem,o)}),o.on("log.event",function(t){r.notify("log.event",t)}),o.on("pinterest.log",function(){r.notify("pinterest.log")}),o.on("card.player.ready",function(){r.notify("card.player.ready",o)}),o.on("card.recommend.shown",function(t){r.notify("recommend.shown",o.elem,t)}),o},g.multi=function(t,e,i,n){return t=u.reduce(t,function(t,e){return a.rendering(e)||t.push(e),t},[]),g.fetch(i,t,e,function(t){u.isFunction(n)&&n(t)})},g.one=function(t,e,i,n){return a.rendering(t)?null:g.fetch(i,[t],e,function(t){u.isFunction(n)&&n(t[0])})[0]},e.exports=g},{"../api.js":2,"../browser.js":4,"../dom.js":7,"../keeper.js":17,"../share.js":25,"../tunnels.js":27,"../urlparse.js":28,"../utils.js":29,"./base.js":10}],13:[function(t,e,i){var s=t("../utils.js"),a=t("../dom.js"),c=t("../urlparse.js"),l=t("./base.js"),h=t("conf"),u={attrs:{frameborder:"0",allowtransparency:"true"},styles:{border:"none",position:"absolute",top:"-9999em",width:"10px",height:"10px"},one:function(t,e){var i=s.getUUID();s.assert(e.name),e=s.extend({sid:i},e||{});var n=s.extend({},u.attrs);n.id="emb_xcomm",n.class="embedly-xcomm",n.src=h.EMB_SECURE_FRAME_SRC+"xcomm.html#"+c.createQuery(e);var r=a.create("iframe",n);s.each(u.styles,function(t,e){r.style[e]=t});var o=l.connect(i,r,t);return o.on("xcomm.ready",function(){o.ready()}),document.body.appendChild(r),o}};e.exports=u},{"../dom.js":7,"../urlparse.js":28,"../utils.js":29,"./base.js":10,conf:"conf"}],14:[function(t,e,i){var n=t("../utils.js"),s=t("../browser.js"),a=t("./base.js"),c=t("../tunnels.js"),l={name:"modal",attrs:{frameborder:"0",allowtransparency:"true"},styles:{border:"none",position:"fixed",top:"0",left:"0",bottom:"0",right:"0",width:"100%",height:"100%",zIndex:"2147483647"},one:function(r,t){if(n.isNone(r)&&(r={url:document.location.toString()}),n.isNone(r.url)&&(r.url=document.location.toString()),r.protocol=window.location.protocol,"window"===r.target)return s.open("http://cdn.embedly.com/widgets/embed?url="+encodeURIComponent(r.url),"Embed Code",635,500),!1;r.t="card";var o=a.create("modal",t,r,l.attrs,l.styles);return o.on("modal.load",function(t){var e,i,n=(e=o,i=r,function(t){e.__tunnel=new c.Tunnel(e.__hub),t.create(i,e.__tunnel)});t.contentWindow.modals?n(t.contentWindow.modals):t.contentWindow.onModalsReady=n}),o.resize=function(){},o.on("modal.close",function(){document.body.style.overflow="inherit",document.body.removeChild(o.elem)}),o.on("modal.ready",function(){o.ready()}),o.one("modal.copy",function(){t.notify("modal.copy",r)}),document.body.appendChild(o.elem),document.body.style.overflow="hidden",o.__appended(),o}};e.exports=l},{"../browser.js":4,"../tunnels.js":27,"../utils.js":29,"./base.js":10}],15:[function(t,e,i){var l=t("../utils.js"),n=t("../api.js"),h=t("../dom.js"),u=t("../keeper.js"),d=t("./base.js"),f=t("../tunnels.js"),p={name:"slideshow",attrs:{frameborder:"0",scrolling:"no",allowtransparency:"true",allowfullscreen:"true"},styles:{width:"1px",height:"0px",border:"none",position:"absolute",visibility:"hidden"},opts:["schema","lang","width","align"],options:function(n,i){if(!l.isElement(n)||!l.isElement(n.parentNode))return null;var t=l.reduce(p.opts,function(t,e){return i.hasOwnProperty(e)&&(t[e]=i[e]),t},i.options?i.options:{});return l.reduce(p.opts,function(t,e){var i=h.data(n,"slideshow-"+e);return l.isNone(i)||(t[e]=i),t},t)},urls:function(t,e){return l.isArray(e.urls)&&0<e.urls.length?e.urls:l.reduce(h.children(t,"blockquote"),function(t,e){if("BLOCKQUOTE"===e.nodeName){var i=h.child(e,"h4");if(!l.isNone(i)){var n=h.child(i,"a");l.isNone(n)||t.push(n.href)}}return t},[])},fetch:function(t,e){n.api().extract(t,{card:1,v:1},function(t){e(t)})},build:function(t,e,i){var n,r,o,s=e[0].iframe,a=e[0].doc,c=e[1],l=(n=i,r=t,o=c,function(t){n.__tunnel=new f.Tunnel(n.__hub),t.create(a.body,{options:r,extract:o,tunnel:n.__tunnel})});s.contentWindow.slideshows?l(s.contentWindow.slideshows):s.contentWindow.onSlideshowsReady=l},one:function(e,t,i){if(!l.isElement(e))return null;if(t=t||{},d.rendering(e))return null;var n=p.options(e,t),r=p.urls(e,t);if(null===n||0===r.length)return null;var o=d.create("slideshow",i,n,p.attrs,p.styles),s=new u,a=s.callback(),c=s.callback();return s.wait(function(t){p.build(n,t,o)}),o.on("slideshow.load",function(t,e){a({iframe:t,doc:e})}),p.fetch(r,c),e.parentNode.insertBefore(o.elem,e),o.on("slideshow.ready",function(){o.ready()}),o.on("slideshow.rendered",function(t){return o.ready(),"error"===t.name?(o.remove(),o.__hub.notify("slideshow.error",e),!1):(o.rendered=!0,o.elem.style.display="block",o.elem.style.margin="10px auto",o.elem.style.visibility="visible",o.elem.style.position="relative",o.elem.width="700",t.height?o.elem.height=t.height:o.elem.height="500",t.width?o.elem.width=t.width:o.elem.width="700",o.elem.style.width=null,o.elem.style.height=null,o.elem.style.maxWidth="99%",o.elem.style.minWidth="300px",void h.remove(e))}),o.on("log.event",function(t){i.notify("log.event",t)}),o.__appended(),o}};e.exports=p},{"../api.js":2,"../dom.js":7,"../keeper.js":17,"../tunnels.js":27,"../utils.js":29,"./base.js":10}],16:[function(t,e,i){var r=t("./utils.js"),n=t("./class.js"),o={senders:[],integrations:["google","kissmetrics","mixpanel","segment","heap","intercom"]};o.Sender=n.extend({init:function(){this.sent=[]},event:function(t,e,i){var n=r.reduce([t,e,i],function(t,e){return e&&(t+=e),t},"");return!r.contains(this.sent,n)&&(this.sent.push(n),void this.send(t,e,i))},send:function(){}}),o.GoogleAnalytics=o.Sender.extend({isValid:function(){return window.ga&&r.isFunction(window.ga)},send:function(t,e,i){window.ga("send","event","Embedly > "+t,e,i)}}),o.KissMetrics=o.Sender.extend({isValid:function(){return window._kmq&&r.isFunction(window._kmq.push)},send:function(t,e,i){window._kmq.push(["record","Embedly > "+t+" > "+e,{url:i}])}}),o.Mixpanel=o.Sender.extend({isValid:function(){return window.mixpanel&&r.isFunction(window.mixpanel.push)},send:function(t,e,i){window.mixpanel.push(["track","Embedly > "+t+" > "+e,{url:i}])}}),o.Segment=o.Sender.extend({isValid:function(){return window.analytics&&r.isFunction(window.analytics.track)},send:function(t,e,i){window.analytics.track("Embedly > "+t+" > "+e,{url:i})}}),o.Heap=o.Sender.extend({isValid:function(){return window.heap&&r.isFunction(window.heap.track)},send:function(t,e,i){window.heap.track("Embedly > "+t+" > "+e,{url:i})}}),o.Intercom=o.Sender.extend({isValid:function(){return window.Intercom&&r.isFunction(window.Intercom)},send:function(t,e,i){window.Intercom("trackEvent","Embedly > "+t+" > "+e,{url:i})}}),o._integrations={google:o.GoogleAnalytics,kissmetrics:o.KissMetrics,mixpanel:o.Mixpanel,segment:o.Segment,heap:o.Heap,intercom:o.Intercom},o.send=function(e,i,n){r.each(o.senders,function(t){t.isValid()&&t.event(e,i,n)}),o.hub&&o.hub.notify("analytics.event",e,i,n)},o.player=function(i){i.on("play",function(){o.send("Video","Play",i.url)}),i.on("timeupdate",function(t){if(t.seconds&&t.duration&&r.isNumber(t.seconds)&&r.isNumber(t.duration)){var e=parseInt(t.seconds/t.duration*4,10);e&&0<e&&e<5&&o.send("Video",r.fmt("{n}% Watched",{n:(25*e).toString()}),i.url)}}),i.on("ended",function(){o.send("Video","100% Watched",i.url)})},o.event=function(t,e,i){return!!(t&&e&&i&&"click"===e)&&(r.contains(["facebook","twitter","pinterest","repeat"],t)&&(e=t,t="social"),"article-full"===t&&(t="article"),!!r.contains(["video","image","rich","article","product","social","recommend"],t)&&(t=r.capitalize(t),e=r.capitalize(e),void o.send(t,e,i)))},o.configure=function(t){t&&r.isArray(t)||(t=[]),o.senders=[],r.each(t,function(t){if(r.isString(t)){if(o._integrations.hasOwnProperty(t)){var e=o._integrations[t];o.senders.push(new e)}}else if(r.isFunction(t)){var i=o.Sender.extend({isValid:function(){return!0},send:t});o.senders.push(new i)}})},o.connect=function(t){t.on("media.player",o.player),r.each(o.integrations,function(t){if(o._integrations.hasOwnProperty(t)){var e=o._integrations[t];o.senders.push(new e)}}),(o.hub=t).on("log.event",function(t){if(t&&t.a&&"click"===t.a)if("recommend"===t.c&&t.l){var e=t.l.split("|");3===e.length&&o.event(t.c,t.a,e.slice(1).join(" "))}else o.event(t.c,t.a,t.u)})},e.exports=o},{"./class.js":5,"./utils.js":29}],17:[function(t,e,i){var n=t("./utils.js"),r=function(){this.init()};r.prototype.init=function(){this.len=0,this.count=0,this.results={},this.finished=!1,this.started=!1},r.prototype.callback=function(){var e=this.len;return this.len++,n.bind(function(t){this.each(e,t)},this)},r.prototype.done=function(){if(!this.started)return!1;if(this.finished)return!0;if(this.count===this.len){this.finished=!0;for(var t=[],e=0;e<this.len;e++)t.push(this.results[e]);return this.func.call(this.ctx,t),!0}},r.prototype.each=function(t,e){this.results[t]=e,this.count++,this.done()},r.prototype.wait=function(t,e){this.func=t,this.ctx=e||null,this.started=!0,this.done()},e.exports=r},{"./utils.js":29}],18:[function(t,e,i){var n=t("../utils.js"),r=t("../urlparse.js"),o=t("../browser.js"),s=t("../comms.js"),a={hub:null,timeout:null,connected:!1,connecting:!1,COOKIE_NAME:"em_cdn_uid",sid:n.getUUID(),_queue:[],getUID:function(){var t=o.cookie.get(a.COOKIE_NAME);if(n.isNone(t))return a.setUID();var e,i=r.parseQuery(decodeURIComponent(t));if(!i.u||!i.t)return a.setUID();try{e=parseInt(i.t,10)}catch(t){return a.setUID()}return 32!==i.u.length?a.setUID():15552e6<n.getTimestamp()-e?a.setUID(i.u):i.u},setUID:function(t){var e={u:n.isNone(t)?n.getUUID():t,t:n.getTimestamp()},i=encodeURIComponent(r.createQuery(e));return o.cookie.set(a.COOKIE_NAME,i,365),i=o.cookie.get(a.COOKIE_NAME),n.isNone(i)?0:(e=r.parseQuery(decodeURIComponent(i))).u}};a.uid=a.getUID(),a.release=function(){var t=a._queue;a._queue=[],o.console.log("log.release",t),a.hub.notify("xcomm.log.event",{events:t})},a.queue=function(t){clearTimeout(a.timeout),a._queue.push(t),a.comms()&&(a.timeout=setTimeout(function(){a.release()},50))},a.event=function(t){var e={uid:a.uid,sid:a.sid,t:n.getTimestamp()};window.self===window.top?(e.r=document.location.toString(),e.rr=document.referrer):e.r=document.referrer,n.assert(t.g),n.assert(t.c),n.assert(t.a),e=n.extend({},e,t),a.queue(e)},a.comms=function(){return!!a.connected||!!a.hub&&(!a.connecting&&(a.connecting=!0,a.hub.one("xcomm.ready",function(){a.connected=!0,a.release()}),void s.connect(a.hub,{name:a.name})))},a.connect=function(t,e){a.name=e,t.on("log.event",function(t){a.event(t)}),a.hub=t},e.exports=a},{"../browser.js":4,"../comms.js":6,"../urlparse.js":28,"../utils.js":29}],19:[function(t,e,i){var n=t("./browser.js"),r=t("./utils.js"),o=t("./dom.js"),s={_data:null,COOKIE_NAME:"em_p_uid",format:function(t){return t&&r.isObject(t)?r.map(t,function(t,e){return e+":"+t}).sort().join("|"):null},parse:function(t){return t?r.reduce(t.split("|"),function(t,e){return null===t?null:2!==(i=e.split(":")).length?null:(t[i[0]]=i[1],t)},{}):null;var i},timestamp:function(t){var e;try{e=parseInt(t,10)}catch(t){return!1}return e},get:function(){var t=n.cookie.get(s.COOKIE_NAME);if(r.isNone(t))return s.set();var e=s.parse(t),i=s.timestamp(e.t);return!1===i?s.set():15552e6<r.getTimestamp()-i?s.set({u:e.u,l:e.l}):e},set:function(t){var e={u:r.getUUID(),t:r.getTimestamp(),l:0};t&&(e=r.extend(e,t));var i=s.format(e);return n.cookie.set(s.COOKIE_NAME,i,365,"https:"===window.location.protocol),i=n.cookie.get(s.COOKIE_NAME),r.isNone(i)?null:s.parse(i)},update:function(t){var e=s.get();return!!e&&(e=r.extend(e,t),s.set(e))},data:function(){if(s._data)return s._data;var t={mt:r.getTimestamp(),mr:document.referrer,msw:n.window.innerWidth(),msh:n.window.innerHeight()},e=s.get();return e?(t.muu=e.u,t.mut=e.t,t.mul=e.l):t.muu=0,s._data=t,s.update({l:r.getTimestamp()}),s._data},send:function(t,e){if(!e||!r.isElement(e.elem))return!1;var i=r.extend(s.data(),{}),n=o.rect(e.elem);n&&(i.mft=n.top,i.mfl=n.left,i.mfw=n.width,i.mfh=n.height),e.send(t,i)}};e.exports=s},{"./browser.js":4,"./dom.js":7,"./utils.js":29}],20:[function(t,e,i){var n=t("./dom.js"),r=t("./utils"),o={_event:null,_observer:null,nodeNames:["iframe","a","blockquote"],html:function(){var t=document.getElementsByTagName("html");return 0===t.length?null:t[0]},recurse:function(t){var e=[];return r.isElement(t)&&e.push(t),r.reduce(t.childNodes,function(t,e){return r.isElement(e)?t.concat(o.recurse(e)):t},e)},observer:function(i){var t=o.html();if(null===t)return!1;if(!window.MutationObserver)return!1;o._observer=new window.MutationObserver(function(t){r.each(t,function(t){if("childList"===t.type&&t.addedNodes){var e=Array.prototype.slice.call(t.addedNodes);r.each(e,function(t){r.each(o.recurse(t),function(t){t.nodeName&&r.contains(o.nodeNames,t.nodeName.toLowerCase())&&i.notify("mutation.insert."+t.nodeName.toLowerCase(),t)})})}})});return o._observer.observe(t,{childList:!0,subtree:!0}),!0},events:function(e){var t=o.html();return null!==t&&(o._event=function(t){r.each(o.recurse(t.target),function(t){t.nodeName&&r.contains(o.nodeNames,t.nodeName.toLowerCase())&&e.notify("mutation.insert."+t.nodeName.toLowerCase(),t)})},n.addEvent(t,"DOMNodeInserted",o._event),!0)},stop:function(){var t=o.html();return null!==t&&(o._event&&(n.detachEvent(t,"DOMNodeInserted",o._event),o._event=null),void(o._observer&&(o._observer.disconnect(),o._observer=null)))},connect:function(t){return!o._event&&!o._observer&&void(o.observer(t)||o.events(t))}};e.exports=o},{"./dom.js":7,"./utils":29}],21:[function(t,e,i){var r=t("./utils.js"),o=t("./urlparse.js"),s=t("./comms.js"),a=t("conf"),c={started:!1,connect:function(t,e){var i=o.getDomain(document.location.toString());if(!e&&a.PAGE_PROGRESS_DOMAINS&&!r.contains(a.PAGE_PROGRESS_DOMAINS,i))return!1;if(c.started)return!1;c.started=!0;var n=function(){t.get("xcomm.page.progress",function(){t.notify("xcomm.page.progress.started")})};s.started?n():(s.connect(t,{name:"platform"}),t.one("xcomm.ready",n))}};e.exports=c},{"./comms.js":6,"./urlparse.js":28,"./utils.js":29,conf:"conf"}],22:[function(t,e,i){var s=t("./utils.js"),n=t("./browser.js"),a={CONTEXT:"player.js",VERSION:"0.0.11",bound:function(e,i){return function(t){e.call(i||window,t.value)}},Player:function(t){return this instanceof a.Player?void this.init(t):new a.Player(t)},EVENTS:{READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"}};a.EVENTS.all=function(){return s.map(a.EVENTS,function(t){return t})},a.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},a.METHODS.all=function(){return s.map(a.METHODS,function(t){return t})},a.READIED=[],a.Player.prototype.init=function(t){this.frame=t,this.url=t.url,this.events=a.EVENTS.all(),this.methods=a.METHODS.all()},a.Player.prototype.send=function(t,e,i){return t.context=a.CONTEXT,t.version=a.VERSION,e?(t.listener="l"+s.getUUID(),this.frame.one({event:t.method,listener:t.listener},a.bound(e,i),i)):this.frame.on(t.method,e,i),this.frame.send(t.method,t),!0},a.Player.prototype.on=function(t,e,i){var n=s.getUUID(),r={event:t,listener:n};return"ready"===t?this.frame.one(r,a.bound(e,i),i):this.frame.on(r,a.bound(e,i),i),this.frame.send("addEventListener",{event:"addEventListener",value:t,listener:n,context:a.CONTEXT,version:a.VERSION}),!0},a.Player.prototype.off=function(t){var e=this.frame.__hub.listeners(t);if(n.console.log("Player.off",e),0<e.length)for(var i in e)this.send({method:"removeEventListener",value:t,listener:e[i]}),this.frame.__hub.off([t,e[i]].join("."));return!1},a.Player.prototype.supports=function(t,e){s.assert(-1<s.indexOf(["method","event"],t),'evtOrMethod needs to be either "event" or "method" got '+t),e=s.isArray(e)?e:[e];for(var i="event"===t?this.events:this.methods,n=0;n<e.length;n++)if(-1===a.indexOf(i,e[n]))return!1;return!0},s.each(a.METHODS.all(),function(t){var i;a.Player.prototype.hasOwnProperty(t)||(a.Player.prototype[t]=(i=t,function(){var t={method:i},e=Array.prototype.slice.call(arguments);/^get/.test(i)?(s.assert(0<e.length,"Get methods require a callback."),e.unshift(t)):(/^set/.test(i)&&(s.assert(0!==e.length,"Set methods require a value."),t.value=e[0]),e=[t]),this.send.apply(this,e)}))}),a._all=[],a.get=function(t,e,i){var n,r,o=(n=e,r=i,function(t,e){return(!n||e===n)&&void r.call(window,t,n)});s.each(a._all,function(t){o(t.player,t.elem)}),t.on("media.player",o)},a.add=function(t,e){var i=new a.Player(e);t.notify("media.player",i,e.elem),a._all.push({player:i,elem:e.elem})},a.connect=function(e){e.on("media.player.init",function(t){a.add(e,t)}),e.on("card.player.ready",function(t){a.add(e,t)})},e.exports=a},{"./browser.js":4,"./utils.js":29}],23:[function(t,e,i){var o=t("./utils.js"),s=t("./browser.js"),a=t("./dom.js"),n=function(){this.init()};n.prototype.init=function(){var t=this;document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),t.ready()},!1):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),t.ready())}),document.documentElement.doScroll&&window===window.top&&function(){if(!t.isReady){try{document.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0)}t.ready()}}()),a.addEvent(window,"load",t.ready)},n.prototype.ready=function(){return!this.isReady&&(this.isReady=!1,void(this.callback&&this.callback()))},n.prototype.bind=function(t){this.isReady&&t(),this.callback=t},n.prototype.elem=function(e,t,i){var n=!1,r=function(){!1===n&&(n=!0,t.call(i))};return e.onload=r,a.addEvent(e,"load",r),e.onreadystatechange=function(){var t=e.readyState;("loaded"===t||"complete"===t)&&(e.onreadystatechange=null,r())},r},n.prototype.firstNode=function(){var t=document.getElementsByTagName("head")[0],e=a.child(t,"link");if(e)return e;var i=a.child(t,"style");if(i)return i;var n=a.child(t,"script");return n||null},n.prototype.appendToHead=function(t){var e=this.firstNode();if(null===e){var i=document.getElementsByTagName("head")[0];i?i.appendChild(t):document.body.appendChild(t)}else e.parentNode.insertBefore(t,e)},n.prototype.script=function(t,e,i,n){var r=document.createElement("script");return r.type="text/javascript",r.src=t,o.isNone(n)||o.each(n,function(t,e){r.setAttribute(e,t)}),this.elem(r,e,i),this.appendToHead(r),r},n.prototype.css=function(t,e,i){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t;var r=this.elem(n,e,i);this.appendToHead(n),s.isPhantom()&&r()},e.exports=new n},{"./browser.js":4,"./dom.js":7,"./utils.js":29}],24:[function(t,e,i){var r=t("../urlparse.js"),l=t("../utils.js"),o={enabled:!1,defaults:{},options:{},_queue:{},queue:function(t,e,i){e?e.send(t):o._queue.hasOwnProperty(i)?o._queue[i].push(t):o._queue[i]=[t]},add:function(e,i){var t=r.getQuery(e.elem.src);if(o.enabled){var n={key:t.key,media:t.url,url:document.location.toString()};o.options.hasOwnProperty(e.elem)&&(n=l.extend(n,o.options[e.elem])),n=l.extend(n,o.defaults),e.send("media.recommend",n),e.on("media.recommend.shown",function(t){i.notify("recommend.shown",e.elem,t)}),o._queue.hasOwnProperty(e.elem)&&(l.each(o._queue[e.elem],function(t){e.send(t)}),delete o._queue[e.elem])}},connect:function(n){n.on("media.recommend.options",function(t,e,i){o.enabled=!0,null===t?o.defaults=e:l.isElement(t)&&(o.options[t]=e),l.each(i,function(t){n.notify("media.recommend.add",t)})}),n.on("media.recommend.add",function(t){o.add(t,n)}),n.on("media.recommend.show",function(t,e){o.queue("media.recommend.show",t,e)}),n.on("media.recommend.destroy",function(t,e){o.queue("media.recommend.destroy",t,e)}),n.on("media.recommend.resize",function(t,e){if(!e.height)return!1;var i=t.parentNode,n=window.getComputedStyle(i),r=window.getComputedStyle(t),o=["relative"===n.position,n.paddingBottom===n.height||n.paddingTop===n.height,"absolute"===r.position];if(l.every(o)){var s=parseInt(r.width,10),a=(e.height/s*100).toPrecision(8)+"%",c=parseInt(n.paddingTop,10);parseInt(n.paddingBottom,10)<c?i.style.paddingTop=a:i.style.paddingBottom=a}else t.style.maxHeight="none",t.height=e.height,t.style.height=e.height.toString()+"px"})}};e.exports=o},{"../urlparse.js":28,"../utils.js":29}],25:[function(t,e,i){var s=t("./utils.js"),a=t("./dom.js"),n=t("./ready.js"),c=t("./urlparse.js"),r=t("./log/front.js"),o=t("conf"),l={_css:!1,hub:null,connect:function(t){l.hub=t},log:function(t,e){l.hub.notify("log.event",{u:t,g:"card",a:"click",c:e,l:s.hash(r.sid)})},url:function(t){var e=["e",s.hash(t),s.hash(r.sid)].join(".");return c.addHash(document.URL,e)},buttons:function(e){var i,n=a.create("div",{class:"embdscl0"});return s.each(["facebook","twitter","pinterest","linkedin","card"],function(t){(i=a.create("a",{class:"embd-"+t})).innerHTML="<i></i>",!0===l.buttons[t].call(window,i,e)&&n.appendChild(i)}),n}};l.buttons.twitter=function(e,i){var t=i.options.url,n=i.extract.title,r=i.options.twitter_via,o={url:l.url(t)};return n&&(o.text=s.truncate(n,100)),o.via=r?"@"===r.substr(0,1)?r.substr(1):r:"embedly",e.href="https://twitter.com/intent/tweet?"+c.createQuery(o),a.addEvent(e,"click",function(t){a.event(t).stop(),window.open(e.href,"_blank","width=550,height=410,top=150,left=150"),l.log(i.options.url,"twitter")}),!0},l.buttons.facebook=function(e,i){var t={u:l.url(i.options.url)};return e.href="https://www.facebook.com/sharer/sharer.php?"+c.createQuery(t),a.addEvent(e,"click",function(t){a.event(t).stop(),window.open(e.href,"_blank","width=700,height=425,top=150,left=150"),l.log(i.options.url,"facebook")}),!0},l.buttons.pinterest=function(e,i){var t;if(i.options.image)t=i.options.image;else if(i.extract.media&&"photo"===i.extract.media.type)t=i.extract.media.url;else{if(!(i.extract.images&&0<i.extract.images.length))return!1;t=i.extract.images[0].url}return e.href=c.appendQuery("https://www.pinterest.com/pin/create/button/",{url:l.url(i.options.url),media:t,description:i.extract.title}),a.addEvent(e,"click",function(t){a.event(t).stop(),window.open(e.href,"_blank","width=700,height=425,top=150,left=150"),l.log(i.options.url,"pinterest")}),!0},l.buttons.card=function(t,i){return a.addEvent(t,"click",function(t){a.event(t).stop();var e={url:i.options.url};s.each(["image","embed","title","description","lang"],function(t){i.options.hasOwnProperty(t)&&(e[t]=i.options[t])}),i.__hub.notify("card.repeat",e),l.log(i.options.url,"repeat")}),!0},l.buttons.linkedin=function(e,i){var t={url:l.url(i.options.url),mini:"true"};return e.href="https://www.linkedin.com/shareArticle?"+c.createQuery(t),a.addEvent(e,"click",function(t){a.event(t).stop(),window.open(e.href,"_blank","width=700,height=425,top=150,left=150"),l.log(i.options.url,"linkedin")}),!0},l.buttons.embedly=function(t,e){var i={utm_source:c.getDomain(document.URL),utm_medium:"referral",utm_campaign:"cards"};return t.href=c.appendQuery("http://embed.ly/cards",i),t.target="_blank",a.addEvent(t,"click",function(){l.log(e.options.url,"whats-this")}),!0},l.css=function(t){if(!l._css){l._css=!0;var e=o.EMB_ORIGIN_BASE+"css/social."+o.EMB_ASSET_VERSION+".css";return n.css(e,t),!1}t()},l.card=function(e){var i=e.elem.parentNode;return!(!s.isElement(i)||"DIV"!==i.nodeName&&!a.hasClass(i,"embedly-card"))&&void l.css(function(){var t=l.buttons(e);a.addEvent(i,"mouseenter",function(){a.addClass(t,"embd-active")}),a.addEvent(i,"mouseleave",function(){a.removeClass(t,"embd-active")}),i.appendChild(t),e.__hub.notify("card.share.init")})},e.exports=l},{"./dom.js":7,"./log/front.js":18,"./ready.js":23,"./urlparse.js":28,"./utils.js":29,conf:"conf"}],26:[function(t,e,i){var c=t("./utils.js"),l=t("./urlparse.js"),h=t("conf"),u={};u.youtube={schema:"youtube",re:/youtube\.com\/embed\/([^\/?#]+)/i,url:function(t){var e=u.youtube.re.exec(t);return 2!==e.length?t:"http://www.youtube.com/watch?v="+e[1]}},u.vimeo={schema:"vimeo",re:/player\.vimeo\.com\/video\/([^\/?#]+)/i,url:function(t){var e=u.vimeo.re.exec(t);return 2!==e.length?t:"http://vimeo.com/"+e[1]}},u.soundcloud={schema:"soundcloud",re:/w\.soundcloud\.com\/player\/\?/,url:function(t){var e=l.getQuery(t);if(e.url){var i=/api\.soundcloud\.com\/tracks\/([^\/?#]+)/.exec(e.url);if(2===i.length)return"https://soundcloud.com/track/"+i[1]}return t}},u.providers=[u.youtube,u.vimeo,u.soundcloud],u.provider=function(i){return c.reduce(u.providers,function(t,e){return e.re.test(i)?e:t},null)},u.replace=function(t,e){if(c.isNone(t)||!c.isElement(t))return null;if("IFRAME"!==t.nodeName)return null;if(!t.src||!c.isString(t.src))return null;if(!e.key)return!1;var i=t.src;i=i.replace(/&amp;/g,"&");var n=u.provider(i);if(null===n)return null;var r="https:"===window.location.protocol?"https:":"http:";"file://"===i.substr(0,7)&&(i=i.substr(5)),"//"===i.substr(0,2)&&(i=r+i);var o=c.extend({},e,{url:n.url(i),src:i,schema:n.schema,type:"text/html"}),s=r+"//cdn.embedly.com/widgets/";h.EMB_DEBUG&&(s=h.EMB_FRAME_SRC);var a=s+"media.html?"+l.createQuery(o);return t.src=a,t},e.exports=u},{"./urlparse.js":28,"./utils.js":29,conf:"conf"}],27:[function(t,e,i){var n=t("./utils.js"),r={Tunnel:function(t){this.init(t)}};r.Tunnel.prototype.init=function(t){this.parent=t,this.child=null,this.ready=!1,this.queue=[]},r.Tunnel.prototype.connect=function(t){this.child=t,this.child.on("receiver.send",n.bind(function(t,e){n.isNone(e)&&(e={}),e.method=t,setTimeout(n.bind(function(){this.parent.notify("message",e)},this),1)},this)),this.ready=!0,this.release()},r.Tunnel.prototype.release=function(){for(var t=0;t<this.queue.length;t++)this.send(this.queue[t]);this.queue=[]},r.Tunnel.prototype.send=function(t){return this.ready?void setTimeout(n.bind(function(){this.child.notify(t.method,t)},this),1):(this.queue.push(t),!1)},r.Tunnel.prototype.clear=function(){this.ready=!1,this.parent.clear(),this.child&&this.child.clear()},e.exports=r},{"./utils.js":29}],28:[function(t,e,i){var r=t("./utils.js"),o={createQuery:function(t){var i=[];return t&&r.isObject(t)&&!r.isEmptyObject(t)?(r.each(t,function(t,e){i.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),i.sort(),i.join("&")):""},parseQuery:function(t){var n={};if(!t||!r.isString(t))return n;("#"===t.substr(0,1)||"?"===t.substr(0,1))&&(t=t.substr(1));var e=t.split("&");return r.each(e,function(t){if(!t)return!0;var e=t.split("="),i=decodeURIComponent(e[0]);1===e.length?n[i]="":2===e.length?n[i]=decodeURIComponent(e[1]):n[i]=decodeURIComponent(e.slice(1).join("="))}),n},getQuery:function(t){if(!t||!r.isString(t))return{};var e=t.split("?");return 2===e.length?o.parseQuery(e[1]):2<e.length?o.parseQuery(e.slice(1).join("?")):{}},appendQuery:function(t,e){if(!t||!r.isString(t))return null;var i=t.split("?")[0];if(!e||!r.isObject(e)||r.isEmptyObject(e))return t;var n=o.getQuery(t);return n=r.extend(n,e),r.isEmptyObject(n)?t:[i,o.createQuery(n)].join("?")},removeQuery:function(t,e){if(!t||!r.isString(t))return null;var i=t.split("?")[0],n=o.getQuery(t);return n.hasOwnProperty(e)&&delete n[e],r.isEmptyObject(n)?i:[i,o.createQuery(n)].join("?")},getOrigin:function(t){if(!t||!r.isString(t))return null;if(!/^https?:\/\//.test(t))return null;var e=t.split("/").slice(0,3).join("/");return-1===e.indexOf(".")&&-1===e.indexOf(":")?null:e},getDomain:function(t){var e=o.getOrigin(t);return e?e.replace(/^https?:\/\//,""):null},param:function(t){return r.map(t,function(t,e){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&")},Parsed:function(t,e){this.init(t,e)}};o.Parsed.prototype.init=function(t,e){this.original=t,this.url=e,this._valid=!1,this.url=e},o.Parsed.prototype.valid=function(t){return(!0===t||!1===t)&&(this._valid=t),this._valid},o.parse=function(t){var e=t,i="https:"===window.location.protocol?"https:":"http:";t=t?r.trim(t):t;var n=new o.Parsed(e,t);return t&&(/^https?:\/\/[^\/]+\.[^\/]/i.test(t)?n.valid(!0):/^\w+:/i.test(t)||"#"===t[0]||(/^\/\/[^\/]+\.[^\/]/i.test(t)?(n.valid(!0),n.url=i+t):/^\/([^\/]+|$)/i.test(t)?(n.valid(!0),n.url=o.getOrigin(window.location.toString())+t):/^[^\/]+\.[^\/]/i.test(t)&&(n.valid(!0),n.url="http://"+t))),n},o.addHash=function(t,e){return-1===t.indexOf("#")?t+"#"+e:t+"&"+e},o.sanitize=function(t){return t?(t=t.replace(/#x\d\d;/,"")).replace(/[^-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]/g,""):t},e.exports=o},{"./utils.js":29}],29:[function(t,e,i){var n=t("conf"),a={},s={},r=Array.prototype,c=Object.prototype,o=Function.prototype,l=r.slice,h=c.toString,u=r.forEach,d=r.reduce,f=r.every,p=r.indexOf,g=o.bind;a.identity=function(t){return t},a.each=function(t,e,i){if(null!=t)if(u&&t.forEach===u)t.forEach(e,i);else if(t.length===+t.length){for(var n=0,r=t.length;n<r;n++)if(n in t&&e.call(i,t[n],n,t)===s)return}else for(var o in t)if(c.hasOwnProperty.call(t,o)&&e.call(i,t[o],o,t)===s)return},a.map=function(t,n,r){var o=[];return null==t?o:Array.prototype.map&&t.map===Array.prototype.map?t.map(n,r):(a.each(t,function(t,e,i){o[o.length]=n.call(r,t,e,i)}),o)},a.reduce=function(t,n,r,o){var s=2<arguments.length;if(null==t&&(t=[]),d&&t.reduce===d)return o&&(n=a.bind(n,o)),s?t.reduce(n,r):t.reduce(n);if(a.each(t,function(t,e,i){s?r=n.call(o,r,t,e,i):(r=t,s=!0)}),!s)throw new TypeError("Reduce of empty array with no initial value");return r},a.zip=function(i){return a.map(i[0],function(t,e){return t.map(i,function(t){return t[e]})})},a.extend=function(i){return a.each(Array.prototype.slice.call(arguments,1),function(t){for(var e in t)void 0!==t[e]&&(i[e]=t[e])}),i},a.contains=function(t,e){if(p)return-1<t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return!0;return!1},a.every=function(t,n,r){n||(n=a.identity);var o=!0;return null==t?o:f&&t.every===f?t.every(n,r):(a.each(t,function(t,e,i){return(o=o&&n.call(r,t,e,i))?void 0:s}),!!o)},a.indexOf=function(t,e){if(null==t)return-1;var i=0,n=t.length;if(p&&t.indexOf===p)return t.indexOf(e);for(;i<n;i++)if(t[i]===e)return i;return-1},a.batch=function(t,e){var i=[],n=[];return a.each(t,function(t){n.push(t),n.length===e&&(i.push(n),n=[])}),0!==n.length&&i.push(n),i};var m=function(){};a.bind=function(i,n){var r,o;if(g&&i.bind===g)return g.apply(i,l.call(arguments,1));if(!a.isFunction(i))throw new TypeError;return r=l.call(arguments,2),o=function(){if(!(this instanceof o))return i.apply(n,r.concat(l.call(arguments)));m.prototype=i.prototype;var t=new m;m.prototype=null;var e=i.apply(t,r.concat(l.call(arguments)));return Object(e)===e?e:t}},a.get=function(t,e,i){if(i=a.isNone(i)?null:i,a.isNone(e)||!a.isString(e)||!t)return i;if(""===e)return t;var n=e.split("."),r=n.splice(0,1)[0];return t.hasOwnProperty(r)?a.get(t[r],n.join("."),i):i},a.isFunction=function(t){try{return/^\s*\bfunction\b/.test(t)}catch(t){return!1}},a.isNone=function(t){return null==t},a.isString=function(t){return"[object String]"===h.call(t)},a.isNumber=function(t){return"[object Number]"===h.call(t)},a.isDate=function(t){return"[object Date]"===h.call(t)},a.isObject=function(t){return"[object Object]"===h.call(t)},a.isArray=function(t){return"[object Array]"===h.call(t)},a.isElement=function(t){return!a.isNone(t)&&!a.isNone(t.nodeType)&&1===t.nodeType},a.isEmptyObject=function(t){if(a.isObject(t)){for(var e in t)if(c.hasOwnProperty.call(t,e))return!1;return!0}return!1},a.bool=function(t){return a.isNone(t)?null:"true"===t||"yes"===t||"1"===t||1===t||!0===t||"false"!==t&&"no"!==t&&"0"!==t&&0!==t&&!1!==t&&null},a.assert=function(t,e){if(!t)throw e||"Assertion Failed"},a.getUUID=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},a.getTimestamp=function(){return(new Date).getTime()},a.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},a.spaceless=function(t){return t.replace(/\s+/g,"")},a.capitalize=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},a.camelCase=function(t,e){var i=t.split("-");return e=e||i.length,1<i.length&&(t=i.splice(0,1)[0],t+=a.map(i.splice(0,e),function(t){return t[0].toUpperCase()+t.substr(1)}).join(""),0<i.length&&(t+="-"+i.join("-"))),t},a.truncate=function(t,e){return t?(e=e||50,t.length<e?t:(t=t.substr(0,e-3),a.trim(t)+"...")):""},a.fmt=function(t,i){return t.replace(/{(\w+)}/g,function(t,e){return i[e]?i[e]:""})},a.fullHash=function(t){var e,i,n=0;if(0===t.length)return n;for(e=0,i=t.length;e<i;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return Math.abs(n).toString(32)},a.hash=function(t){var e="0000000"+a.fullHash(t);return e.substr(e.length-6)},a.rgbToHex=function(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},!0===n.EMB_DEBUG&&(window._=a),e.exports=a},{conf:"conf"}],30:[function(t,e,i){var n=t("./utils.js"),r=t("./dom.js"),o=t("./browser.js"),s=function(){this.init()};s.prototype.init=function(){this._elements=[],this._listening=!1},s.prototype.viewable=function(t){if(!t.getBoundingClientRect)return!0;var e;try{e=t.getBoundingClientRect()}catch(t){return!1}return 0<=e.bottom&&0<=e.right&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)},s.prototype.check=function(){this.freeze=!0;var i=[];n.each(this._elements,n.bind(function(t,e){if(this.viewable(t.elem)){try{t.func.call(this)}catch(t){o.console.log(t)}i.push(e)}},this)),n.each(i,function(t){this._elements.splice(t,1)},this),0===this._elements.length&&this.stop(),this.freeze=!1},s.prototype.stop=function(){try{r.detachEvent(window,"DOMContentLoaded",this.handler),r.detachEvent(window,"load",this.handler),r.detachEvent(window,"resize",this.handler),r.detachEvent(window,"scroll",this.handler)}catch(t){}this.handler=null,this._listening=!1},s.prototype.listen=function(){return!this._listening&&(this._listening=!0,this.handler=n.bind(function(){!this.freeze&&this._elements.length&&this.check()},this),r.addEvent(window,"DOMContentLoaded",this.handler),r.addEvent(window,"load",this.handler),r.addEvent(window,"resize",this.handler),void r.addEvent(window,"scroll",this.handler))},s.prototype.on=function(t,e,i){"viewable"===t&&(this._elements.push({elem:e,func:i}),this.listen(),this.check())},e.exports=s},{"./browser.js":4,"./dom.js":7,"./utils.js":29}],31:[function(t,e,i){if(window.embedly&&window.embedly.look)return window.embedly.look(),!1;var o=t("./common/iframes/all.js"),n=t("./common/browser.js"),s=t("./common/utils.js"),r=t("./common/a.js"),a=t("./common/dom.js"),c=t("./common/ready.js"),l=t("./common/meta.js"),h=t("./common/viewport.js"),u=t("./common/page.js"),d=t("./common/urlparse.js"),f=t("./common/found.js"),p=t("./common/share.js"),g=t("./common/log/front.js"),m=t("./common/recommend/front.js"),v=t("./common/players.js"),y=t("./common/integrate.js"),_=t("./common/blacklist.js"),b=new r,w=new h;m.connect(b),p.connect(b),v.connect(b),y.connect(b),g.connect(b,"platform");var x,C={analytics:null,recommend:!1,shared:(x=/emb_(\d+)/.exec(n.location.hash()),x?x[1]:null),defaults:{cards:{}}},S={media:[]},k=function(t){var e;try{e=JSON.parse(t.data)}catch(t){return n.console.error(t),!1}b.notify("window.message",t,e)};a.addEvent(window,"message",k);var T=function(t,e,i){var n;if(s.isFunction(e)&&(i=e,e={}),s.isString(t)||!s.isElement(t)&&s.isObject(t))return f.add.cards(t),!0;if(s.isElement(t)&&("a"===t.nodeName.toLowerCase()||"blockquote"===t.nodeName.toLowerCase())){var r=s.extend({},C.defaults.cards,e);n=o.cards.one(t,r,b,function(t){s.isFunction(i)&&i.call(t,t)})}return n},K=function(t){var e;return s.isString(t)?(f.add.button(t),!0):(s.isElement(t)&&"a"===t.nodeName.toLowerCase()&&(e=o.button.one(t,b)),e&&e.on("button.rendered",function(){b.notify("button.rendered",e.elem,e)}),e)},P=function(t,e){var i;i=s.isString(t)?{url:t}:t;var n=o.modal.one(i,b);return s.isFunction(e)&&e.call(n,n),n},A=function(t,e,i){var n=o.slideshow.one(t,e,b);return s.isFunction(i)&&i.call(n,n),n},M=function(t){return s.isString(t)&&"reset"===t?!(C.defaults.cards={}):!!s.isObject(t)&&(t.hasOwnProperty("cards")&&s.isObject(t.cards)&&(C.defaults.cards=s.extend({},C.defaults.cards,t.cards)),t.hasOwnProperty("recommend")&&(b.notify("media.recommend.options",null,t.recommend,S.media),s.each(S.media,function(t){b.notify("media.recommend.add",t)})),void(t.hasOwnProperty("integrations")&&y.configure(t.integrations)))};b.on("found",function(t){t.cards&&t.cards.length&&o.cards.multi(t.cards,C.defaults.cards,b),t.buttons&&t.buttons.length&&s.each(t.buttons,function(t){K(t)}),t.slideshows&&t.slideshows.length&&s.each(t.slideshows,function(t){A(t)}),t.iframes&&t.iframes.length&&s.each(t.iframes,function(t){!function(e){if("1"===a.data(e,"connected"))return;a.data(e,"connected","1");var i=o.connect(null,e,b);i.one("media.ready",function(t){i.url=t.url,i.ready(),w.on("viewable",i.elem,function(){i.send("media.view")}),b.notify("media.recommend.add",i),S.media.push(i),t.controllable&&b.notify("media.player.init",i),b.notify("media.ready",i)}),i.on("media.recommend.resize",function(t){b.notify("media.recommend.resize",e,t)}),i.on("iframe.resize",function(t){t.height&&(i.elem.height=t.height),b.notify("media.resize",i)}),i.send("media.ready",{},!0)}(t)})}),b.on("modal.create",function(t){P(t)}),b.on("media.ready",function(t){l.send("media.meta",t)}),b.on("card.rendered",function(t,e){l.send("card.meta",e),w.on("viewable",t,s.bind(function(){this.send("card.view")},e))}),b.on("card.rendered",function(t,e){return!!C.shared&&(!(!e.query||!e.query.url)&&(s.hash(e.query.url)===C.shared&&(C.shared=null,void setTimeout(function(){var t=a.rect(e.elem);return!(!t||!t.top)&&void n.animateScroll(t.top-5,500)},500))))});var E=!1;b.on("pinterest.log",function(){if(E)return!1;E=!0;var t={type:"pidget",partner:"embedly",via:document.URL,callback:s.getUUID()};c.script("https://log.pinterest.com/?"+d.createQuery(t),function(){a.remove(a.one("#pinLog"))},this,{id:"pinLog"})});var $=function(){var t=Array.prototype.slice.call(arguments,0);if(0===t.length)return null;switch(t.splice(0,1)[0]){case"card":return T.apply(window,t);case"button":return K.apply(window,t);case"modal":return P.apply(window,t);case"slideshow":return A.apply(window,t);case"look":return f.look.apply(window,t);case"on":return function(t,e){b.on(t,e)}.apply(window,t);case"off":return function(t,e){b.off(t,e)}.apply(window,t);case"kill":return function(){a.detachEvent(window,"message",k),f.stop(),b.clear(),a.remove(a.one("#emb_xcomm")),window.embedly=null}.apply(window,t);case"analytics":return function(t){return!(!t||!t.key)&&(f.analytics=t,void f.look())}.apply(window,t);case"player":return function(t,e){s.isFunction(t)&&(e=t,t=null),v.get(b,t,e)}.apply(window,t);case"recommend":return function(e,i){if(!s.isElement(e))return!1;if(s.isString(i)){var n=!1;s.each(S.media,function(t){t.elem===e&&(n=!0,b.notify("media.recommend."+i,t,t.elem))}),n||b.notify("media.recommend."+i,null,e)}else s.isObject(i)&&b.notify("media.recommend.options",e,i,S.media);f.look()}.apply(window,t);case"defaults":return M.apply(window,t)}return null};_.allowed(window.location.toString())?function(){var t=[];window.embedly&&s.isFunction(window.embedly)&&s.isArray(window.embedly.q)&&(t=window.embedly.q),window.embedly=function(){return $.apply(window,arguments)},window.embedly.card=function(){return T.apply(window,arguments)},window.embedly.button=function(){return K.apply(window,arguments)},window.embedly.modal=function(){return P.apply(window,arguments)},window.embedly.slideshow=function(){return A.apply(window,arguments)},window.embedly.look=function(){return f.look()},window.embedly.defaults=function(){return M.apply(window,arguments)},s.each(t,function(t){window.embedly.apply(window,t)}),u.connect(b),f.connect(b),c.bind(f.look),s.isFunction(window.onEmbedlyReady)&&window.onEmbedlyReady.apply(this,[window.embedly])}():(window.embedly=function(){},s.each(["card","button","modal","slideshow","look","defaults"],function(t){window.embedly[t]=function(){}}))},{"./common/a.js":1,"./common/blacklist.js":3,"./common/browser.js":4,"./common/dom.js":7,"./common/found.js":8,"./common/iframes/all.js":9,"./common/integrate.js":16,"./common/log/front.js":18,"./common/meta.js":19,"./common/page.js":21,"./common/players.js":22,"./common/ready.js":23,"./common/recommend/front.js":24,"./common/share.js":25,"./common/urlparse.js":28,"./common/utils.js":29,"./common/viewport.js":30}],conf:[function(t,e,i){!function(t){t.EMB_DEBUG=!1,t.EMB_HTTPS="http:"!==window.location.protocol,t.EMB_ORIGIN=(t.EMB_HTTPS?"https":"http")+"://cdn.embedly.com",t.EMB_ORIGIN_BASE=t.EMB_ORIGIN+"/",t.EMB_ASSET_VERSION="96a3975a",t.EMB_FRAME_SRC=t.EMB_ORIGIN+"/widgets/",t.EMB_SECURE_FRAME_SRC="https://cdn.embedly.com/widgets/",t.EMB_POST_MESSAGE=!!window.postMessage,t.EMB_PROGRESS=!0,t.EMB_APP_API="https://app.embed.ly",t.EMB_API_KEY="fd92ebbc52fc43fb98f69e50e7893c13";var e=window.location.pathname.split(".")[0].split("/");t.EMB_GROUP=e[e.length-1].toLowerCase(),t.PAGE_PROGRESS_DOMAINS=[]}(void 0===e?this.conf={}:e.exports)},{}]},{},[31])}(),function(t,e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&module.exports?module.exports=e():t.lscache=e()}(this,function(){var e,t,r="lscache-",o="-cacheexpiration",i=6e4,s=b(i),a="",n=!1;function c(){var t="__lscachetest__";if(void 0!==e)return e;try{if(!localStorage)return!1}catch(t){return!1}try{p(t,"__lscachetest__"),g(t),e=!0}catch(t){e=!(!l(t)||!localStorage.length)}return e}function l(t){return t&&("QUOTA_EXCEEDED_ERR"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name||"QuotaExceededError"===t.name)}function h(){return void 0===t&&(t=null!=window.JSON),t}function u(t){return t+o}function d(){return Math.floor((new Date).getTime()/i)}function f(t){return localStorage.getItem(r+a+t)}function p(t,e){localStorage.removeItem(r+a+t),localStorage.setItem(r+a+t,e)}function g(t){localStorage.removeItem(r+a+t)}function m(t){for(var e=new RegExp("^"+r+a.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")+"(.*)"),i=localStorage.length-1;0<=i;--i){var n=localStorage.key(i);(n=(n=n&&n.match(e))&&n[1])&&n.indexOf(o)<0&&t(n,u(n))}}function v(t){var e=u(t);g(t),g(e)}function y(t){var e=u(t),i=f(e);if(i){var n=parseInt(i,10);if(d()>=n)return g(t),g(e),!0}}function _(t,e){n&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+t),e&&window.console.warn("lscache - The error was: "+e.message))}function b(t){return Math.floor(864e13/t)}return{set:function(e,i,t){if(!c())return!1;if(!h())return!1;try{i=JSON.stringify(i)}catch(t){return!1}try{p(e,i)}catch(t){if(!l(t))return _("Could not add item with key '"+e+"'",t),!1;var n,r=[];m(function(t,e){var i=f(e);i=i?parseInt(i,10):s,r.push({key:t,size:(f(t)||"").length,expiration:i})}),r.sort(function(t,e){return e.expiration-t.expiration});for(var o=(i||"").length;r.length&&0<o;)n=r.pop(),_("Cache is full, removing item with key '"+e+"'"),v(n.key),o-=n.size;try{p(e,i)}catch(t){return _("Could not add item with key '"+e+"', perhaps it's too big?",t),!1}}return t?p(u(e),(d()+t).toString(10)):g(u(e)),!0},get:function(t){if(!c())return null;if(y(t))return null;var e=f(t);if(!e||!h())return e;try{return JSON.parse(e)}catch(t){return e}},remove:function(t){c()&&v(t)},supported:function(){return c()},flush:function(){c()&&m(function(t){v(t)})},flushExpired:function(){c()&&m(function(t){y(t)})},setBucket:function(t){a=t},resetBucket:function(){a=""},getExpiryMilliseconds:function(){return i},setExpiryMilliseconds:function(t){s=b(i=t)},enableWarnings:function(t){n=t}}}),function(t,e){var i=function(n,f,o){"use strict";var p,g;if(function(){var t,e={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in g=n.lazySizesConfig||n.lazysizesConfig||{},e)t in g||(g[t]=e[t])}(),!f||!f.getElementsByClassName)return{init:function(){},cfg:g,noSupport:!0};var m=f.documentElement,r=n.HTMLPictureElement,s="addEventListener",v="getAttribute",e=n[s].bind(n),u=n.setTimeout,i=n.requestAnimationFrame||u,a=n.requestIdleCallback,d=/^picture$/i,c=["load","error","lazyincluded","_lazyloaded"],l={},y=Array.prototype.forEach,h=function(t,e){return l[e]||(l[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),l[e].test(t[v]("class")||"")&&l[e]},_=function(t,e){h(t,e)||t.setAttribute("class",(t[v]("class")||"").trim()+" "+e)},b=function(t,e){var i;(i=h(t,e))&&t.setAttribute("class",(t[v]("class")||"").replace(i," "))},w=function t(e,i,n){var r=n?s:"removeEventListener";n&&t(e,i),c.forEach(function(t){e[r](t,i)})},x=function(t,e,i,n,r){var o=f.createEvent("Event");return i||(i={}),i.instance=p,o.initEvent(e,!n,!r),o.detail=i,t.dispatchEvent(o),o},C=function(t,e){var i;!r&&(i=n.picturefill||g.pf)?(e&&e.src&&!t[v]("srcset")&&t.setAttribute("srcset",e.src),i({reevaluate:!0,elements:[t]})):e&&e.src&&(t.src=e.src)},S=function(t,e){return(getComputedStyle(t,null)||{})[e]},k=function(t,e,i){for(i=i||t.offsetWidth;i<g.minSize&&e&&!t._lazysizesWidth;)i=e.offsetWidth,e=e.parentNode;return i},T=(xt=[],Ct=[],St=xt,kt=function(){var t=St;for(St=xt.length?Ct:xt,wt=!(bt=!0);t.length;)t.shift()();bt=!1},Tt=function(t,e){bt&&!e?t.apply(this,arguments):(St.push(t),wt||(wt=!0,(f.hidden?u:i)(kt)))},Tt._lsFlush=kt,Tt),t=function(i,t){return t?function(){T(i)}:function(){var t=this,e=arguments;T(function(){i.apply(t,e)})}},K=function(t){var e,i,n=function(){e=null,t()},r=function t(){var e=o.now()-i;e<99?u(t,99-e):(a||n)(n)};return function(){i=o.now(),e||(e=u(r,99))}},P=(tt=/^img$/i,et=/^iframe$/i,it="onscroll"in n&&!/(gle|ing)bot/.test(navigator.userAgent),nt=0,rt=0,ot=-1,st=function(t){rt--,(!t||rt<0||!t.target)&&(rt=0)},at=function(t){return null==U&&(U="hidden"==S(f.body,"visibility")),U||!("hidden"==S(t.parentNode,"visibility")&&"hidden"==S(t,"visibility"))},ct=function(t,e){var i,n=t,r=at(t);for(B-=e,G+=e,H-=e,W+=e;r&&(n=n.offsetParent)&&n!=f.body&&n!=m;)(r=0<(S(n,"opacity")||1))&&"visible"!=S(n,"overflow")&&(i=n.getBoundingClientRect(),r=W>i.left&&H<i.right&&G>i.top-1&&B<i.bottom+1);return r},lt=function(){var t,e,i,n,r,o,s,a,c,l,h,u,d=p.elements;if((N=g.loadMode)&&rt<8&&(t=d.length)){for(e=0,ot++;e<t;e++)if(d[e]&&!d[e]._lazyRace)if(!it||p.prematureUnveil&&p.prematureUnveil(d[e]))mt(d[e]);else if((a=d[e][v]("data-expand"))&&(o=1*a)||(o=nt),l||(l=!g.expand||g.expand<1?500<m.clientHeight&&500<m.clientWidth?500:370:g.expand,p._defEx=l,h=l*g.expFactor,u=g.hFac,U=null,nt<h&&rt<1&&2<ot&&2<N&&!f.hidden?(nt=h,ot=0):nt=1<N&&1<ot&&rt<6?l:0),c!==o&&(R=innerWidth+o*u,z=innerHeight+o,s=-1*o,c=o),i=d[e].getBoundingClientRect(),(G=i.bottom)>=s&&(B=i.top)<=z&&(W=i.right)>=s*u&&(H=i.left)<=R&&(G||W||H||B)&&(g.loadHidden||at(d[e]))&&(F&&rt<3&&!a&&(N<3||ot<4)||ct(d[e],o))){if(mt(d[e]),r=!0,9<rt)break}else!r&&F&&!n&&rt<4&&ot<4&&2<N&&(D[0]||g.preloadAfterLoad)&&(D[0]||!a&&(G||W||H||B||"auto"!=d[e][v](g.sizesAttr)))&&(n=D[0]||d[e]);n&&!r&&mt(n)}},q=lt,Y=0,X=g.throttleDelay,Q=g.ricTimeout,Z=function(){V=!1,Y=o.now(),q()},J=a&&49<Q?function(){a(Z,{timeout:Q}),Q!==g.ricTimeout&&(Q=g.ricTimeout)}:t(function(){u(Z)},!0),ht=function(t){var e;(t=!0===t)&&(Q=33),V||(V=!0,(e=X-(o.now()-Y))<0&&(e=0),t||e<9?J():u(J,e))},ut=function(t){var e=t.target;e._lazyCache?delete e._lazyCache:(st(t),_(e,g.loadedClass),b(e,g.loadingClass),w(e,ft),x(e,"lazyloaded"))},dt=t(ut),ft=function(t){dt({target:t.target})},pt=function(t){var e,i=t[v](g.srcsetAttr);(e=g.customMedia[t[v]("data-media")||t[v]("media")])&&t.setAttribute("media",e),i&&t.setAttribute("srcset",i)},gt=t(function(e,t,i,n,r){var o,s,a,c,l,h;(l=x(e,"lazybeforeunveil",t)).defaultPrevented||(n&&(i?_(e,g.autosizesClass):e.setAttribute("sizes",n)),s=e[v](g.srcsetAttr),o=e[v](g.srcAttr),r&&(a=e.parentNode,c=a&&d.test(a.nodeName||"")),h=t.firesLoad||"src"in e&&(s||o||c),l={target:e},_(e,g.loadingClass),h&&(clearTimeout(j),j=u(st,2500),w(e,ft,!0)),c&&y.call(a.getElementsByTagName("source"),pt),s?e.setAttribute("srcset",s):o&&!c&&(et.test(e.nodeName)?function(e,i){try{e.contentWindow.location.replace(i)}catch(t){e.src=i}}(e,o):e.src=o),r&&(s||c)&&C(e,{src:o})),e._lazyRace&&delete e._lazyRace,b(e,g.lazyClass),T(function(){var t=e.complete&&1<e.naturalWidth;h&&!t||(t&&_(e,"ls-is-cached"),ut(l),e._lazyCache=!0,u(function(){"_lazyCache"in e&&delete e._lazyCache},9)),"lazy"==e.loading&&rt--},!0)}),mt=function(t){if(!t._lazyRace){var e,i=tt.test(t.nodeName),n=i&&(t[v](g.sizesAttr)||t[v]("sizes")),r="auto"==n;(!r&&F||!i||!t[v]("src")&&!t.srcset||t.complete||h(t,g.errorClass)||!h(t,g.lazyClass))&&(e=x(t,"lazyunveilread").detail,r&&A.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,rt++,gt(t,e,r,n,i))}},vt=K(function(){g.loadMode=3,ht()}),yt=function(){3==g.loadMode&&(g.loadMode=2),vt()},_t=function t(){if(!F){if(o.now()-L<999)return void u(t,999);F=!0,g.loadMode=3,ht(),e("scroll",yt,!0)}},{_:function(){L=o.now(),p.elements=f.getElementsByClassName(g.lazyClass),D=f.getElementsByClassName(g.lazyClass+" "+g.preloadClass),e("scroll",ht,!0),e("resize",ht,!0),e("pageshow",function(t){if(t.persisted){var e=f.querySelectorAll("."+g.loadingClass);e.length&&e.forEach&&i(function(){e.forEach(function(t){t.complete&&mt(t)})})}}),n.MutationObserver?new MutationObserver(ht).observe(m,{childList:!0,subtree:!0,attributes:!0}):(m[s]("DOMNodeInserted",ht,!0),m[s]("DOMAttrModified",ht,!0),setInterval(ht,999)),e("hashchange",ht,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(t){f[s](t,ht,!0)}),/d$|^c/.test(f.readyState)?_t():(e("load",_t),f[s]("DOMContentLoaded",ht),u(_t,2e4)),p.elements.length?(lt(),T._lsFlush()):ht()},checkElems:ht,unveil:mt,_aLSL:yt}),A=($=t(function(t,e,i,n){var r,o,s;if(t._lazysizesWidth=n,n+="px",t.setAttribute("sizes",n),d.test(e.nodeName||""))for(r=e.getElementsByTagName("source"),o=0,s=r.length;o<s;o++)r[o].setAttribute("sizes",n);i.detail.dataAttr||C(t,i.detail)}),O=function(t,e,i){var n,r=t.parentNode;r&&(i=k(t,r,i),(n=x(t,"lazybeforesizes",{width:i,dataAttr:!!e})).defaultPrevented||(i=n.detail.width)&&i!==t._lazysizesWidth&&$(t,r,n,i))},I=K(function(){var t,e=E.length;if(e)for(t=0;t<e;t++)O(E[t])}),{_:function(){E=f.getElementsByClassName(g.autosizesClass),e("resize",I)},checkElems:I,updateElem:O}),M=function t(){!t.i&&f.getElementsByClassName&&(t.i=!0,A._(),P._())};var E,$,O,I;var D,F,j,N,L,R,z,B,H,W,G,U,q,V,Y,X,Q,Z,J,tt,et,it,nt,rt,ot,st,at,ct,lt,ht,ut,dt,ft,pt,gt,mt,vt,yt,_t;var bt,wt,xt,Ct,St,kt,Tt;return u(function(){g.init&&M()}),p={cfg:g,autoSizer:A,loader:P,init:M,uP:C,aC:_,rC:b,hC:h,fire:x,gW:k,rAF:T}}(t,t.document,Date);t.lazySizes=i,"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=i)}("undefined"!=typeof window?window:{}),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dayjs=e()}(this,function(){"use strict";var c="millisecond",f="second",p="minute",g="hour",m="day",v="week",y="month",_="year",r=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,b=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,o=function(t,e,i){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(i)+t},t={s:o,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),n=Math.floor(i/60),r=i%60;return(e<=0?"+":"-")+o(n,2,"0")+":"+o(r,2,"0")},m:function(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,y),r=e-n<0,o=t.clone().add(i+(r?-1:1),y);return Number(-(i+(e-n)/(r?n-o:o-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:y,y:_,w:v,d:m,h:g,m:p,s:f,ms:c,Q:"quarter"}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},s="en",a={};a[s]=e;var l=function(t){return t instanceof u},n=function(t,e,i){var n;if(!t)return s;if("string"==typeof t)a[t]&&(n=t),e&&(a[t]=e,n=t);else{var r=t.name;a[r]=t,n=r}return i||(s=n),n},h=function(t,e,i){if(l(t))return t.clone();var n=e?"string"==typeof e?{format:e,pl:i}:e:{};return n.date=t,new u(n)},w=t;w.l=n,w.i=l,w.w=function(t,e){return h(t,{locale:e.$L,utc:e.$u})};var u=function(){function t(t){this.$L=this.$L||n(t.locale,null,!0),this.parse(t)}var e=t.prototype;return e.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(w.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(r);if(n)return i?new Date(Date.UTC(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)):new Date(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)}return new Date(e)}(t),this.init()},e.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},e.$utils=function(){return w},e.isValid=function(){return!("Invalid Date"===this.$d.toString())},e.isSame=function(t,e){var i=h(t);return this.startOf(e)<=i&&i<=this.endOf(e)},e.isAfter=function(t,e){return h(t)<this.startOf(e)},e.isBefore=function(t,e){return this.endOf(e)<h(t)},e.$g=function(t,e,i){return w.u(t)?this[e]:this.set(i,t)},e.year=function(t){return this.$g(t,"$y",_)},e.month=function(t){return this.$g(t,"$M",y)},e.day=function(t){return this.$g(t,"$W",m)},e.date=function(t){return this.$g(t,"$D","date")},e.hour=function(t){return this.$g(t,"$H",g)},e.minute=function(t){return this.$g(t,"$m",p)},e.second=function(t){return this.$g(t,"$s",f)},e.millisecond=function(t){return this.$g(t,"$ms",c)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,e){var n=this,r=!!w.u(e)||e,i=w.p(t),o=function(t,e){var i=w.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(m)},s=function(t,e){return w.w(n.toDate()[t].apply(n.toDate(),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},a=this.$W,c=this.$M,l=this.$D,h="set"+(this.$u?"UTC":"");switch(i){case _:return r?o(1,0):o(31,11);case y:return r?o(1,c):o(0,c+1);case v:var u=this.$locale().weekStart||0,d=(a<u?a+7:a)-u;return o(r?l-d:l+(6-d),c);case m:case"date":return s(h+"Hours",0);case g:return s(h+"Minutes",1);case p:return s(h+"Seconds",2);case f:return s(h+"Milliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,e){var i,n=w.p(t),r="set"+(this.$u?"UTC":""),o=(i={},i.day=r+"Date",i.date=r+"Date",i[y]=r+"Month",i.year=r+"FullYear",i.hour=r+"Hours",i[p]=r+"Minutes",i[f]=r+"Seconds",i[c]=r+"Milliseconds",i)[n],s=n===m?this.$D+(e-this.$W):e;if(n===y||n===_){var a=this.clone().set("date",1);a.$d[o](s),a.init(),this.$d=a.set("date",Math.min(this.$D,a.daysInMonth())).toDate()}else o&&this.$d[o](s);return this.init(),this},e.set=function(t,e){return this.clone().$set(t,e)},e.get=function(t){return this[w.p(t)]()},e.add=function(i,t){var e,n=this;i=Number(i);var r=w.p(t),o=function(t){var e=h(n);return w.w(e.date(e.date()+Math.round(t*i)),n)};if(r===y)return this.set(y,this.$M+i);if(r===_)return this.set(_,this.$y+i);if(r===m)return o(1);if(r===v)return o(7);var s=(e={},e[p]=6e4,e.hour=36e5,e[f]=1e3,e)[r]||1,a=this.valueOf()+i*s;return w.w(a,this)},e.subtract=function(t,e){return this.add(-1*t,e)},e.format=function(t){var r=this;if(!this.isValid())return"Invalid Date";var o=t||"YYYY-MM-DDTHH:mm:ssZ",i=w.z(this),e=this.$locale(),n=this.$H,s=this.$m,a=this.$M,c=e.weekdays,l=e.months,h=function(t,e,i,n){return t&&(t[e]||t(r,o))||i[e].substr(0,n)},u=function(t){return w.s(n%12||12,t,"0")},d=e.meridiem||function(t,e,i){var n=t<12?"AM":"PM";return i?n.toLowerCase():n},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:w.s(a+1,2,"0"),MMM:h(e.monthsShort,a,l,3),MMMM:l[a]||l(this,o),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:h(e.weekdaysMin,this.$W,c,2),ddd:h(e.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(n),HH:w.s(n,2,"0"),h:u(1),hh:u(2),a:d(n,s,!0),A:d(n,s,!1),m:String(s),mm:w.s(s,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:i};return o.replace(b,function(t,e){return e||f[t]||i.replace(":","")})},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(t,e,i){var n,r=w.p(e),o=h(t),s=6e4*(o.utcOffset()-this.utcOffset()),a=this-o,c=w.m(this,o);return c=(n={},n.year=c/12,n[y]=c,n.quarter=c/3,n.week=(a-s)/6048e5,n.day=(a-s)/864e5,n.hour=a/36e5,n[p]=a/6e4,n[f]=a/1e3,n)[r]||a,i?c:w.a(c)},e.daysInMonth=function(){return this.endOf(y).$D},e.$locale=function(){return a[this.$L]},e.locale=function(t,e){if(!t)return this.$L;var i=this.clone();return i.$L=n(t,e,!0),i},e.clone=function(){return w.w(this.toDate(),this)},e.toDate=function(){return new Date(this.$d)},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},t}();return h.prototype=u.prototype,h.extend=function(t,e){return t(e,u,h),h},h.locale=n,h.isDayjs=l,h.unix=function(t){return h(1e3*t)},h.en=a[s],h.Ls=a,h}),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(require("jquery")):t.Tipped=e(jQuery)}(this,function($){function degrees(t){return 180*t/Math.PI}function radian(t){return t*Math.PI/180}function sec(t){return 1/Math.cos(t)}function sfcc(t){return String.fromCharCode.apply(String,t.replace(" ","").split(","))}function deepExtend(t,e){for(var i in e)e[i]&&e[i].constructor&&e[i].constructor===Object?(t[i]=$.extend({},t[i])||{},deepExtend(t[i],e[i])):t[i]=e[i];return t}function Spin(){return this.initialize.apply(this,_slice.call(arguments))}function Visible(){return this.initialize.apply(this,_slice.call(arguments))}function Skin(){this.initialize.apply(this,_slice.call(arguments))}function Stem(){this.initialize.apply(this,_slice.call(arguments))}function Tooltip(){this.initialize.apply(this,_slice.call(arguments))}function Collection(){this.initialize.apply(this,_slice.call(arguments))}var Tipped={};$.extend(Tipped,{version:"4.6.1"}),Tipped.Skins={base:{afterUpdate:!1,ajax:{},cache:!0,container:!1,containment:{selector:"viewport",padding:5},close:!1,detach:!0,fadeIn:200,fadeOut:200,showDelay:75,hideDelay:25,hideAfter:!1,hideOn:{element:"mouseleave"},hideOthers:!1,position:"top",inline:!1,offset:{x:0,y:0},onHide:!1,onShow:!1,padding:!0,radius:!0,shadow:!0,showOn:{element:"mousemove"},size:"medium",spinner:!0,stem:!0,target:"element",voila:!0},reset:{ajax:!1,hideOn:{element:"mouseleave",tooltip:"mouseleave"},showOn:{element:"mouseenter",tooltip:"mouseenter"}}},$.each("dark light gray red green blue lightyellow lightblue lightpink".split(" "),function(t,e){Tipped.Skins[e]={}});var Browser=function(i){function t(t){var e=new RegExp(t+"([\\d.]+)").exec(i);return!e||parseFloat(e[1])}return{IE:!(!window.attachEvent||-1!==i.indexOf("Opera"))&&t("MSIE "),Opera:-1<i.indexOf("Opera")&&(!!window.opera&&opera.version&&parseFloat(opera.version())||7.55),WebKit:-1<i.indexOf("AppleWebKit/")&&t("AppleWebKit/"),Gecko:-1<i.indexOf("Gecko")&&-1===i.indexOf("KHTML")&&t("rv:"),MobileSafari:!!i.match(/Apple.*Mobile.*Safari/),Chrome:-1<i.indexOf("Chrome")&&t("Chrome/"),ChromeMobile:-1<i.indexOf("CrMo")&&t("CrMo/"),Android:-1<i.indexOf("Android")&&t("Android "),IEMobile:-1<i.indexOf("IEMobile")&&t("IEMobile/")}}(navigator.userAgent),Support=function(){function e(t,e){var i=t.charAt(0).toUpperCase()+t.substr(1);return function(t,e){for(var i in t)if(void 0!==n.style[t[i]])return"prefix"!=e||t[i];return!1}((t+" "+r.join(i+" ")+i).split(" "),e)}var n=document.createElement("div"),r="Webkit Moz O ms Khtml".split(" ");return{css:{animation:e("animation"),transform:e("transform"),prefixed:function(t){return e(t,"prefix")}},shadow:e("boxShadow")&&e("pointerEvents"),touch:function(){try{return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}catch(t){return!1}}()}}(),_slice=Array.prototype.slice,_={wrap:function(t,e){var i=t;return function(){var t=[$.proxy(i,this)].concat(_slice.call(arguments));return e.apply(this,t)}},isElement:function(t){return t&&1==t.nodeType},isText:function(t){return t&&3==t.nodeType},isDocumentFragment:function(t){return t&&11==t.nodeType},delay:function(t,e){var i=_slice.call(arguments,2);return setTimeout(function(){return t.apply(t,i)},e)},defer:function(t){return _.delay.apply(this,[t,1].concat(_slice.call(arguments,1)))},pointer:function(t){return{x:t.pageX,y:t.pageY}},element:{isAttached:function(t){var e=function(t){for(var e=t;e&&e.parentNode;)e=e.parentNode;return e}(t);return!(!e||!e.body)}}},getUID=(xOa=0,function(t){for(t=t||"_tipped-uid-",xOa++;document.getElementById(t+xOa);)xOa++;return t+xOa}),Position={positions:["topleft","topmiddle","topright","righttop","rightmiddle","rightbottom","bottomright","bottommiddle","bottomleft","leftbottom","leftmiddle","lefttop"],regex:{toOrientation:/^(top|left|bottom|right)(top|left|bottom|right|middle|center)$/,horizontal:/^(top|bottom)/,isCenter:/(middle|center)/,side:/^(top|bottom|left|right)/},toDimension:(AOa={top:"height",left:"width",bottom:"height",right:"width"},function(t){return AOa[t]}),isCenter:function(t){return!!t.toLowerCase().match(this.regex.isCenter)},isCorner:function(t){return!this.isCenter(t)},getOrientation:function(t){return t.toLowerCase().match(this.regex.horizontal)?"horizontal":"vertical"},getSide:function(t){var e=null,i=t.toLowerCase().match(this.regex.side);return i&&i[1]&&(e=i[1]),e},split:function(t){return t.toLowerCase().match(this.regex.toOrientation)},_flip:{top:"bottom",bottom:"top",left:"right",right:"left"},flip:function(t,e){var i=this.split(t);return e?this.inverseCornerPlane(this.flip(this.inverseCornerPlane(t))):this._flip[i[1]]+i[2]},inverseCornerPlane:function(t){if(Position.isCorner(t)){var e=this.split(t);return e[2]+e[1]}return t},adjustOffsetBasedOnPosition:function(t,e,i){var n=$.extend({},t),r={horizontal:"x",vertical:"y"},o=Position.getOrientation(e);if(o==Position.getOrientation(i)){if(Position.getSide(e)!=Position.getSide(i))n[{x:"y",y:"x"}[r[o]]]*=-1}else{var s=n.x;n.x=n.y,n.y=s;var a={top:{right:"x"},bottom:{left:"x"},left:{bottom:"y"},right:{top:"y"}}[Position.getSide(e)][Position.getSide(i)];a&&(n[a]*=-1),n[r[Position.getOrientation(i)]]=0}return n},getBoxFromPoints:function(t,e,i,n){var r=Math.min(t,i),o=Math.max(t,i),s=Math.min(e,n),a=Math.max(e,n);return{left:r,top:s,width:Math.max(o-r,0),height:Math.max(a-s,0)}},isPointWithinBox:function(t,e,i,n,r,o){var s=this.getBoxFromPoints(i,n,r,o);return t>=s.left&&t<=s.left+s.width&&e>=s.top&&e<=s.top+s.height},isPointWithinBoxLayout:function(t,e,i){return this.isPointWithinBox(t,e,i.position.left,i.position.top,i.position.left+i.dimensions.width,i.position.top+i.dimensions.height)},getDistance:function(t,e,i,n){return Math.sqrt(Math.pow(Math.abs(i-t),2)+Math.pow(Math.abs(n-e),2))},intersectsLine:(FPa=function(t,e,i,n,r,o){var s=(o-e)*(i-t)-(n-e)*(r-t);return 0<s||!(s<0)},function(t,e,i,n,r,o,s,a,c){return c?(p=((u=s-r)*(e-o)-(d=a-o)*(t-r))/(-u*(h=n-e)+(l=i-t)*d),0<=(f=(-h*(t-r)+l*(e-o))/(-u*h+l*d))&&f<=1&&0<=p&&p<=1&&{x:t+p*l,y:e+p*h}):FPa(t,e,r,o,s,a)!=FPa(i,n,r,o,s,a)&&FPa(t,e,i,n,r,o)!=FPa(t,e,i,n,s,a);var l,h,u,d,f,p})},Bounds={viewport:function(){return Browser.MobileSafari||Browser.Android&&Browser.Gecko?{width:window.innerWidth,height:window.innerHeight}:{height:$(window).height(),width:$(window).width()}}},Mouse={_buffer:{pageX:0,pageY:0},_dimensions:{width:30,height:30},_shift:{x:2,y:10},getPosition:function(t){var e=this.getActualPosition(t);return{left:e.left-Math.round(.5*this._dimensions.width)+this._shift.x,top:e.top-Math.round(.5*this._dimensions.height)+this._shift.y}},getActualPosition:function(t){var e=t&&"number"==$.type(t.pageX)?t:this._buffer;return{left:e.pageX,top:e.pageY}},getDimensions:function(){return this._dimensions}},Color=function(){function n(t){return("0"+parseInt(t).toString(16)).slice(-2)}var r={_default:"#000000",aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};return{toRGB:function(t){if(/^rgba?\(/.test(t))return"#"+n((e=(e=t).match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/))[1])+n(e[2])+n(e[3]);var e;r[t]&&(t=r[t]);var i=t.replace("#","");return/^(?:[0-9a-fA-F]{3}){1,2}$/.test(i)?(3==i.length&&(i=i.charAt(0)+i.charAt(0)+i.charAt(1)+i.charAt(1)+i.charAt(2)+i.charAt(2)),"#"+i):r._default}}}(),FPa,AOa,xOa;Spin.supported=Support.css.transform&&Support.css.animation,$.extend(Spin.prototype,{initialize:function(){this.options=$.extend({},arguments[0]||{}),this.build(),this.start()},build:function(){var t=2*(this.options.length+this.options.radius),e={height:t,width:t};this.element=$("<div>").addClass("tpd-spin").css(e),this.element.append(this._rotate=$("<div>").addClass("tpd-spin-rotate")),this.element.css({"margin-left":-.5*e.width,"margin-top":-.5*e.height});for(var i=this.options.lines,n=0;n<i;n++){var r,o;this._rotate.append(r=$("<div>").addClass("tpd-spin-frame").append(o=$("<div>").addClass("tpd-spin-line"))),o.css({"background-color":this.options.color,width:this.options.width,height:this.options.length,"margin-left":-.5*this.options.width,"border-radius":Math.round(.5*this.options.width)}),r.css({opacity:(1/i*(n+1)).toFixed(2)});var s={};s[Support.css.prefixed("transform")]="rotate("+360/i*(n+1)+"deg)",r.css(s)}},start:function(){var t={};t[Support.css.prefixed("animation")]="tpd-spin 1s infinite steps("+this.options.lines+")",this._rotate.css(t)},stop:function(){var t={};t[Support.css.prefixed("animation")]="none",this._rotate.css(t),this.element.detach()}}),$.extend(Visible.prototype,{initialize:function(t){return t="array"==$.type(t)?t:[t],this.elements=t,this._restore=[],$.each(t,$.proxy(function(t,e){var i=$(e).is(":visible");i||$(e).show(),this._restore.push({element:e,visible:i})},this)),this},restore:function(){$.each(this._restore,function(t,e){e.visible||$(e.element).show()}),this._restore=null}});var AjaxCache=(PQa=[],{get:function(t){for(var e=null,i=0;i<PQa.length;i++)PQa[i]&&PQa[i].url==t.url&&(PQa[i].type||"GET").toUpperCase()==(t.type||"GET").toUpperCase()&&$.param(PQa[i].data||{})==$.param(t.data||{})&&(e=PQa[i]);return e},set:function(t,e,i){var n=this.get(t);n||(n=$.extend({callbacks:{}},t),PQa.push(n)),n.callbacks[e]=i},remove:function(t){for(var e=0;e<PQa.length;e++)PQa[e]&&PQa[e].url==t&&delete PQa[e]},clear:function(){PQa=[]}}),Voila=function(s){function a(t,e,i){if(!(this instanceof a))return new a(t,e,i);var n=s.type(e),r="object"===n?e:{},o="function"===n?e:"function"===s.type(i)&&i;return this.options=s.extend({method:"onload"},r),this.deferred=new jQuery.Deferred,o&&this.always(o),this._processed=0,this.images=[],this._add(t),this}s.extend(a.prototype,{_add:function(t){var e="string"==s.type(t)?s(t):t instanceof jQuery||0<t.length?t:[t];s.each(e,s.proxy(function(t,e){var i=s(),n=s(e);(i=n.is("img")?i.add(n):i.add(n.find("img"))).each(s.proxy(function(t,e){this.images.push(new r(e,s.proxy(function(t){this._progress(t)},this),s.proxy(function(t){this._progress(t)},this),this.options))},this))},this)),this.images.length<1&&setTimeout(s.proxy(function(){this._resolve()},this))},abort:function(){this._progress=this._notify=this._reject=this._resolve=function(){},s.each(this.images,function(t,e){e.abort()}),this.images=[]},_progress:function(t){this._processed++,t.isLoaded||(this._broken=!0),this._notify(t),this._processed==this.images.length&&this[this._broken?"_reject":"_resolve"]()},_notify:function(t){this.deferred.notify(this,t)},_reject:function(){this.deferred.reject(this)},_resolve:function(){this.deferred.resolve(this)},always:function(t){return this.deferred.always(t),this},done:function(t){return this.deferred.done(t),this},fail:function(t){return this.deferred.fail(t),this},progress:function(t){return this.deferred.progress(t),this}});var r=function(o){var t=function(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))};o.extend(t.prototype,{initialize:function(){this.options=o.extend({test:function(){},success:function(){},timeout:function(){},callAt:!1,intervals:[[0,0],[1e3,10],[2e3,50],[4e3,100],[2e4,500]]},arguments[0]||{}),this._test=this.options.test,this._success=this.options.success,this._timeout=this.options.timeout,this._ipos=0,this._time=0,this._delay=this.options.intervals[this._ipos][1],this._callTimeouts=[],this.poll(),this._createCallsAt()},poll:function(){this._polling=setTimeout(o.proxy(function(){if(this._test())this.success();else{if(this._time+=this._delay,this._time>=this.options.intervals[this._ipos][0]){if(!this.options.intervals[this._ipos+1])return void("function"==o.type(this._timeout)&&this._timeout());this._ipos++,this._delay=this.options.intervals[this._ipos][1]}this.poll()}},this),this._delay)},success:function(){this.abort(),this._success()},_createCallsAt:function(){this.options.callAt&&o.each(this.options.callAt,o.proxy(function(t,e){var i=e[0],n=e[1],r=setTimeout(o.proxy(function(){n()},this),i);this._callTimeouts.push(r)},this))},_stopCallTimeouts:function(){o.each(this._callTimeouts,function(t,e){clearTimeout(e)}),this._callTimeouts=[]},abort:function(){this._stopCallTimeouts(),this._polling&&(clearTimeout(this._polling),this._polling=null)}});var e=function(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))};return o.extend(e.prototype,{supports:{naturalWidth:"naturalWidth"in new Image},initialize:function(t,e,i){return this.img=o(t)[0],this.successCallback=e,this.errorCallback=i,this.isLoaded=!1,this.options=o.extend({method:"onload",pollFallbackAfter:1e3},arguments[3]||{}),"onload"!=this.options.method&&this.supports.naturalWidth?void this.poll():void this.load()},poll:function(){this._poll=new t({test:o.proxy(function(){return 0<this.img.naturalWidth},this),success:o.proxy(function(){this.success()},this),timeout:o.proxy(function(){this.error()},this),callAt:[[this.options.pollFallbackAfter,o.proxy(function(){this.load()},this)]]})},load:function(){this._loading=setTimeout(o.proxy(function(){var t=new Image;(this._onloadImage=t).onload=o.proxy(function(){t.onload=function(){},this.supports.naturalWidth||(this.img.naturalWidth=t.width,this.img.naturalHeight=t.height,t.naturalWidth=t.width,t.naturalHeight=t.height),this.success()},this),t.onerror=o.proxy(this.error,this),t.src=this.img.src},this))},success:function(){this._calledSuccess||(this._calledSuccess=!0,this.abort(),this.waitForRender(o.proxy(function(){this.isLoaded=!0,this.successCallback(this)},this)))},error:function(){this._calledError||(this._calledError=!0,this.abort(),this._errorRenderTimeout=setTimeout(o.proxy(function(){this.errorCallback&&this.errorCallback(this)},this)))},abort:function(){this.stopLoading(),this.stopPolling(),this.stopWaitingForRender()},stopPolling:function(){this._poll&&(this._poll.abort(),this._poll=null)},stopLoading:function(){this._loading&&(clearTimeout(this._loading),this._loading=null),this._onloadImage&&(this._onloadImage.onload=function(){},this._onloadImage.onerror=function(){})},waitForRender:function(t){this._renderTimeout=setTimeout(t)},stopWaitingForRender:function(){this._renderTimeout&&(clearTimeout(this._renderTimeout),this._renderTimeout=null),this._errorRenderTimeout&&(clearTimeout(this._errorRenderTimeout),this._errorRenderTimeout=null)}}),e}(jQuery);return a}(jQuery),PQa;Tipped.Behaviors={hide:{showOn:{element:"mouseenter",tooltip:!1},hideOn:{element:"mouseleave",tooltip:"mouseenter"}},mouse:{showOn:{element:"mouseenter",tooltip:!1},hideOn:{element:"mouseleave",tooltip:"mouseenter"},target:"mouse",showDelay:100,fadeIn:0,hideDelay:0,fadeOut:0},sticky:{showOn:{element:"mouseenter",tooltip:"mouseenter"},hideOn:{element:"mouseleave",tooltip:"mouseleave"},showDelay:150,target:"mouse",fixed:!0}};var Options={create:function(){function e(t){return g=Tipped.Skins.base,m=deepExtend($.extend({},g),Tipped.Skins.reset),(e=i)(t)}function f(t){return t.match(/^(top|left|bottom|right)$/)&&(t+="middle"),t.replace("center","middle").replace(" ",""),t}function p(t){var e;return t.behavior&&(e=Tipped.Behaviors[t.behavior])?deepExtend($.extend({},e),t):t}function i(t){var e=t.skin?t.skin:Tooltips.options.defaultSkin,i=$.extend({},Tipped.Skins[e]||{});i.skin||(i.skin=Tooltips.options.defaultSkin||"dark");var n=deepExtend($.extend({},m),p(i)),r=deepExtend($.extend({},n),p(t));if(r.ajax){var o=(m.ajax,g.ajax);"boolean"==$.type(r.ajax)&&(r.ajax={}),r.ajax=deepExtend($.extend({},o),r.ajax)}var s,a=a=r.position&&r.position.target||"string"==$.type(r.position)&&r.position||m.position&&m.position.target||"string"==$.type(m.position)&&m.position||g.position&&g.position.target||g.position;a=f(a);var c,l=r.position&&r.position.tooltip||m.position&&m.position.tooltip||g.position&&g.position.tooltip||Tooltips.Position.getInversedPosition(a);if(l=f(l),r.position?"string"==$.type(r.position)?(r.position=f(r.position),s={target:r.position,tooltip:Tooltips.Position.getTooltipPositionFromTarget(r.position)}):(s={tooltip:l,target:a},r.position.tooltip&&(s.tooltip=f(r.position.tooltip)),r.position.target&&(s.target=f(r.position.target))):s={tooltip:l,target:a},Position.isCorner(s.target)&&Position.getOrientation(s.target)!=Position.getOrientation(s.tooltip)&&(s.target=Position.inverseCornerPlane(s.target)),"mouse"==r.target){var h=Position.getOrientation(s.target);s.target="horizontal"==h?s.target.replace(/(left|right)/,"middle"):s.target.replace(/(top|bottom)/,"middle")}if(r.position=s,"mouse"==r.target?(c=$.extend({},g.offset),$.extend(c,Tipped.Skins.reset.offset||{}),t.skin&&$.extend(c,(Tipped.Skins[t.skin]||Tipped.Skins[Tooltips.options.defaultSkin]||{}).offset||{}),c=Position.adjustOffsetBasedOnPosition(g.offset,g.position,s.target,!0),t.offset&&(c=$.extend(c,t.offset||{}))):c={x:r.offset.x,y:r.offset.y},r.offset=c,r.hideOn&&"click-outside"==r.hideOn&&(r.hideOnClickOutside=!0,r.hideOn=!1,r.fadeOut=0),r.showOn){var u=r.showOn;"string"==$.type(u)&&(u={element:u}),r.showOn=u}if(r.hideOn){var d=r.hideOn;"string"==$.type(d)&&(d={element:d}),r.hideOn=d}return r.inline&&"string"!=$.type(r.inline)&&(r.inline=!1),Browser.IE&&Browser.IE<9&&$.extend(r,{fadeIn:0,fadeOut:0,hideDelay:0}),r.spinner&&(Spin.supported?"boolean"==$.type(r.spinner)&&(r.spinner=m.spinner||g.spinner||{}):r.spinner=!1),r.container||(r.container=document.body),r.containment&&"string"==$.type(r.containment)&&(r.containment={selector:r.containment,padding:m.containment&&m.containment.padding||g.padding&&g.containment.padding}),r.shadow&&(r.shadow=Support.shadow),r}var g,m;return e}()};$.extend(Skin.prototype,{initialize:function(t){this.tooltip=t,this.element=t._skin;var e=this.tooltip.options;this.tooltip._tooltip[(e.shadow?"remove":"add")+"Class"]("tpd-no-shadow")[(e.radius?"remove":"add")+"Class"]("tpd-no-radius")[(e.stem?"remove":"add")+"Class"]("tpd-no-stem");var i,n,r,o,s=Support.css.prefixed("borderTopLeftRadius");this.element.append(i=$("<div>").addClass("tpd-frames").append($("<div>").addClass("tpd-frame").append($("<div>").addClass("tpd-backgrounds").append(n=$("<div>").addClass("tpd-background").append(r=$("<div>").addClass("tpd-background-content")))))).append(o=$("<div>").addClass("tpd-spinner")),n.css({width:999,height:999,zoom:1}),this._css={border:parseFloat(n.css("border-top-width")),radius:parseFloat(s?n.css(s):0),padding:parseFloat(t._content.css("padding-top")),borderColor:n.css("border-top-color"),backgroundColor:r.css("background-color"),backgroundOpacity:r.css("opacity"),spinner:{dimensions:{width:o.innerWidth(),height:o.innerHeight()}}},o.remove(),i.remove(),this._side=Position.getSide(t.options.position.tooltip)||"top",this._vars={}},destroy:function(){this.frames&&($.each("top right bottom left".split(" "),$.proxy(function(t,e){this["stem_"+e]&&this["stem_"+e].destroy()},this)),this.frames.remove(),this.frames=null)},build:function(){this.frames||(this.element.append(this.frames=$("<div>").addClass("tpd-frames")),$.each("top right bottom left".split(" "),$.proxy(function(t,e){this.insertFrame(e)},this)),this._spinner||this.tooltip._tooltip.append(this._spinner=$("<div>").addClass("tpd-spinner").hide().append($("<div>").addClass("tpd-spinner-spin"))))},_frame:function(){var i,t=$("<div>").addClass("tpd-frame").append(i=$("<div>").addClass("tpd-backgrounds").append($("<div>").addClass("tpd-background-shadow"))).append($("<div>").addClass("tpd-shift-stem").append($("<div>").addClass("tpd-shift-stem-side tpd-shift-stem-side-before")).append($("<div>").addClass("tpd-stem")).append($("<div>").addClass("tpd-shift-stem-side tpd-shift-stem-side-after")));return $.each("top right bottom left".split(" "),$.proxy(function(t,e){i.append($("<div>").addClass("tpd-background-box tpd-background-box-"+e).append($("<div>").addClass("tpd-background-box-shift").append($("<div>").addClass("tpd-background-box-shift-further").append($("<div>").addClass("tpd-background").append($("<div>").addClass("tpd-background-title")).append($("<div>").addClass("tpd-background-content"))).append($("<div>").addClass("tpd-background tpd-background-loading")).append($("<div>").addClass("tpd-background-border-hack").hide()))))},this)),t}(),_getFrame:function(t){var e=this._frame.clone();e.addClass("tpd-frame-"+t),e.find(".tpd-background-shadow").css({"border-radius":this._css.radius}),this.tooltip.options.stem&&e.find(".tpd-stem").attr("data-stem-position",t);var i=Math.max(this._css.radius-this._css.border,0);e.find(".tpd-background-title").css({"border-top-left-radius":i,"border-top-right-radius":i}),e.find(".tpd-background-content").css({"border-bottom-left-radius":i,"border-bottom-right-radius":i}),e.find(".tpd-background-loading").css({"border-radius":i});var n={backgroundColor:this._css.borderColor};n["horizontal"==Position.getOrientation(t)?"height":"width"]=this._css.border+"px";return n[{top:"bottom",bottom:"top",left:"right",right:"left"}[t]]=0,e.find(".tpd-shift-stem-side").css(n),e},insertFrame:function(t){var e=this["frame_"+t]=this._getFrame(t);if(this.frames.append(e),this.tooltip.options.stem){var i=e.find(".tpd-stem");this["stem_"+t]=new Stem(i,this,{})}},startLoading:function(){this.tooltip.supportsLoading&&(this.build(),this._spinner||this.tooltip.is("resize-to-content")||this.setDimensions(this._css.spinner.dimensions),this._spinner&&this._spinner.show())},stopLoading:function(){this.tooltip.supportsLoading&&this._spinner&&(this.build(),this._spinner.hide())},updateBackground:function(){var t=this._vars.frames[this._side],e=$.extend({},t.background.dimensions);if(this.tooltip.title&&!this.tooltip.is("loading")){this.element.find(".tpd-background-title, .tpd-background-content").show(),this.element.find(".tpd-background").css({"background-color":"transparent"});var i=$.extend({},e),n=Math.max(this._css.radius-this._css.border,0),r={"border-top-left-radius":n,"border-top-right-radius":n,"border-bottom-left-radius":n,"border-bottom-right-radius":n},o=new Visible(this.tooltip._tooltip),s=this.tooltip._titleWrapper.innerHeight();i.height-=s,this.element.find(".tpd-background-title").css({height:s,width:e.width}),r["border-top-left-radius"]=0,r["border-top-right-radius"]=0,o.restore(),this.element.find(".tpd-background-content").css(i).css(r),this.element.find(".tpd-background-loading").css({"background-color":this._css.backgroundColor})}else this.element.find(".tpd-background-title, .tpd-background-content").hide(),this.element.find(".tpd-background").css({"background-color":this._css.backgroundColor});this._css.border&&(this.element.find(".tpd-background").css({"border-color":"transparent"}),this.element.find(".tpd-background-border-hack").css({width:e.width,height:e.height,"border-radius":this._css.radius,"border-width":this._css.border,"border-color":this._css.borderColor}).show())},paint:function(){if(!this._paintedDimensions||this._paintedDimensions.width!=this._dimensions.width||this._paintedDimensions.height!=this._dimensions.height||this._paintedStemPosition!=this._stemPosition){this._paintedDimensions=this._dimensions,this._paintedStemPosition=this._stemPosition,this.element.removeClass("tpd-visible-frame-top tpd-visible-frame-bottom tpd-visible-frame-left tpd-visible-frame-right").addClass("tpd-visible-frame-"+this._side);var t=this._vars.frames[this._side],e=$.extend({},t.background.dimensions);this.element.find(".tpd-background").css(e),this.element.find(".tpd-background-shadow").css({width:e.width+2*this._css.border,height:e.height+2*this._css.border}),this.updateBackground(),this.element.find(".tpd-background-box-shift, .tpd-background-box-shift-further").removeAttr("style"),this.element.add(this.frames).add(this.tooltip._tooltip).css(t.dimensions);var i=this._side,n=this._vars.frames[i],r=this.element.find(".tpd-frame-"+this._side),o=this._vars.frames[i].dimensions;r.css(o),r.find(".tpd-backgrounds").css($.extend({},n.background.position,{width:o.width-n.background.position.left,height:o.height-n.background.position.top}));var s=Position.getOrientation(i);if(this.tooltip.options.stem)if(r.find(".tpd-shift-stem").css($.extend({},n.shift.dimensions,n.shift.position)),"vertical"==s){(c=r.find(".tpd-background-box-top, .tpd-background-box-bottom")).css({height:this._vars.cut,width:this._css.border}),r.find(".tpd-background-box-bottom").css({top:n.dimensions.height-this._vars.cut}).find(".tpd-background-box-shift").css({"margin-top":-1*n.dimensions.height+this._vars.cut});var a="right"==i?n.dimensions.width-n.stemPx-this._css.border:0;c.css({left:a}).find(".tpd-background-box-shift").css({"margin-left":-1*a}),r.find(".tpd-background-box-"+("left"==i?"left":"right")).hide(),"right"==i?r.find(".tpd-background-box-left").css({width:n.dimensions.width-n.stemPx-this._css.border}):r.find(".tpd-background-box-right").css({"margin-left":this._css.border}).find(".tpd-background-box-shift").css({"margin-left":-1*this._css.border}),(l=r.find(".tpd-background-box-"+this._side)).css({height:n.dimensions.height-2*this._vars.cut,"margin-top":this._vars.cut}),l.find(".tpd-background-box-shift").css({"margin-top":-1*this._vars.cut})}else{var c;(c=r.find(".tpd-background-box-left, .tpd-background-box-right")).css({width:this._vars.cut,height:this._css.border}),r.find(".tpd-background-box-right").css({left:n.dimensions.width-this._vars.cut}).find(".tpd-background-box-shift").css({"margin-left":-1*n.dimensions.width+this._vars.cut});var l;a="bottom"==i?n.dimensions.height-n.stemPx-this._css.border:0;c.css({top:a}).find(".tpd-background-box-shift").css({"margin-top":-1*a}),r.find(".tpd-background-box-"+("top"==i?"top":"bottom")).hide(),"bottom"==i?r.find(".tpd-background-box-top").css({height:n.dimensions.height-n.stemPx-this._css.border}):r.find(".tpd-background-box-bottom").css({"margin-top":this._css.border}).find(".tpd-background-box-shift").css({"margin-top":-1*this._css.border}),(l=r.find(".tpd-background-box-"+this._side)).css({width:n.dimensions.width-2*this._vars.cut,"margin-left":this._vars.cut}),l.find(".tpd-background-box-shift").css({"margin-left":-1*this._vars.cut})}var h=t.background,u=h.position,d=h.dimensions;this._spinner.css({top:u.top+this._css.border+(.5*d.height-.5*this._css.spinner.dimensions.height),left:u.left+this._css.border+(.5*d.width-.5*this._css.spinner.dimensions.width)})}},getVars:function(){var s=(this._css.padding,this._css.radius,this._css.border),t=this._vars.maxStemHeight||0,a=$.extend({},this._dimensions||{}),c={frames:{},dimensions:a,maxStemHeight:t};c.cut=Math.max(this._css.border,this._css.radius)||0;var l={width:0,height:0},e=0,h=0;return this.tooltip.options.stem&&(l=this.stem_top.getMath().dimensions.outside,e=this.stem_top._css.offset,h=Math.max(l.height-this._css.border,0)),c.stemDimensions=l,c.stemOffset=e,Position.getOrientation(this._side),$.each("top right bottom left".split(" "),$.proxy(function(t,e){var i="vertical"==Position.getOrientation(e),n={width:a.width+2*s,height:a.height+2*s},r=n[i?"height":"width"]-2*c.cut,o={dimensions:n,stemPx:h,position:{top:0,left:0},background:{dimensions:$.extend({},a),position:{top:0,left:0}}};switch((c.frames[e]=o).dimensions[i?"width":"height"]+=h,("top"==e||"left"==e)&&(o.background.position[e]+=h),$.extend(o,{shift:{position:{top:0,left:0},dimensions:{width:i?l.height:r,height:i?r:l.height}}}),e){case"top":case"bottom":o.shift.position.left+=c.cut,"bottom"==e&&(o.shift.position.top+=n.height-s-h);break;case"left":case"right":o.shift.position.top+=c.cut,"right"==e&&(o.shift.position.left+=n.width-s-h)}},this)),c.connections={},$.each(Position.positions,$.proxy(function(t,e){c.connections[e]=this.getConnectionLayout(e,c)},this)),c},setDimensions:function(t){this.build();var e=this._dimensions;e&&e.width==t.width&&e.height==t.height||(this._dimensions=t,this._vars=this.getVars())},setSide:function(t){this._side=t,this._vars=this.getVars()},getConnectionLayout:function(t,e){var i=Position.getSide(t),n=Position.getOrientation(t),r=(e.dimensions,e.cut),o=this["stem_"+i],s=e.stemOffset,a=this.tooltip.options.stem?o.getMath().dimensions.outside.width:0,c=r+s+.5*a,l={stem:{}},h={left:0,right:0,up:0,down:0},u={top:0,left:0},d={top:0,left:0},f=e.frames[i];c=0;if("horizontal"==n){var p=f.dimensions.width;this.tooltip.options.stem&&((p=f.shift.dimensions.width)-a<2*s&&(s=Math.floor(.5*(p-a))||0),c=r+s+.5*a);var g=p-2*s,m=s;switch((y=Position.split(t))[2]){case"left":h.right=g-a,u.left=c;break;case"middle":m+=Math.round(.5*g-.5*a),h.left=m-s,h.right=m-s,u.left=d.left=Math.round(.5*f.dimensions.width);break;case"right":m+=g-a,h.left=g-a,u.left=f.dimensions.width-c,d.left=f.dimensions.width}"bottom"==y[1]&&(u.top+=f.dimensions.height,d.top+=f.dimensions.height),$.extend(l.stem,{position:{left:m},before:{width:m},after:{left:m+a,width:p-m-a+1}})}else{var v=f.dimensions.height;this.tooltip.options.stem&&((v=f.shift.dimensions.height)-a<2*s&&(s=Math.floor(.5*(v-a))||0),c=r+s+.5*a);var y,_=v-2*s,b=s;switch((y=Position.split(t))[2]){case"top":h.down=_-a,u.top=c;break;case"middle":b+=Math.round(.5*_-.5*a),h.up=b-s,h.down=b-s,u.top=d.top=Math.round(.5*f.dimensions.height);break;case"bottom":b+=_-a,h.up=_-a,u.top=f.dimensions.height-c,d.top=f.dimensions.height}"right"==y[1]&&(u.left+=f.dimensions.width,d.left+=f.dimensions.width),$.extend(l.stem,{position:{top:b},before:{height:b},after:{top:b+a,height:v-b-a+1}})}return l.move=h,l.stem.connection=u,l.connection=d,l},setStemPosition:function(t,e){if(this._stemPosition!=t){this._stemPosition=t;var i=Position.getSide(t);this.setSide(i)}this.tooltip.options.stem&&this.setStemShift(t,e)},setStemShift:function(t,e){var i=this._shift,n=this._dimensions;if(!i||i.stemPosition!=t||i.shift.x!=e.x||i.shift.y!=e.y||!n||i.dimensions.width!=n.width||i.dimensions.height!=n.height){this._shift={stemPosition:t,shift:e,dimensions:n};var r=Position.getSide(t),o={horizontal:"x",vertical:"y"}[Position.getOrientation(t)],s={x:{left:"left",width:"width"},y:{left:"top",width:"height"}}[o],a=this["stem_"+r],c=deepExtend({},this._vars.connections[t].stem);e&&0!==e[o]&&(c.before[s.width]+=e[o],c.position[s.left]+=e[o],c.after[s.left]+=e[o],c.after[s.width]-=e[o]),a.element.css(c.position),a.element.siblings(".tpd-shift-stem-side-before").css(c.before),a.element.siblings(".tpd-shift-stem-side-after").css(c.after)}}}),$.extend(Stem.prototype,{initialize:function(t,e){this.element=$(t),this.element[0]&&(this.skin=e,this.element.removeClass("tpd-stem-reset"),this._css=$.extend({},e._css,{width:this.element.innerWidth(),height:this.element.innerHeight(),offset:parseFloat(this.element.css("margin-left")),spacing:parseFloat(this.element.css("margin-top"))}),this.element.addClass("tpd-stem-reset"),this.options=$.extend({},arguments[2]||{}),this._position=this.element.attr("data-stem-position")||"top",this._m=100,this.build())},destroy:function(){this.element.html("")},build:function(){this.destroy();var t=this._css.backgroundColor,e=-1<t.indexOf("rgba")&&parseFloat(t.replace(/^.*,(.+)\)/,"$1")),i=e&&e<1;this._useTransform=i&&Support.css.transform,this._css.border||(this._useTransform=!1),this[(this._useTransform?"build":"buildNo")+"Transform"]()},buildTransform:function(){this.element.append(this.spacer=$("<div>").addClass("tpd-stem-spacer").append(this.downscale=$("<div>").addClass("tpd-stem-downscale").append(this.transform=$("<div>").addClass("tpd-stem-transform").append(this.first=$("<div>").addClass("tpd-stem-side").append(this.border=$("<div>").addClass("tpd-stem-border")).append($("<div>").addClass("tpd-stem-border-corner")).append($("<div>").addClass("tpd-stem-triangle")))))),this.transform.append(this.last=this.first.clone().addClass("tpd-stem-side-inversed")),this.sides=this.first.add(this.last);var t=this.getMath(),e=t.dimensions,i=this._m,n=Position.getSide(this._position);if(this.element.find(".tpd-stem-spacer").css({width:u?e.inside.height:e.inside.width,height:u?e.inside.width:e.inside.height}),"top"==n||"left"==n){var r={};"top"==n?(r.bottom=0,r.top="auto"):"left"==n&&(r.right=0,r.left="auto"),this.element.find(".tpd-stem-spacer").css(r)}this.transform.css({width:e.inside.width*i,height:e.inside.height*i});var o=Support.css.prefixed("transform"),s={"background-color":"transparent","border-bottom-color":this._css.backgroundColor,"border-left-width":.5*e.inside.width*i,"border-bottom-width":e.inside.height*i};s[o]="translate("+t.border*i+"px, 0)",this.element.find(".tpd-stem-triangle").css(s);var a=this._css.borderColor;alpha=-1<a.indexOf("rgba")&&parseFloat(a.replace(/^.*,(.+)\)/,"$1")),alpha&&alpha<1?a=(a.substring(0,a.lastIndexOf(","))+")").replace("rgba","rgb"):alpha=1;var c={"background-color":"transparent","border-right-width":t.border*i,width:t.border*i,"margin-left":-2*t.border*i,"border-color":a,opacity:alpha};c[o]="skew("+t.skew+"deg) translate("+t.border*i+"px, "+-1*this._css.border*i+"px)",this.element.find(".tpd-stem-border").css(c);a=this._css.borderColor;alpha=-1<a.indexOf("rgba")&&parseFloat(a.replace(/^.*,(.+)\)/,"$1")),alpha&&alpha<1?a=(a.substring(0,a.lastIndexOf(","))+")").replace("rgba","rgb"):alpha=1;var l={width:t.border*i,"border-right-width":t.border*i,"border-right-color":a,background:a,opacity:alpha,"margin-left":-2*t.border*i};if(l[o]="skew("+t.skew+"deg) translate("+t.border*i+"px, "+(e.inside.height-this._css.border)*i+"px)",this.element.find(".tpd-stem-border-corner").css(l),this.setPosition(this._position),1<i){var h={};h[o]="scale("+1/i+","+1/i+")",this.downscale.css(h)}var u=/^(left|right)$/.test(this._position);this._css.border||this.element.find(".tpd-stem-border, .tpd-stem-border-corner").hide(),this.element.css({width:u?e.outside.height:e.outside.width,height:u?e.outside.width:e.outside.height})},buildNoTransform:function(){this.element.append(this.spacer=$("<div>").addClass("tpd-stem-spacer").append($("<div>").addClass("tpd-stem-notransform").append($("<div>").addClass("tpd-stem-border").append($("<div>").addClass("tpd-stem-border-corner")).append($("<div>").addClass("tpd-stem-border-center-offset").append($("<div>").addClass("tpd-stem-border-center-offset-inverse").append($("<div>").addClass("tpd-stem-border-center"))))).append($("<div>").addClass("tpd-stem-triangle"))));var t=this.getMath(),e=t.dimensions,i=/^(left|right)$/.test(this._position),n=/^(bottom)$/.test(this._position),r=/^(right)$/.test(this._position),o=Position.getSide(this._position);if(this.element.css({width:i?e.outside.height:e.outside.width,height:i?e.outside.width:e.outside.height}),this.element.find(".tpd-stem-notransform").add(this.element.find(".tpd-stem-spacer")).css({width:i?e.inside.height:e.inside.width,height:i?e.inside.width:e.inside.height}),"top"==o||"left"==o){var s={};"top"==o?(s.bottom=0,s.top="auto"):"left"==o&&(s.right=0,s.left="auto"),this.element.find(".tpd-stem-spacer").css(s)}this.element.find(".tpd-stem-border").css({width:"100%",background:"transparent"});var a={opacity:1};a[i?"height":"width"]="100%",a[i?"width":"height"]=this._css.border,a[n?"top":"bottom"]=0,$.extend(a,r?{left:0}:{right:0}),this.element.find(".tpd-stem-border-corner").css(a);var c={width:0,"background-color":"transparent",opacity:1},l=.5*e.inside.width+"px solid transparent",h={"background-color":"transparent"};if(e.inside.width,t.border,i){var u={left:"auto",top:"50%","margin-top":-.5*e.inside.width,"border-top":l,"border-bottom":l};$.extend(c,u),c[r?"right":"left"]=0,c[r?"border-left":"border-right"]=e.inside.height+"px solid "+this._css.borderColor,$.extend(h,u),h[r?"border-left":"border-right"]=e.inside.height+"px solid "+this._css.backgroundColor,h[r?"right":"left"]=t.top,h[r?"left":"right"]="auto",this.element.find(".tpd-stem-border-center-offset").css({"margin-left":-1*this._css.border*(r?-1:1)}).find(".tpd-stem-border-center-offset-inverse").css({"margin-left":this._css.border*(r?-1:1)})}else{u={"margin-left":-.5*e.inside.width,"border-left":l,"border-right":l};$.extend(c,u),c[n?"border-top":"border-bottom"]=e.inside.height+"px solid "+this._css.borderColor,$.extend(h,u),h[n?"border-top":"border-bottom"]=e.inside.height+"px solid "+this._css.backgroundColor,h[n?"bottom":"top"]=t.top,h[n?"top":"bottom"]="auto",this.element.find(".tpd-stem-border-center-offset").css({"margin-top":-1*this._css.border*(n?-1:1)}).find(".tpd-stem-border-center-offset-inverse").css({"margin-top":this._css.border*(n?-1:1)})}this.element.find(".tpd-stem-border-center").css(c),this.element.find(".tpd-stem-border-corner").css({"background-color":this._css.borderColor}),this.element.find(".tpd-stem-triangle").css(h),this._css.border||this.element.find(".tpd-stem-border").hide()},setPosition:function(t){this._position=t,this.transform.attr("class","tpd-stem-transform tpd-stem-transform-"+t)},getMath:function(){var t=this._css.height,e=this._css.width,i=this._css.border;this._useTransform&&Math.floor(e)%2&&(e=Math.max(Math.floor(e)-1,0));var n=degrees(Math.atan(.5*e/t)),r=90-n,o={width:e+2*(i/Math.cos((90-r)*Math.PI/180)),height:t+(d=i/Math.cos((90-n)*Math.PI/180))};Math.max(i,this._css.radius),t=o.height,e=.5*o.width;var s=90-degrees(Math.atan(t/e)),a=i/Math.cos(s*Math.PI/180),c=180*Math.atan(t/e)/Math.PI,l=-1*(90-c),h=90-c,u=i*Math.tan(h*Math.PI/180),d=i/Math.cos((90-h)*Math.PI/180),f=$.extend({},o),p=$.extend({},o);p.height+=this._css.spacing,p.height=Math.ceil(p.height);var g=!0;return o.width<=2*i&&(g=!1),{enabled:g,outside:p,dimensions:{inside:f,outside:p},top:d,border:a,skew:l,corner:u}}});var Tooltips={tooltips:{},options:{defaultSkin:"dark",startingZIndex:999999},_emptyClickHandler:function(){},init:function(){this.reset(),this._resizeHandler=$.proxy(this.onWindowResize,this),$(window).bind("resize orientationchange",this._resizeHandler),Browser.MobileSafari&&$("body").bind("click",this._emptyClickHandler)},reset:function(){Tooltips.removeAll(),Delegations.removeAll(),this._resizeHandler&&$(window).unbind("resize orientationchange",this._resizeHandler),Browser.MobileSafari&&$("body").unbind("click",this._emptyClickHandler)},onWindowResize:function(){this._resizeTimer&&(window.clearTimeout(this._resizeTimer),this._resizeTimer=null),this._resizeTimer=_.delay($.proxy(function(){var t=this.getVisible();$.each(t,function(t,e){e.clearUpdatedTo(),e.position()})},this),15)},_getTooltips:function(t,e){var i,n=[],r=[];if(_.isElement(t)?(i=$(t).data("tipped-uids"))&&(n=n.concat(i)):$(t).each(function(t,e){(i=$(e).data("tipped-uids"))&&(n=n.concat(i))}),!n[0]&&!e){var o=this.getTooltipByTooltipElement($(t).closest(".tpd-tooltip")[0]);o&&o.element&&((i=$(o.element).data("tipped-uids")||[])&&(n=n.concat(i)))}return 0<n.length&&$.each(n,$.proxy(function(t,e){var i;(i=this.tooltips[e])&&r.push(i)},this)),r},findElement:function(t){var e=[];return _.isElement(t)&&(e=this._getTooltips(t)),e[0]&&e[0].element},get:function(i){var t=$.extend({api:!1},arguments[1]||{}),n=[];return _.isElement(i)?n=this._getTooltips(i):i instanceof $?i.each($.proxy(function(t,e){var i=this._getTooltips(e,!0);0<i.length&&(n=n.concat(i))},this)):"string"==$.type(i)&&$.each(this.tooltips,function(t,e){e.element&&$(e.element).is(i)&&n.push(e)}),t.api&&$.each(n,function(t,e){e.is("api",!0)}),n},getTooltipByTooltipElement:function(i){if(!i)return null;var n=null;return $.each(this.tooltips,function(t,e){e.is("build")&&e._tooltip[0]===i&&(n=e)}),n},getBySelector:function(i){var n=[];return $.each(this.tooltips,function(t,e){e.element&&$(e.element).is(i)&&n.push(e)}),n},getNests:function(){var i=[];return $.each(this.tooltips,function(t,e){e.is("nest")&&i.push(e)}),i},show:function(t){$(this.get(t)).each(function(t,e){e.show(!1,!0)})},hide:function(t){$(this.get(t)).each(function(t,e){e.hide()})},toggle:function(t){$(this.get(t)).each(function(t,e){e.toggle()})},hideAll:function(i){$.each(this.getVisible(),function(t,e){i&&i==e||e.hide()})},refresh:function(t){var e;e=t?$.grep(this.get(t),function(t){return t.is("visible")}):this.getVisible(),$.each(e,function(t,e){e.refresh()})},getVisible:function(){var i=[];return $.each(this.tooltips,function(t,e){e.visible()&&i.push(e)}),i},isVisibleByElement:function(i){var n=!1;return _.isElement(i)&&$.each(this.getVisible()||[],function(t,e){return e.element==i?!(n=!0):void 0}),n},getHighestTooltip:function(){var i,n=0;return $.each(this.tooltips,function(t,e){e.zIndex>n&&(n=e.zIndex,i=e)}),i},resetZ:function(){this.getVisible().length<=1&&$.each(this.tooltips,function(t,e){e.is("build")&&!e.options.zIndex&&e._tooltip.css({zIndex:e.zIndex=+Tooltips.options.startingZIndex})})},clearAjaxCache:function(){$.each(this.tooltips,$.proxy(function(t,e){e.options.ajax&&(e._cache&&e._cache.xhr&&(e._cache.xhr.abort(),e._cache.xhr=null),e.is("updated",!1),e.is("updating",!1),e.is("sanitized",!1))},this)),AjaxCache.clear()},add:function(t){this.tooltips[t.uid]=t},remove:function(t){var e=this._getTooltips(t);this.removeTooltips(e)},removeTooltips:function(t){t&&$.each(t,$.proxy(function(t,e){var i=e.uid;delete this.tooltips[i],e.remove()},this))},removeDetached:function(){var t=this.getNests(),i=[];0<t.length&&$.each(t,function(t,e){e.is("detached")&&(i.push(e),e.attach())}),$.each(this.tooltips,$.proxy(function(t,e){e.element&&!_.element.isAttached(e.element)&&this.remove(e.element)},this)),$.each(i,function(t,e){e.detach()})},removeAll:function(){$.each(this.tooltips,$.proxy(function(t,e){e.element&&this.remove(e.element)},this)),this.tooltips={}},setDefaultSkin:function(t){this.options.defaultSkin=t||"dark"},setStartingZIndex:function(t){this.options.startingZIndex=t||0}};Tooltips.Position={inversedPosition:{left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},getInversedPosition:function(t){var e=Position.split(t),i=e[1],n=e[2],r=Position.getOrientation(t),o=$.extend({horizontal:!0,vertical:!0},arguments[1]||{});return"horizontal"==r?(o.vertical&&(i=this.inversedPosition[i]),o.horizontal&&(n=this.inversedPosition[n])):(o.vertical&&(n=this.inversedPosition[n]),o.horizontal&&(i=this.inversedPosition[i])),i+n},getTooltipPositionFromTarget:function(t){var e=Position.split(t);return this.getInversedPosition(e[1]+this.inversedPosition[e[2]])}},$.extend(Tooltip.prototype,{supportsLoading:Support.css.transform&&Support.css.animation,initialize:function initialize(element,content){if(this.element=element,this.element){var options;"object"!=$.type(content)||_.isElement(content)||_.isText(content)||_.isDocumentFragment(content)||content instanceof $?options=arguments[2]||{}:(options=content,content=null);var dataOptions=$(element).data("tipped-options");dataOptions&&(options=deepExtend($.extend({},options),eval("({"+dataOptions+"})"))),this.options=Options.create(options),this._cache={dimensions:{width:0,height:0},events:[],timers:{},layouts:{},is:{},fnCallFn:"",updatedTo:{}},this.queues={showhide:$({})};var title=$(element).attr("title")||$(element).data("tipped-restore-title");if(!content){var dt=$(element).attr("data-tipped");if(dt?content=dt:title&&(content=title),content){var SCRIPT_REGEX=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;content=content.replace(SCRIPT_REGEX,"")}}if((!content||content instanceof $&&!content[0])&&!(this.options.ajax&&this.options.ajax.url||this.options.inline))return void(this._aborted=!0);title&&($(element).data("tipped-restore-title",title),$(element)[0].setAttribute("title","")),this.content=content,this.title=$(this.element).data("tipped-title"),"undefined"!=$.type(this.options.title)&&(this.title=this.options.title),this.zIndex=this.options.zIndex||+Tooltips.options.startingZIndex;var uids=$(element).data("tipped-uids");uids||(uids=[]);var uid=getUID();this.uid=uid,uids.push(uid),$(element).data("tipped-uids",uids);var parentTooltipElement=$(this.element).closest(".tpd-tooltip")[0],parentTooltip;parentTooltipElement&&(parentTooltip=Tooltips.getTooltipByTooltipElement(parentTooltipElement))&&parentTooltip.is("nest",!0);var target=this.options.target;this.target="mouse"==target?this.element:"element"!=target&&target?_.isElement(target)?target:target instanceof $&&target[0]?target[0]:this.element:this.element,this.options.inline&&(this.content=$("#"+this.options.inline)[0]),this.options.ajax&&(this.__content=this.content),"function"==$.type(this.content)&&(this._fn=this.content),this.preBuild(),Tooltips.add(this)}},remove:function(){this.unbind(),this.clearTimers(),this.restoreElementToMarker(),this.stopLoading(),this.abort(),this.is("build")&&this._tooltip&&(this._tooltip.remove(),this._tooltip=null);var t=$(this.element).data("tipped-uids")||[],e=$.inArray(this.uid,t);if(-1<e&&(t.splice(e,1),$(this.element).data("tipped-uids",t)),t.length<1){var i,n="tipped-restore-title";(i=$(this.element).data(n))&&(""!=!$(this.element)[0].getAttribute("title")&&$(this.element).attr("title",i),$(this.element).removeData(n)),$(this.element).removeData("tipped-uids")}var r=($(this.element).attr("class")||"").replace(/(tpd-delegation-uid-)\d+/g,"").replace(/^\s\s*/,"").replace(/\s\s*$/,"");$(this.element).attr("class",r)},detach:function(){this.options.detach&&!this.is("detached")&&(this._tooltip&&this._tooltip.detach(),this.is("detached",!0))},attach:function(){if(this.is("detached")){var t;if("string"==$.type(this.options.container)){var e=this.target;"mouse"==e&&(e=this.element),t=$($(e).closest(this.options.container).first())}else t=$(this.options.container);t[0]||(t=$(document.body)),t.append(this._tooltip),this.is("detached",!1)}},preBuild:function(){this.is("detached",!0);var t={left:"-10000px",top:"-10000px",opacity:0,zIndex:this.zIndex};this._tooltip=$("<div>").addClass("tpd-tooltip").addClass("tpd-skin-"+this.options.skin).addClass("tpd-size-"+this.options.size).css(t).hide(),this.createPreBuildObservers()},build:function(){this.is("build")||(this.attach(),this._tooltip.append(this._skin=$("<div>").addClass("tpd-skin")).append(this._contentWrapper=$("<div>").addClass("tpd-content-wrapper").append(this._contentSpacer=$("<div>").addClass("tpd-content-spacer").append(this._titleWrapper=$("<div>").addClass("tpd-title-wrapper").append(this._titleSpacer=$("<div>").addClass("tpd-title-spacer").append(this._titleRelative=$("<div>").addClass("tpd-title-relative").append(this._titleRelativePadder=$("<div>").addClass("tpd-title-relative-padder").append(this._title=$("<div>").addClass("tpd-title"))))).append(this._close=$("<div>").addClass("tpd-close").append($("<div>").addClass("tpd-close-icon").html("&times;")))).append(this._contentRelative=$("<div>").addClass("tpd-content-relative").append(this._contentRelativePadder=$("<div>").addClass("tpd-content-relative-padder").append(this._content=$("<div>").addClass("tpd-content"))).append(this._inner_close=$("<div>").addClass("tpd-close").append($("<div>").addClass("tpd-close-icon").html("&times;")))))),this.skin=new Skin(this),this._contentSpacer.css({"border-radius":Math.max(this.skin._css.radius-this.skin._css.border,0)}),this.createPostBuildObservers(),this.is("build",!0))},createPostBuildObservers:function(){this._tooltip.delegate(".tpd-close, .close-tooltip","click",$.proxy(function(t){t.stopPropagation(),t.preventDefault(),this.is("api",!1),this.hide(!0)},this))},createPreBuildObservers:function(){this.bind(this.element,"mouseenter",this.setActive),this.bind(this._tooltip,Support.touch&&Browser.MobileSafari?"touchstart":"mouseenter",this.setActive),this.bind(this.element,"mouseleave",function(t){this.setIdle(t)}),this.bind(this._tooltip,"mouseleave",function(t){this.setIdle(t)}),this.options.showOn&&($.each(this.options.showOn,$.proxy(function(t,e){var i,n=!1;switch(t){case"element":i=this.element,this.options.hideOn&&this.options.showOn&&"click"==this.options.hideOn.element&&"click"==this.options.showOn.element&&(n=!0,this.is("toggleable",n));break;case"tooltip":i=this._tooltip;break;case"target":i=this.target}if(i&&e){var r=e;this.bind(i,r,"click"==e&&n?function(){this.is("api",!1),this.toggle()}:function(){this.is("api",!1),this.showDelayed()})}},this)),Support.touch&&Browser.MobileSafari&&this.bind(this._tooltip,"touchend",function(){this._tooltipTouchEndTime=(new Date).getTime()})),this.options.hideOn&&$.each(this.options.hideOn,$.proxy(function(t,e){var i;switch(t){case"element":if(this.is("toggleable")&&"click"==e)return;i=this.element;break;case"tooltip":i=this._tooltip;break;case"target":i=this.target}if(i&&e){var n=e;Support.touch&&Browser.MobileSafari&&/^(target|element)/.test(t)&&/mouse(leave|out)/.test(n)?this.bind(i,n,function(t){if(this._tooltipTouchEndTime&&/^mouse(leave|out)$/.test(t.type)&&(new Date).getTime()-this._tooltipTouchEndTime<450)return;this.is("api",!1),this.hideDelayed()}):this.bind(i,n,function(){this.is("api",!1),this.hideDelayed()})}},this)),this.options.hideOnClickOutside&&($(this.element).addClass("tpd-hideOnClickOutside"),this.bind(document.documentElement,"click touchend",$.proxy(function(t){if(this.visible()){var e=$(t.target).closest(".tpd-tooltip, .tpd-hideOnClickOutside")[0];(!e||e&&e!=this._tooltip[0]&&e!=this.element)&&this.hide()}},this))),"mouse"==this.options.target&&this.bind(this.element,"mouseenter mousemove",$.proxy(function(t){this._cache.event=t},this));var t=!1;this.options.showOn&&"mouse"==this.options.target&&!this.options.fixed&&(t=!0),t&&this.bind(this.element,"mousemove",function(){this.is("build")&&(this.is("api",!1),this.position())})}}),$.extend(Tooltip.prototype,{stop:function(){this._tooltip&&(this.queues.showhide.queue([]),this._tooltip.stop(1,0))},showDelayed:function(){this.is("disabled")||(this.clearTimer("hide"),this.is("visible")||this.getTimer("show")||this.setTimer("show",$.proxy(function(){this.clearTimer("show"),this.show()},this),this.options.showDelay||1))},show:function(){if(this.clearTimer("hide"),!this.visible()&&!this.is("disabled")&&$(this.target).is(":visible")){this.is("visible",!0),this.attach(),this.stop();var t=this.queues.showhide;this.is("updated")||this.is("updating")||t.queue($.proxy(function(e){this._onResizeDimensions={width:0,height:0},this.update($.proxy(function(t){return t?(this.is("visible",!1),void this.detach()):void e()},this))},this)),t.queue($.proxy(function(t){this.is("sanitized")?(this.stopLoading(),this._contentWrapper.css({visibility:"visible"}),this.is("resize-to-content",!0),t()):(this._contentWrapper.css({visibility:"hidden"}),this.startLoading(),this.sanitize($.proxy(function(){this.stopLoading(),this._contentWrapper.css({visibility:"visible"}),this.is("resize-to-content",!0),t()},this)))},this)),t.queue($.proxy(function(t){this.position(),this.raise(),t()},this)),t.queue($.proxy(function(t){if(this.is("updated")&&"function"==$.type(this.options.onShow)){var e=new Visible(this._tooltip);this.options.onShow(this._content[0],this.element),e.restore(),t()}else t()},this)),t.queue($.proxy(function(t){this._show(this.options.fadeIn,function(){t()})},this))}},_show:function(t,e){t=("number"==$.type(t)?t:this.options.fadeIn)||0,e=e||"function"==$.type(t)&&t,this.options.hideOthers&&Tooltips.hideAll(this),this._tooltip.fadeTo(t,1,$.proxy(function(){e&&e()},this))},hideDelayed:function(){this.clearTimer("show"),this.getTimer("hide")||!this.visible()||this.is("disabled")||this.setTimer("hide",$.proxy(function(){this.clearTimer("hide"),this.hide()},this),this.options.hideDelay||1)},hide:function(e,i){if(this.clearTimer("show"),this.visible()&&!this.is("disabled")){this.is("visible",!1),this.stop();var t=this.queues.showhide;t.queue($.proxy(function(t){this.abort(),t()},this)),t.queue($.proxy(function(t){this._hide(e,t)},this)),t.queue(function(t){Tooltips.resetZ(),t()}),t.queue($.proxy(function(t){this.clearUpdatedTo(),t()},this)),"function"==$.type(this.options.afterHide)&&this.is("updated")&&t.queue($.proxy(function(t){this.options.afterHide(this._content[0],this.element),t()},this)),this.options.cache||!this.options.ajax&&!this._fn||t.queue($.proxy(function(t){this.is("updated",!1),this.is("updating",!1),this.is("sanitized",!1),t()},this)),"function"==$.type(i)&&t.queue(function(t){i(),t()}),t.queue($.proxy(function(t){this.detach(),t()},this))}},_hide:function(t,e){e=e||"function"==$.type(t)&&t,this.attach(),this._tooltip.fadeTo(t?0:this.options.fadeOut,0,$.proxy(function(){this.stopLoading(),this.is("resize-to-content",!1),this._tooltip.hide(),e&&e()},this))},toggle:function(){this.is("disabled")||this[this.visible()?"hide":"show"]()},raise:function(){if(this.is("build")&&!this.options.zIndex){var t=Tooltips.getHighestTooltip();t&&t!=this&&this.zIndex<=t.zIndex&&(this.zIndex=t.zIndex+1,this._tooltip.css({"z-index":this.zIndex}),this._tooltipShadow&&(this._tooltipShadow.css({"z-index":this.zIndex}),this.zIndex=t.zIndex+2,this._tooltip.css({"z-index":this.zIndex})))}}}),$.extend(Tooltip.prototype,{createElementMarker:function(){!this.elementMarker&&this.content&&_.element.isAttached(this.content)&&($(this.content).data("tpd-restore-inline-display",$(this.content).css("display")),this.elementMarker=$("<div>").hide(),$(this.content).before($(this.elementMarker).hide()))},restoreElementToMarker:function(){var t;this.content,this.elementMarker&&this.content&&((t=$(this.content).data("tpd-restore-inline-display"))&&$(this.content).css({display:t}),$(this.elementMarker).before(this.content).remove())},startLoading:function(){this.is("loading")||(this.build(),this.is("loading",!0),this.options.spinner&&(this._tooltip.addClass("tpd-is-loading"),this.skin.startLoading(),this.is("resize-to-content")||(this.position(),this.raise(),this._show())))},stopLoading:function(){this.build(),this.is("loading",!1),this.options.spinner&&(this._tooltip.removeClass("tpd-is-loading"),this.skin.stopLoading())},abort:function(){this.abortAjax(),this.abortSanitize(),this.is("refreshed-before-sanitized",!1)},abortSanitize:function(){this._cache.voila&&(this._cache.voila.abort(),this._cache.voila=null)},abortAjax:function(){this._cache.xhr&&(this._cache.xhr.abort(),this._cache.xhr=null,this.is("updated",!1),this.is("updating",!1))},update:function(o){if(!this.is("updating")){this.is("updating",!0),this.build();var t=this.options.inline?"inline":this.options.ajax?"ajax":_.isElement(this.content)||_.isText(this.content)||_.isDocumentFragment(this.content)?"element":this._fn?"function":"html";switch(this._contentWrapper.css({visibility:"hidden"}),t){case"html":case"element":case"inline":if(this.is("updated"))return void(o&&o());this._update(this.content,o);break;case"function":if(this.is("updated"))return void(o&&o());var e=this._fn(this.element);if(!e)return this.is("updating",!1),void(o&&o(!0));this._update(e,o);break;case"ajax":var i=this.options.ajax||{},n=i.url||this.__content,r=i.data||{},s=(t=i.type||"GET",i.dataType),a={url:n,data:r};t&&$.extend(a,{type:t}),s&&$.extend(a,{dataType:s});var c,l=$.extend({},a,i);if(l.method&&delete(l=$.extend({},l)).method,$.each("complete error success".split(" "),$.proxy(function(t,r){l[r]||(l[r]="success"==r?function(t,e,i){return i.responseText}:function(){}),l[r]=_.wrap(l[r],$.proxy(function(t){var e=_slice.call(arguments,1),i=$.type("object"==e[0])?e[0]:e[2];if(!i.statusText||"abort"!=i.statusText){this.options.cache&&AjaxCache.set({url:l.url,type:l.type,data:l.data},r,e),this._cache.xhr=null;var n=t.apply(this,e);n&&this._update(n,o)}},this))},this)),this.options.cache&&(c=AjaxCache.get(l))&&c.callbacks.success)return void $.each(c.callbacks,$.proxy(function(t,e){"function"==$.type(l[t])&&l[t].apply(this,e)},this));this.startLoading(),this._cache.xhr=$.ajax(l)}}},_update:function(t,e){var i={title:this.options.title,close:this.options.close};"string"==$.type(t)||_.isElement(t)||_.isText(t)||_.isDocumentFragment(t)||t instanceof $?i.content=t:$.extend(i,t);t=i.content;var n=i.title,r=i.close;this.content=t,this.title=n,this.close=r,this.createElementMarker(),(_.isElement(t)||t instanceof $)&&$(t).show(),this._content.html(this.content),this._title.html(n&&"string"==$.type(n)?n:""),this._titleWrapper[n?"show":"hide"](),this._close[(this.title||this.options.title)&&r?"show":"hide"]();var o=r&&!(this.options.title||this.title),s=r&&!(this.options.title||this.title)&&"overlap"!=r,a=r&&(this.options.title||this.title)&&"overlap"!=r;this._inner_close[o?"show":"hide"](),this._tooltip[(s?"add":"remove")+"Class"]("tpd-has-inner-close"),this._tooltip[(a?"add":"remove")+"Class"]("tpd-has-title-close"),this._content[(this.options.padding?"remove":"add")+"Class"]("tpd-content-no-padding"),this.finishUpdate(e)},sanitize:function(e){return!this.options.voila||this._content.find("img").length<1?(this.is("sanitized",!0),void(e&&e())):void(this._cache.voila=Voila(this._content,{method:"onload"},$.proxy(function(t){this._markImagesAsSanitized(t.images),this.is("refreshed-before-sanitized")?(this.is("refreshed-before-sanitized",!1),this.sanitize(e)):(this.is("sanitized",!0),e&&e())},this)))},_markImagesAsSanitized:function(t){$.each(t,function(t,e){var i=e.img;$(i).data("completed-src",e.img.src)})},_hasAllImagesSanitized:function(){var n=!0;return this._content.find("img").each(function(t,e){var i=$(e).data("completed-src");return i&&e.src==i?void 0:n=!1}),n},refresh:function(){if(this.visible()){if(!this.is("sanitized"))return void this.is("refreshed-before-sanitized",!0);this.is("refreshing",!0),this.clearTimer("refresh-spinner"),!this.options.voila||this._content.find("img").length<1||this._hasAllImagesSanitized()?(this.is("should-update-dimensions",!0),this.position(),this.is("refreshing",!1)):(this.is("sanitized",!1),this._contentWrapper.css({visibility:"hidden"}),this.startLoading(),this.sanitize($.proxy(function(){this._contentWrapper.css({visibility:"visible"}),this.stopLoading(),this.is("should-update-dimensions",!0),this.position(),this.is("refreshing",!1)},this)))}},finishUpdate:function(t){if(this.is("updated",!0),this.is("updating",!1),"function"==$.type(this.options.afterUpdate)){var e=this._contentWrapper.css("visibility");e&&this._contentWrapper.css({visibility:"visible"}),this.options.afterUpdate(this._content[0],this.element),e&&this._contentWrapper.css({visibility:"hidden"})}t&&t()}}),$.extend(Tooltip.prototype,{clearUpdatedTo:function(){this._cache.updatedTo={}},updateDimensionsToContent:function(t,e){this.skin.build();var i=this.is("loading"),n=this._cache.updatedTo;if((this._maxWidthPass||this.is("api")||this.is("should-update-dimensions")||n.stemPosition!=e||n.loading!=i)&&(!i||!this.is("resize-to-content"))){this._cache.updatedTo={type:this.is("resize-to-content")?"content":"spinner",loading:this.is("loading"),stemPosition:e},this.is("should-update-dimensions")&&this.is("should-update-dimensions",!1);t=t||this.options.position.target,e=e||this.options.position.tooltip;var r=Position.getSide(e),o=Position.getOrientation(e),s=this.skin._css.border;this._tooltip.addClass("tpd-tooltip-measuring");var a=this._tooltip.attr("style");this._tooltip.removeAttr("style");var c={top:s,right:s,bottom:s,left:s},l=0;if("vertical"==Position.getOrientation(e)){this.options.stem&&(c[r]=this.skin["stem_"+r].getMath().dimensions.outside.height);var h=this.getMouseRoom();h[Position._flip[r]]&&(c[r]+=h[Position._flip[r]]);var u=this.getContainmentLayout(e),d=this.getPaddingLine(t),f=!1;Position.isPointWithinBoxLayout(d.x1,d.y1,u)||Position.isPointWithinBoxLayout(d.x2,d.y2,u)?f=!0:$.each("top right bottom left".split(" "),$.proxy(function(t,e){var i=this.getSideLine(u,e);return Position.intersectsLine(d.x1,d.y1,d.x2,d.y2,i.x1,i.y1,i.x2,i.y2)?!(f=!0):void 0},this)),f&&(l="left"==r?d.x1-u.position.left:u.position.left+u.dimensions.width-d.x1,c[r]+=l)}if(this.options.offset&&"vertical"==o){var p=Position.adjustOffsetBasedOnPosition(this.options.offset,this.options.position.target,t);0!==p.x&&(c.right+=Math.abs(p.x))}this.options.containment&&(l=this.options.containment.padding)&&($.each(c,function(t){c[t]+=l}),"vertical"==o?c["left"==r?"left":"right"]-=l:c["top"==r?"top":"bottom"]-=l);var g=Bounds.viewport(),m={width:0,height:0};this.close&&"overlap"!=this.close&&!this.title&&(m=this._innerCloseDimensions||{width:this._inner_close.outerWidth(!0),height:this._inner_close.outerHeight(!0)},this._innerCloseDimensions=m),this._contentRelativePadder.css({"padding-right":m.width}),this._contentSpacer.css({width:g.width-c.left-c.right});var v={width:this._content.innerWidth()+m.width,height:Math.max(this._content.innerHeight(),m.height||0)},y={width:0,height:0};if(this.title){var _={width:0,height:0};this._titleWrapper.add(this._titleSpacer).css({width:"auto",height:"auto"}),this.close&&"overlap"!=this.close&&(_={width:this._close.outerWidth(!0),height:this._close.outerHeight(!0)},this._close.hide()),this._maxWidthPass&&v.width>this.options.maxWidth&&this._titleRelative.css({width:v.width}),this._titleRelativePadder.css({"padding-right":_.width});var b=parseFloat(this._titleWrapper.css("border-bottom-width"));(y={width:this.title?this._titleWrapper.innerWidth():0,height:Math.max(this.title?this._titleWrapper.innerHeight()+b:0,_.height+b)}).width>g.width-c.left-c.right&&(y.width=g.width-c.left-c.right,this._titleSpacer.css({width:y.width}),y.height=Math.max(this.title?this._titleWrapper.innerHeight()+b:0,_.height+b)),v.width=Math.max(y.width,v.width),v.height+=y.height,this._titleWrapper.css({height:Math.max(this.title?this._titleWrapper.innerHeight():0,_.height)}),this.close&&this._close.show()}if(this.options.stem){var w="vertical"==o?"height":"width",x=this.skin["stem_"+r].getMath().outside.width+2*this.skin._css.radius;v[w]<x&&(v[w]=x)}if(this._contentSpacer.css({width:v.width}),v.height!=Math.max(this._content.innerHeight(),m.height)+(this.title?this._titleRelative.outerHeight():0)&&v.width++,this.is("resize-to-content")||(v=this.skin._css.spinner.dimensions),this.setDimensions(v),c={top:s,right:s,bottom:s,left:s},this.options.stem){var C=Position.getSide(e);c[C]=this.skin.stem_top.getMath().dimensions.outside.height}this._contentSpacer.css({"margin-top":c.top,"margin-left":+c.left,width:v.width}),(this.title||this.close)&&this._titleWrapper.css({height:this._titleWrapper.innerHeight(),width:v.width}),this._tooltip.removeClass("tpd-tooltip-measuring"),this._tooltip.attr("style",a);var S=this._contentRelative.add(this._titleRelative);this.options.maxWidth&&v.width>this.options.maxWidth&&!this._maxWidthPass&&this.is("resize-to-content")&&(S.css({width:this.options.maxWidth}),this._maxWidthPass=!0,this.updateDimensionsToContent(t,e),this._maxWidthPass=!1,S.css({width:"auto"}))}},setDimensions:function(t){this.skin.setDimensions(t)},getContainmentSpace:function(t,e){var i=this.getContainmentLayout(t,e),n=this.getTargetLayout(),r=n.position,o=n.dimensions,s=i.position,a=i.dimensions,c={top:Math.max(r.top-s.top,0),bottom:Math.max(s.top+a.height-(r.top+o.height),0),left:Math.max(r.left-s.left,0),right:Math.max(s.left+a.width-(r.left+o.width),0)};return r.top>s.top+a.height&&(c.top-=r.top-(s.top+a.height)),r.top+o.height<s.top&&(c.bottom-=s.top-(r.top+o.height)),r.left>s.left+a.width&&s.left+a.width>=r.left&&(c.left-=r.left-(s.left+a.width)),r.left+o.width<s.left&&(c.right-=s.left-(r.left+o.width)),this._cache.layouts.containmentSpace=c},position:function(){if(this.visible()){this.is("positioning",!0),this._cache.layouts={},this._cache.dimensions;var t=this.options.position.target,e=this.options.position.tooltip,i=e,n=t;this.updateDimensionsToContent(n,i);var r=deepExtend(this.getPositionBasedOnTarget(n,i)),o=[];if(this.options.containment){var s=!1,a={};if($.each("top right bottom left".split(" "),$.proxy(function(t,e){(a[e]=this.isSideWithinContainment(e,i,!0))&&(s=!0)},this)),s||(r.contained=!0),r.contained)this.setPosition(r);else if(o.unshift({position:r,targetPosition:n,stemPosition:i}),n=Position.flip(t),i=Position.flip(e),a[Position.getSide(n)]?(this.updateDimensionsToContent(n,i),r=this.getPositionBasedOnTarget(n,i)):r.contained=!1,r.contained)this.setPosition(r,i);else{o.unshift({position:r,targetPosition:n,stemPosition:i});var c=t,l=this.getContainmentSpace(i,!0),h="horizontal"==Position.getOrientation(c)?["left","right"]:["top","bottom"],u=(l[h[0]]===l[h[1]]?"horizontal"==Position.getOrientation(c)?"left":"top":h[l[h[0]]>l[h[1]]?0:1])+Position.split(c)[1],d=Position.flip(u);if(n=u,i=d,a[Position.getSide(n)]?(this.updateDimensionsToContent(n,i),r=this.getPositionBasedOnTarget(n,i)):r.contained=!1,r.contained)this.setPosition(r,i);else{o.unshift({position:r,targetPosition:n,stemPosition:i});var f,p=[];if($.each(o,function(t,e){if(0<=e.position.top&&0<=e.position.left)f=e;else{var i=0<=e.position.top?1:Math.abs(e.position.top),n=0<=e.position.left?1:Math.abs(e.position.left);p.push({result:e,negativity:i*n})}}),!f){var g=p[p.length-1];$.each(p,function(t,e){e.negativity<g.negativity&&(g=e)}),f=g.result}this.updateDimensionsToContent(f.targetPosition,f.stemPosition,!0),this.setPosition(f.position,f.stemPosition)}}}else this.setPosition(r);this._cache.dimensions=this.skin._vars.dimensions,this.skin.paint(),this.is("positioning",!1)}},getPositionBasedOnTarget:function(t,e){e=e||this.options.position.tooltip;var i=this.getTargetDimensions(),n={left:0,top:0},r={left:0,top:0};Position.getSide(t);var o=this.skin._vars,s=o.frames[Position.getSide(e)],a=Position.getOrientation(t),c=Position.split(t);if("horizontal"==a){var l=Math.floor(.5*i.width);switch(c[2]){case"left":r.left=l;break;case"middle":n.left=i.width-l,r.left=n.left;break;case"right":n.left=i.width,r.left=i.width-l}"bottom"==c[1]&&(n.top=i.height,r.top=i.height)}else{l=Math.floor(.5*i.height);switch(c[2]){case"top":r.top=l;break;case"middle":n.top=i.height-l,r.top=n.top;break;case"bottom":r.top=i.height-l,n.top=i.height}"right"==c[1]&&(n.left=i.width,r.left=i.width)}var h=this.getTargetPosition(),u=$.extend({},i,{top:h.top,left:h.left,connection:n,max:r}),d={width:s.dimensions.width,height:s.dimensions.height,top:0,left:0,connection:o.connections[e].connection,stem:o.connections[e].stem};if(d.top=u.top+u.connection.top,d.left=u.left+u.connection.left,d.top-=d.connection.top,d.left-=d.connection.left,this.options.stem){var f=o.stemDimensions.width,p={stem:{top:d.top+d.stem.connection.top,left:d.left+d.stem.connection.left},connection:{top:u.top+u.connection.top,left:u.left+u.connection.left},max:{top:u.top+u.max.top,left:u.left+u.max.left}};if(!Position.isPointWithinBox(p.stem.left,p.stem.top,p.connection.left,p.connection.top,p.max.left,p.max.top)){p={stem:{top:d.top+d.stem.connection.top,left:d.left+d.stem.connection.left},connection:{top:u.top+u.connection.top,left:u.left+u.connection.left},max:{top:u.top+u.max.top,left:u.left+u.max.left}};var g={connection:Position.getDistance(p.stem.left,p.stem.top,p.connection.left,p.connection.top),max:Position.getDistance(p.stem.left,p.stem.top,p.max.left,p.max.top)},m=Math.min(g.connection,g.max),v=p[g.connection<=g.max?"connection":"max"],y="horizontal"==Position.getOrientation(e)?"left":"top";if(f<=Position.getDistance(p.connection.left,p.connection.top,p.max.left,p.max.top)){var _={top:0,left:0},b=v[y]<p.stem[y]?-1:1;_[y]=m*b,_[y]+=Math.floor(.5*f)*b,d.left+=_.left,d.top+=_.top}else{$.extend(p,{center:{top:Math.round(u.top+.5*i.height),left:Math.round(u.left+.5*i.left)}});m=g[Position.getDistance(p.center.left,p.center.top,p.connection.left,p.connection.top)<=Position.getDistance(p.center.left,p.center.top,p.max.left,p.max.top)?"connection":"max"];var w={top:0,left:0};b=v[y]<p.stem[y]?-1:1;w[y]=m*b,d.left+=w.left,d.top+=w.top}}}if(this.options.offset){var x=$.extend({},this.options.offset);x=Position.adjustOffsetBasedOnPosition(x,this.options.position.target,t),d.top+=x.y,d.left+=x.x}var C=this.getContainment({top:d.top,left:d.left},e),S=C.horizontal&&C.vertical,k={x:0,y:0},T=Position.getOrientation(e);if(!C[T]){var K="horizontal"==T,P=K?["left","right"]:["up","down"],A=K?"x":"y",M=K?"left":"top",E=C.correction[A],O=this.getContainmentLayout(e),I=O.position[K?"left":"top"];if(0!==E){var D=o.connections[e].move,F=D[P[-1*E<0?0:1]],j=E<0?-1:1;if(E*j<=F&&d[M]+E>=I)d[M]+=E,k[A]=-1*E,S=!0;else if(Position.getOrientation(t)==Position.getOrientation(e)){if(d[M]+=F*j,k[A]=-1*F*j,d[M]<I){var N=I-d[M],L=D[P[0]]+D[P[1]];N=Math.min(N,L);d[M]+=N;var R=k[A]-N;R>=o.connections[e].move[P[0]]&&R<=o.connections[e].move[P[1]]&&(k[A]-=N)}var z=(C=this.getContainment({top:d.top,left:d.left},e)).correction[A],B=deepExtend({},d);this.options.offset&&(B.left-=this.options.offset.x,B.top-=this.options.offset.y),(p={stem:{top:B.top+d.stem.connection.top,left:B.left+d.stem.connection.left}}).stem[M]+=k[A];var H=this.getTargetLayout(),W=(f=o.stemDimensions.width,Math.floor(.5*f)),G=I+O.dimensions[K?"width":"height"];if("x"==A){var U=H.position.left+W;0<z&&(U+=H.dimensions.width-2*W),(z<0&&p.stem.left+z>=U&&B.left+z>=I||0<z&&p.stem.left+z<=U&&B.left+z<=G)&&(B.left+=z)}else{var q=H.position.top+W;0<z&&(q+=H.dimensions.height-2*W),(z<0&&p.stem.top+z>=q&&B.top+z>=I||0<z&&p.stem.top+z<=q&&B.top+z<=G)&&(B.top+=z)}d=B,this.options.offset&&(d.left+=this.options.offset.x,d.top+=this.options.offset.y)}}S=(C=this.getContainment({top:d.top,left:d.left},e)).horizontal&&C.vertical}return{top:d.top,left:d.left,contained:S,shift:k}},setPosition:function(t,e){var i=this._position;if(!i||i.top!=t.top||i.left!=t.left){var n;if(this.options.container!=document.body){if("string"==$.type(this.options.container)){var r=this.target;"mouse"==r&&(r=this.element),n=$($(r).closest(this.options.container).first())}else n=$(n);if(n[0]){var o=$(n).offset(),s=Math.round(o.top),a=Math.round(o.left),c=Math.round($(n).scrollTop()),l=Math.round($(n).scrollLeft());t.top-=s,t.top+=c,t.left-=a,t.left+=l}}this._position=t,this._tooltip.css({top:t.top,left:t.left})}this.skin.setStemPosition(e||this.options.position.tooltip,t.shift||{x:0,y:0})},getSideLine:function(t,e){var i=t.position.left,n=t.position.top,r=t.position.left,o=t.position.top;switch(e){case"top":r+=t.dimensions.width;break;case"bottom":n+=t.dimensions.height,r+=t.dimensions.width,o+=t.dimensions.height;break;case"left":o+=t.dimensions.height;break;case"right":i+=t.dimensions.width,r+=t.dimensions.width,o+=t.dimensions.height}return{x1:i,y1:n,x2:r,y2:o}},isSideWithinContainment:function(t,e,i){var n=this.getContainmentLayout(e,i),r=this.getTargetLayout(),o=this.getSideLine(r,t);if(Position.isPointWithinBoxLayout(o.x1,o.y1,n)||Position.isPointWithinBoxLayout(o.x2,o.y2,n))return!0;var s=!1;return $.each("top right bottom left".split(" "),$.proxy(function(t,e){var i=this.getSideLine(n,e);return Position.intersectsLine(o.x1,o.y1,o.x2,o.y2,i.x1,i.y1,i.x2,i.y2)?!(s=!0):void 0},this)),s},getContainment:function(t,e){var i={horizontal:!0,vertical:!0,correction:{y:0,x:0}};if(this.options.containment){var n=this.getContainmentLayout(e),r=this.skin._vars.frames[Position.getSide(e)].dimensions;this.options.containment&&((t.left<n.position.left||t.left+r.width>n.position.left+n.dimensions.width)&&(i.horizontal=!1,i.correction.x=t.left<n.position.left?n.position.left-t.left:n.position.left+n.dimensions.width-(t.left+r.width)),(t.top<n.position.top||t.top+r.height>n.position.top+n.dimensions.height)&&(i.vertical=!1,i.correction.y=t.top<n.position.top?n.position.top-t.top:n.position.top+n.dimensions.height-(t.top+r.height)))}return i},getContainmentLayout:function(t,e){var i={top:$(window).scrollTop(),left:$(window).scrollLeft()},n=this.target;"mouse"==n&&(n=this.element);var r,o=$(n).closest(this.options.containment.selector).first()[0];r=o&&"viewport"!=this.options.containment.selector?{dimensions:{width:$(o).innerWidth(),height:$(o).innerHeight()},position:$(o).offset()}:{dimensions:Bounds.viewport(),position:i};var s=this.options.containment.padding;if(s&&!e){var a=Math.max(r.dimensions.height,r.dimensions.width);if(a<2*s&&(s=Math.max(Math.floor(.5*a),0)),s)r.dimensions.width-=2*s,r.dimensions.height-=2*s,r.position.top+=s,r.position.left+=s,"vertical"==Position.getOrientation(t)?(r.dimensions.width+=s,"left"==Position.getSide(t)&&(r.position.left-=s)):(r.dimensions.height+=s,"top"==Position.getSide(t)&&(r.position.top-=s))}return this._cache.layouts.containmentLayout=r},getMouseRoom:function(){var t={top:0,left:0,right:0,bottom:0};if("mouse"==this.options.target&&!this.is("api")){var e=Mouse.getActualPosition(this._cache.event),i=$(this.element).offset(),n=$(this.element).innerWidth(),r=$(this.element).innerHeight();t={top:Math.max(0,e.top-i.top),bottom:Math.max(0,i.top+r-e.top),left:Math.max(0,e.left-i.left),right:Math.max(0,i.left+n-e.left)}}return t},getTargetPosition:function(){var t;if("mouse"==this.options.target)if(this.is("api")){var e=$(this.element).offset();t={top:Math.round(e.top),left:Math.round(e.left)}}else t=Mouse.getPosition(this._cache.event);else{e=$(this.target).offset();t={top:Math.round(e.top),left:Math.round(e.left)}}return this._cache.layouts.targetPosition=t},getTargetDimensions:function(){return this._cache.layouts.targetDimensions?this._cache.layouts.targetDimensions:(t="mouse"==this.options.target?Mouse.getDimensions():{width:$(this.target).innerWidth(),height:$(this.target).innerHeight()},this._cache.layouts.targetDimensions=t);var t},getTargetLayout:function(){if(this._cache.layouts.targetLayout)return this._cache.layouts.targetLayout;var t={position:this.getTargetPosition(),dimensions:this.getTargetDimensions()};return this._cache.layouts.targetLayout=t},getPaddingLine:function(t){var e=this.getTargetLayout(),i="left";if("vertical"==Position.getOrientation(t))return this.getSideLine(e,Position.getSide(t));if(Position.isCorner(t)){var n=Position.inverseCornerPlane(t);return i=Position.getSide(n),this.getSideLine(e,i)}var r=this.getSideLine(e,i),o=Math.round(.5*e.dimensions.width);return r.x1+=o,r.x2+=o,r}}),$.extend(Tooltip.prototype,{setActive:function(){this.is("active",!0),this.visible()&&this.raise(),this.options.hideAfter&&this.clearTimer("idle")},setIdle:function(){this.is("active",!1),this.options.hideAfter&&this.setTimer("idle",$.proxy(function(){this.clearTimer("idle"),this.is("active")||this.hide()},this),this.options.hideAfter)}}),$.extend(Tooltip.prototype,{bind:function(t,e,i,n){e=e;var r=$.proxy(i,n||this);this._cache.events.push({element:t,eventName:e,handler:r}),$(t).bind(e,r)},unbind:function(){$.each(this._cache.events,function(t,e){$(e.element).unbind(e.eventName,e.handler)}),this._cache.events=[]}}),$.extend(Tooltip.prototype,{disable:function(){this.is("disabled")||this.is("disabled",!0)},enable:function(){this.is("disabled")&&this.is("disabled",!1)}}),$.extend(Tooltip.prototype,{is:function(t,e){return"boolean"==$.type(e)&&(this._cache.is[t]=e),this._cache.is[t]},visible:function(){return this.is("visible")}}),$.extend(Tooltip.prototype,{setTimer:function(t,e,i){this._cache.timers[t]=_.delay(e,i)},getTimer:function(t){return this._cache.timers[t]},clearTimer:function(t){this._cache.timers[t]&&(clearTimeout(this._cache.timers[t]),delete this._cache.timers[t])},clearTimers:function(){$.each(this._cache.timers,function(t,e){clearTimeout(e)}),this._cache.timers={}}}),$.extend(Tipped,{init:function(){Tooltips.init()},create:function(t,i){var n=$.extend({},arguments[2]||{}),r=[];return _.isElement(t)?r.push(new Tooltip(t,i,n)):$(t).each(function(t,e){r.push(new Tooltip(e,i,n))}),new Collection(r)},get:function(t){return new Collection(Tooltips.get(t))},findElement:function(t){return Tooltips.findElement(t)},hideAll:function(){return Tooltips.hideAll(),this},setDefaultSkin:function(t){return Tooltips.setDefaultSkin(t),this},visible:function(t){if(_.isElement(t))return Tooltips.isVisibleByElement(t);if("undefined"==$.type(t))return Tooltips.getVisible().length;var e=$(t),i=0;return $.each(e,function(t,e){Tooltips.isVisibleByElement(e)&&i++}),i},clearAjaxCache:function(){return Tooltips.clearAjaxCache(),this},refresh:function(t,e,i){return Tooltips.refresh(t,e,i),this},setStartingZIndex:function(t){return Tooltips.setStartingZIndex(t),this},remove:function(t){return Tooltips.remove(t),this}}),$.each("show hide toggle disable enable".split(" "),function(t,e){Tipped[e]=function(t){return this.get(t)[e](),this}}),$.extend(Tipped,{delegate:function(){Delegations.add.apply(Delegations,_slice.call(arguments))},undelegate:function(){Delegations.remove.apply(Delegations,_slice.call(arguments))}});var Delegations={_uid:0,_delegations:{},add:function(t,i,n){"object"!=$.type(i)||_.isElement(i)?n=n||{}:(n=i,i=null);var r=++this._uid,e=Options.create($.extend({},n));this._delegations[r]={uid:r,selector:t,content:i,options:e};var o=function(t){$(this).addClass("tpd-delegation-uid-"+r);var e=new Tooltip(this,i,n);e._cache.event=t,e.setActive(),e.showDelayed()};this._delegations[r].removeTitleHandler=$.proxy(this.removeTitle,this),$(document).delegate(t+":not(.tpd-delegation-uid-"+r+")","mouseenter",this._delegations[r].removeTitleHandler),this._delegations[r].handler=o,$(document).delegate(t+":not(.tpd-delegation-uid-"+r+")",e.showOn.element,o)},removeTitle:function(t){var e=t.currentTarget,i=$(e).attr("title");i&&($(e).data("tipped-restore-title",i),$(e)[0].setAttribute("title",""))},remove:function(i){$.each(this._delegations,$.proxy(function(t,e){e.selector==i&&($(document).undelegate(i+":not(.tpd-delegation-uid-"+t+")","mouseenter",e.removeTitleHandler).undelegate(i+":not(.tpd-delegation-uid-"+t+")",e.options.showOn.element,e.handler),delete this._delegations[t])},this))},removeAll:function(){$.each(this._delegations,$.proxy(function(t,e){$(document).undelegate(e.selector+":not(.tpd-delegation-uid-"+t+")","mouseenter",e.removeTitleHandler).undelegate(e.selector+":not(.tpd-delegation-uid-"+t+")",e.options.showOn.element,e.handler),delete this._delegations[t]},this))}};return $.extend(Collection.prototype,{initialize:function(t){return this.tooltips=t,this},items:function(){return $.each(this.tooltips,function(t,e){e.is("api",!0)}),this.tooltips},refresh:function(){return $.each(this._tooltips,function(t,e){e.is("visible")&&e.refresh()}),this},remove:function(){return Tooltips.removeTooltips(this.tooltips),this.tooltips=[],this}}),$.each("show hide toggle disable enable".split(" "),function(t,i){Collection.prototype[i]=function(){return $.each(this.tooltips,function(t,e){e.is("api",!0),e[i]()}),this}}),Tipped.init(),Tipped}),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dayjs_locale_en=e()}(this,function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")}}),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dayjs_plugin_relativeTime=e()}(this,function(){"use strict";return function(t,e,d){var i=e.prototype;d.en.relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};var n=function(t,e,i,n){for(var r,o,s=i.$locale().relativeTime,a=[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],c=a.length,l=0;l<c;l+=1){var h=a[l];h.d&&(r=n?d(t).diff(i,h.d,!0):i.diff(t,h.d,!0));var u=Math.round(Math.abs(r));if(u<=h.r||!h.r){1===u&&0<l&&(h=a[l-1]),o=s[h.l].replace("%d",u);break}}return e?o:(0<r?s.future:s.past).replace("%s",o)};i.to=function(t,e){return n(t,e,this,!0)},i.from=function(t,e){return n(t,e,this)};var r=function(t){return t.$u?d.utc():d()};i.toNow=function(t){return this.to(r(this),t)},i.fromNow=function(t){return this.from(r(this),t)}}}),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dayjs_plugin_advancedFormat=e()}(this,function(){"use strict";return function(t,e,i){var n=e.prototype,o=n.format;i.en.ordinal=function(t){var e=["th","st","nd","rd"],i=t%100;return"["+t+(e[(i-20)%10]||e[i]||e[0])+"]"},n.format=function(t){var e=this,i=this.$locale(),n=this.$utils(),r=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|gggg|Do|X|x|k{1,2}|S/g,function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return i.ordinal(e.$D);case"gggg":return e.weekYear();case"wo":return i.ordinal(e.week(),"W");case"k":case"kk":return n.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();default:return t}});return o.bind(this)(r)}}}),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dayjs_plugin_localizedFormat=e()}(this,function(){"use strict";return function(t,e,i){var n=e.prototype,o=n.format,s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};i.en.formats=s,n.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var e=this.$locale().formats,r=void 0===e?{}:e,i=t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,e,i){var n=i&&i.toUpperCase();return e||r[i]||s[i]||r[n].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(t,e,i){return e||i.slice(1)})});return o.call(this,i)}}}),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dayjs_plugin_customParseFormat=e()}(this,function(){"use strict";var a,b=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,t=/\d\d/,e=/\d\d?/,i=/\d*[^\s\d-:/.()]+/,n=function(e){return function(t){this[e]=+t}},r=[/[+-]\d\d:?\d\d/,function(t){var e,i;(this.zone||(this.zone={})).offset=0==(i=60*(e=t.match(/([+-]|\d\d)/g))[1]+ +e[2])?0:"+"===e[0]?-i:i}],w={A:[/[AP]M/,function(t){this.afternoon="PM"===t}],a:[/[ap]m/,function(t){this.afternoon="pm"===t}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[t,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[e,n("seconds")],ss:[e,n("seconds")],m:[e,n("minutes")],mm:[e,n("minutes")],H:[e,n("hours")],h:[e,n("hours")],HH:[e,n("hours")],hh:[e,n("hours")],D:[e,n("day")],DD:[t,n("day")],Do:[i,function(t){var e=a.ordinal,i=t.match(/\d+/);if(this.day=i[0],e)for(var n=1;n<=31;n+=1)e(n).replace(/\[|\]/g,"")===t&&(this.day=n)}],M:[e,n("month")],MM:[t,n("month")],MMM:[i,function(e){var t=a,i=t.months,n=t.monthsShort,r=n?n.findIndex(function(t){return t===e}):i.findIndex(function(t){return t.substr(0,3)===e});if(r<0)throw new Error;this.month=r+1}],MMMM:[i,function(t){var e=a.months.indexOf(t);if(e<0)throw new Error;this.month=e+1}],Y:[/[+-]?\d+/,n("year")],YY:[t,function(t){t=+t,this.year=t+(68<t?1900:2e3)}],YYYY:[/\d{4}/,n("year")],Z:r,ZZ:r};return function(t,e,o){var i=e.prototype,s=i.parse;i.parse=function(t){var e=t.date,i=t.format,n=t.pl,r=t.utc;this.$u=r,i?(a=n?o.Ls[n]:this.$locale(),this.$d=function(t,s,e){try{var i=function(t){for(var l=s.match(b),h=l.length,e=0;e<h;e+=1){var i=l[e],n=w[i],r=n&&n[0],o=n&&n[1];l[e]=o?{regex:r,parser:o}:i.replace(/^\[|\]$/g,"")}return function(t){for(var e={},i=0,n=0;i<h;i+=1){var r=l[i];if("string"==typeof r)n+=r.length;else{var o=r.regex,s=r.parser,a=t.substr(n),c=o.exec(a)[0];s.call(e,c),t=t.replace(c,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var i=t.hours;e?i<12&&(t.hours+=12):12===i&&(t.hours=0),delete t.afternoon}}(e),e}}()(t),n=i.year,r=i.month,o=i.day,a=i.hours,c=i.minutes,l=i.seconds,h=i.milliseconds,u=i.zone;if(u)return new Date(Date.UTC(n,r-1,o,a||0,c||0,l||0,h||0)+60*u.offset*1e3);var d=new Date,f=n||d.getFullYear(),p=0<r?r-1:d.getMonth(),g=o||d.getDate(),m=a||0,v=c||0,y=l||0,_=h||0;return e?new Date(Date.UTC(f,p,g,m,v,y,_)):new Date(f,p,g,m,v,y,_)}catch(t){return new Date("")}}(e,i,r),this.init(t)):s.call(this,t)}}}),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dayjs_plugin_utc=e()}(this,function(){"use strict";return function(t,i,e){var n=i.prototype;e.utc=function(t,e){return new i({date:t,utc:!0,format:e})},n.utc=function(){return e(this.toDate(),{locale:this.$L,utc:!0})},n.local=function(){return e(this.toDate(),{locale:this.$L,utc:!1})};var r=n.parse;n.parse=function(t){t.utc&&(this.$u=!0),r.call(this,t)};var o=n.init;n.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else o.call(this)};var s=n.utcOffset;n.utcOffset=function(){return this.$u?0:s.call(this)};var a=n.format;n.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return a.call(this,e)},n.isUTC=function(){return!!this.$u}}}),function(){function u(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}u.prototype.diff_main=function(t,e,i,n){if(void 0===n&&(n=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==t||null==e)throw Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===i&&(i=!0);var r=i,o=this.diff_commonPrefix(t,e);i=t.substring(0,o),t=t.substring(o),e=e.substring(o);o=this.diff_commonSuffix(t,e);var s=t.substring(t.length-o);return t=t.substring(0,t.length-o),e=e.substring(0,e.length-o),t=this.diff_compute_(t,e,r,n),i&&t.unshift([0,i]),s&&t.push([0,s]),this.diff_cleanupMerge(t),t},u.prototype.diff_compute_=function(t,e,i,n){if(!t)return[[1,e]];if(!e)return[[-1,t]];var r=t.length>e.length?t:e,o=t.length>e.length?e:t,s=r.indexOf(o);return-1!=s?(i=[[1,r.substring(0,s)],[0,o],[1,r.substring(s+o.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i):1==o.length?[[-1,t],[1,e]]:(r=this.diff_halfMatch_(t,e))?(o=r[0],t=r[1],s=r[2],e=r[3],r=r[4],o=this.diff_main(o,s,i,n),i=this.diff_main(t,e,i,n),o.concat([[0,r]],i)):i&&100<t.length&&100<e.length?this.diff_lineMode_(t,e,n):this.diff_bisect_(t,e,n)},u.prototype.diff_lineMode_=function(t,e,i){var n=this.diff_linesToChars_(t,e);t=n.chars1,e=n.chars2,n=n.lineArray,t=this.diff_main(t,e,!1,i),this.diff_charsToLines_(t,n),this.diff_cleanupSemantic(t),t.push([0,""]);for(var r=n=e=0,o="",s="";e<t.length;){switch(t[e][0]){case 1:r++,s+=t[e][1];break;case-1:n++,o+=t[e][1];break;case 0:if(1<=n&&1<=r){for(t.splice(e-n-r,n+r),e=e-n-r,r=(n=this.diff_main(o,s,!1,i)).length-1;0<=r;r--)t.splice(e,0,n[r]);e+=n.length}n=r=0,s=o=""}e++}return t.pop(),t},u.prototype.diff_bisect_=function(t,e,i){for(var n=t.length,r=e.length,o=Math.ceil((n+r)/2),s=o,a=2*o,c=Array(a),l=Array(a),h=0;h<a;h++)c[h]=-1,l[h]=-1;c[s+1]=0;for(var u=(l[s+1]=0)!=(h=n-r)%2,d=0,f=0,p=0,g=0,m=0;m<o&&!((new Date).getTime()>i);m++){for(var v=-m+d;v<=m-f;v+=2){for(var y,_=s+v,b=(y=v==-m||v!=m&&c[_-1]<c[_+1]?c[_+1]:c[_-1]+1)-v;y<n&&b<r&&t.charAt(y)==e.charAt(b);)y++,b++;if(n<(c[_]=y))f+=2;else if(r<b)d+=2;else if(u&&(0<=(_=s+h-v)&&_<a&&-1!=l[_])){var w=n-l[_];if(w<=y)return this.diff_bisectSplit_(t,e,y,b,i)}}for(v=-m+p;v<=m-g;v+=2){for(_=s+v,y=(w=v==-m||v!=m&&l[_-1]<l[_+1]?l[_+1]:l[_-1]+1)-v;w<n&&y<r&&t.charAt(n-w-1)==e.charAt(r-y-1);)w++,y++;if(n<(l[_]=w))g+=2;else if(r<y)p+=2;else if(!u&&(0<=(_=s+h-v)&&_<a&&-1!=c[_]&&(b=s+(y=c[_])-_,(w=n-w)<=y)))return this.diff_bisectSplit_(t,e,y,b,i)}}return[[-1,t],[1,e]]},u.prototype.diff_bisectSplit_=function(t,e,i,n,r){var o=t.substring(0,i),s=e.substring(0,n);return t=t.substring(i),e=e.substring(n),o=this.diff_main(o,s,!1,r),r=this.diff_main(t,e,!1,r),o.concat(r)},u.prototype.diff_linesToChars_=function(t,e){function i(t){for(var e="",i=0,n=-1,r=s.length;n<t.length-1;){-1==(n=t.indexOf("\n",i))&&(n=t.length-1);var o=t.substring(i,n+1);i=n+1;(a.hasOwnProperty?a.hasOwnProperty(o):void 0!==a[o])?e+=String.fromCharCode(a[o]):(e+=String.fromCharCode(r),a[o]=r,s[r++]=o)}return e}var s=[],a={};return s[0]="",{chars1:i(t),chars2:i(e),lineArray:s}},u.prototype.diff_charsToLines_=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i][1],r=[],o=0;o<n.length;o++)r[o]=e[n.charCodeAt(o)];t[i][1]=r.join("")}},u.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,o=0;i<r;)t.substring(o,r)==e.substring(o,r)?o=i=r:n=r,r=Math.floor((n-i)/2+i);return r},u.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,o=0;i<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=i=r:n=r,r=Math.floor((n-i)/2+i);return r},u.prototype.diff_commonOverlap_=function(t,e){var i=t.length,n=e.length;if(0==i||0==n)return 0;if(n<i?t=t.substring(i-n):i<n&&(e=e.substring(0,i)),i=Math.min(i,n),t==e)return i;n=0;for(var r=1;;){var o=t.substring(i-r);if(-1==(o=e.indexOf(o)))return n;r+=o,0!=o&&t.substring(i-r)!=e.substring(0,r)||(n=r,r++)}},u.prototype.diff_halfMatch_=function(t,e){function i(t,e,i){for(var n,r,o,s,a=t.substring(i,i+Math.floor(t.length/4)),c=-1,l="";-1!=(c=e.indexOf(a,c+1));){var h=d.diff_commonPrefix(t.substring(i),e.substring(c)),u=d.diff_commonSuffix(t.substring(0,i),e.substring(0,c));l.length<u+h&&(l=e.substring(c-u,c)+e.substring(c,c+h),n=t.substring(0,i-u),r=t.substring(i+h),o=e.substring(0,c-u),s=e.substring(c+h))}return 2*l.length>=t.length?[n,r,o,s,l]:null}if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var o,s,d=this,a=i(n,r,Math.ceil(n.length/4));n=i(n,r,Math.ceil(n.length/2));return a||n?(o=n?a&&a[4].length>n[4].length?a:n:a,t.length>e.length?(a=o[0],n=o[1],r=o[2],s=o[3]):(r=o[0],s=o[1],a=o[2],n=o[3]),[a,n,r,s,o=o[4]]):null},u.prototype.diff_cleanupSemantic=function(t){for(var e=!1,i=[],n=0,r=null,o=0,s=0,a=0,c=0,l=0;o<t.length;)0==t[o][0]?(s=c,a=l,l=c=0,r=t[i[n++]=o][1]):(1==t[o][0]?c+=t[o][1].length:l+=t[o][1].length,r&&r.length<=Math.max(s,a)&&r.length<=Math.max(c,l)&&(t.splice(i[n-1],0,[-1,r]),t[i[n-1]+1][0]=1,n--,o=0<--n?i[n-1]:-1,l=c=a=s=0,e=!(r=null))),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;)-1==t[o-1][0]&&1==t[o][0]&&(e=t[o-1][1],i=t[o][1],n=this.diff_commonOverlap_(e,i),(r=this.diff_commonOverlap_(i,e))<=n?(n>=e.length/2||n>=i.length/2)&&(t.splice(o,0,[0,i.substring(0,n)]),t[o-1][1]=e.substring(0,e.length-n),t[o+1][1]=i.substring(n),o++):(r>=e.length/2||r>=i.length/2)&&(t.splice(o,0,[0,e.substring(0,r)]),t[o-1][0]=1,t[o-1][1]=i.substring(0,i.length-r),t[o+1][0]=-1,t[o+1][1]=e.substring(r),o++),o++),o++},u.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var i=t.charAt(t.length-1),n=e.charAt(0),r=i.match(u.nonAlphaNumericRegex_),o=n.match(u.nonAlphaNumericRegex_),s=r&&i.match(u.whitespaceRegex_),a=o&&n.match(u.whitespaceRegex_),c=(i=s&&i.match(u.linebreakRegex_),n=a&&n.match(u.linebreakRegex_),i&&t.match(u.blanklineEndRegex_)),l=n&&e.match(u.blanklineStartRegex_);return c||l?5:i||n?4:r&&!s&&a?3:s||a?2:r||o?1:0}for(var i=1;i<t.length-1;){if(0==t[i-1][0]&&0==t[i+1][0]){var n=t[i-1][1],r=t[i][1],o=t[i+1][1];if(a=this.diff_commonSuffix(n,r)){var s=r.substring(r.length-a);n=n.substring(0,n.length-a),r=s+r.substring(0,r.length-a),o=s+o}for(var a=n,c=(s=r,o),l=e(n,r)+e(r,o);r.charAt(0)===o.charAt(0);){n=n+r.charAt(0),r=r.substring(1)+o.charAt(0),o=o.substring(1);var h=e(n,r)+e(r,o);l<=h&&(l=h,a=n,s=r,c=o)}t[i-1][1]!=a&&(a?t[i-1][1]=a:(t.splice(i-1,1),i--),t[i][1]=s,c?t[i+1][1]=c:(t.splice(i+1,1),i--))}i++}},u.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,u.whitespaceRegex_=/\s/,u.linebreakRegex_=/[\r\n]/,u.blanklineEndRegex_=/\n\r?\n$/,u.blanklineStartRegex_=/^\r?\n\r?\n/,u.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,i=[],n=0,r=null,o=0,s=!1,a=!1,c=!1,l=!1;o<t.length;)0==t[o][0]?(r=t[o][1].length<this.Diff_EditCost&&(c||l)?(s=c,a=l,t[i[n++]=o][1]):(n=0,null),c=l=!1):(-1==t[o][0]?l=!0:c=!0,r&&(s&&a&&c&&l||r.length<this.Diff_EditCost/2&&3==s+a+c+l)&&(t.splice(i[n-1],0,[-1,r]),t[i[n-1]+1][0]=1,n--,r=null,s&&a?(c=l=!0,n=0):(o=0<--n?i[n-1]:-1,c=l=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},u.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,i=0,n=0,r=0,o="",s="";i<t.length;)switch(t[i][0]){case 1:r++,s+=t[i][1],i++;break;case-1:n++,o+=t[i][1],i++;break;case 0:1<n+r?(0!==n&&0!==r&&(0!==(e=this.diff_commonPrefix(s,o))&&(0<i-n-r&&0==t[i-n-r-1][0]?t[i-n-r-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),i++),s=s.substring(e),o=o.substring(e)),0!==(e=this.diff_commonSuffix(s,o))&&(t[i][1]=s.substring(s.length-e)+t[i][1],s=s.substring(0,s.length-e),o=o.substring(0,o.length-e))),0===n?t.splice(i-r,n+r,[1,s]):0===r?t.splice(i-n,n+r,[-1,o]):t.splice(i-n-r,n+r,[-1,o],[1,s]),i=i-n-r+(n?1:0)+(r?1:0)+1):0!==i&&0==t[i-1][0]?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,n=r=0,s=o=""}for(""===t[t.length-1][1]&&t.pop(),n=!1,i=1;i<t.length-1;)0==t[i-1][0]&&0==t[i+1][0]&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),n=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),n=!0)),i++;n&&this.diff_cleanupMerge(t)},u.prototype.diff_xIndex=function(t,e){var i,n=0,r=0,o=0,s=0;for(i=0;i<t.length&&(1!==t[i][0]&&(n+=t[i][1].length),-1!==t[i][0]&&(r+=t[i][1].length),!(e<n));i++)o=n,s=r;return t.length!=i&&-1===t[i][0]?s:s+(e-o)},u.prototype.diff_prettyHtml=function(t){for(var e=[],i=/&/g,n=/</g,r=/>/g,o=/\n/g,s=0;s<t.length;s++){var a=t[s][0],c=(c=t[s][1]).replace(i,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(a){case 1:e[s]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case-1:e[s]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:e[s]="<span>"+c+"</span>"}}return e.join("")},u.prototype.diff_text1=function(t){for(var e=[],i=0;i<t.length;i++)1!==t[i][0]&&(e[i]=t[i][1]);return e.join("")},u.prototype.diff_text2=function(t){for(var e=[],i=0;i<t.length;i++)-1!==t[i][0]&&(e[i]=t[i][1]);return e.join("")},u.prototype.diff_levenshtein=function(t){for(var e=0,i=0,n=0,r=0;r<t.length;r++){var o=t[r][0],s=t[r][1];switch(o){case 1:i+=s.length;break;case-1:n+=s.length;break;case 0:e+=Math.max(i,n),n=i=0}}return e+Math.max(i,n)},u.prototype.diff_toDelta=function(t){for(var e=[],i=0;i<t.length;i++)switch(t[i][0]){case 1:e[i]="+"+encodeURI(t[i][1]);break;case-1:e[i]="-"+t[i][1].length;break;case 0:e[i]="="+t[i][1].length}return e.join("\t").replace(/%20/g," ")},u.prototype.diff_fromDelta=function(t,e){for(var i=[],n=0,r=0,o=e.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{i[n++]=[1,decodeURI(a)]}catch(t){throw Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var c=parseInt(a,10);if(isNaN(c)||c<0)throw Error("Invalid number in diff_fromDelta: "+a);a=t.substring(r,r+=c),"="==o[s].charAt(0)?i[n++]=[0,a]:i[n++]=[-1,a];break;default:if(o[s])throw Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(r!=t.length)throw Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return i},u.prototype.match_main=function(t,e,i){if(null==t||null==e||null==i)throw Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t==e?0:t.length?t.substring(i,i+e.length)==e?i:this.match_bitap_(t,e,i):-1},u.prototype.match_bitap_=function(t,r,o){function e(t,e){var i=t/r.length,n=Math.abs(o-e);return s.Match_Distance?i+n/s.Match_Distance:n?1:i}if(r.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var i=this.match_alphabet_(r),s=this,n=this.Match_Threshold;-1!=(u=t.indexOf(r,o))&&(n=Math.min(e(0,u),n),-1!=(u=t.lastIndexOf(r,o+r.length))&&(n=Math.min(e(0,u),n)));for(var a,c,l,h=1<<r.length-1,u=-1,d=r.length+t.length,f=0;f<r.length;f++){for(a=0,c=d;a<c;)e(f,o+c)<=n?a=c:d=c,c=Math.floor((d-a)/2+a);d=c,a=Math.max(1,o-c+1);var p=Math.min(o+c,t.length)+r.length;for((c=Array(p+2))[p+1]=(1<<f)-1;a<=p;p--){var g=i[t.charAt(p-1)];if(c[p]=0===f?(c[p+1]<<1|1)&g:(c[p+1]<<1|1)&g|(l[p+1]|l[p])<<1|1|l[p+1],c[p]&h&&(g=e(f,p-1))<=n){if(n=g,!(o<(u=p-1)))break;a=Math.max(1,2*o-u)}}if(e(f+1,o)>n)break;l=c}return u},u.prototype.match_alphabet_=function(t){for(var e={},i=0;i<t.length;i++)e[t.charAt(i)]=0;for(i=0;i<t.length;i++)e[t.charAt(i)]|=1<<t.length-i-1;return e},u.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var i=e.substring(t.start2,t.start2+t.length1),n=0;e.indexOf(i)!=e.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)n+=this.Patch_Margin,i=e.substring(t.start2-n,t.start2+t.length1+n);n+=this.Patch_Margin,(i=e.substring(t.start2-n,t.start2))&&t.diffs.unshift([0,i]),(n=e.substring(t.start2+t.length1,t.start2+t.length1+n))&&t.diffs.push([0,n]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+n.length,t.length2+=i.length+n.length}},u.prototype.patch_make=function(t,e,i){var n;if("string"==typeof t&&"string"==typeof e&&void 0===i)n=t,2<(e=this.diff_main(n,e,!0)).length&&(this.diff_cleanupSemantic(e),this.diff_cleanupEfficiency(e));else if(t&&"object"==_typeof(t)&&void 0===e&&void 0===i)e=t,n=this.diff_text1(e);else if("string"==typeof t&&e&&"object"==_typeof(e)&&void 0===i)n=t;else{if("string"!=typeof t||"string"!=typeof e||!i||"object"!=_typeof(i))throw Error("Unknown call format to patch_make.");n=t,e=i}if(0===e.length)return[];i=[],t=new u.patch_obj;for(var r=0,o=0,s=0,a=n,c=0;c<e.length;c++){var l=e[c][0],h=e[c][1];switch(!r&&0!==l&&(t.start1=o,t.start2=s),l){case 1:t.diffs[r++]=e[c],t.length2+=h.length,n=n.substring(0,s)+h+n.substring(s);break;case-1:t.length1+=h.length,t.diffs[r++]=e[c],n=n.substring(0,s)+n.substring(s+h.length);break;case 0:h.length<=2*this.Patch_Margin&&r&&e.length!=c+1?(t.diffs[r++]=e[c],t.length1+=h.length,t.length2+=h.length):h.length>=2*this.Patch_Margin&&r&&(this.patch_addContext_(t,a),i.push(t),t=new u.patch_obj,r=0,a=n,o=s)}1!==l&&(o+=h.length),-1!==l&&(s+=h.length)}return r&&(this.patch_addContext_(t,a),i.push(t)),i},u.prototype.patch_deepCopy=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],r=new u.patch_obj;r.diffs=[];for(var o=0;o<n.diffs.length;o++)r.diffs[o]=n.diffs[o].slice();r.start1=n.start1,r.start2=n.start2,r.length1=n.length1,r.length2=n.length2,e[i]=r}return e},u.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);e=i+e+i,this.patch_splitMax(t);for(var n=0,r=[],o=0;o<t.length;o++){var s,a=t[o].start2+n,c=-1;if((h=this.diff_text1(t[o].diffs)).length>this.Match_MaxBits?-1!=(s=this.match_main(e,h.substring(0,this.Match_MaxBits),a))&&(-1==(c=this.match_main(e,h.substring(h.length-this.Match_MaxBits),a+h.length-this.Match_MaxBits))||c<=s)&&(s=-1):s=this.match_main(e,h,a),-1==s)r[o]=!1,n-=t[o].length2-t[o].length1;else if(r[o]=!0,n=s-a,h==(a=-1==c?e.substring(s,s+h.length):e.substring(s,c+this.Match_MaxBits)))e=e.substring(0,s)+this.diff_text2(t[o].diffs)+e.substring(s+h.length);else if(a=this.diff_main(h,a,!1),h.length>this.Match_MaxBits&&this.diff_levenshtein(a)/h.length>this.Patch_DeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(a);var l,h=0;for(c=0;c<t[o].diffs.length;c++){var u=t[o].diffs[c];0!==u[0]&&(l=this.diff_xIndex(a,h)),1===u[0]?e=e.substring(0,s+l)+u[1]+e.substring(s+l):-1===u[0]&&(e=e.substring(0,s+l)+e.substring(s+this.diff_xIndex(a,h+u[1].length))),-1!==u[0]&&(h+=u[1].length)}}}return[e=e.substring(i.length,e.length-i.length),r]},u.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,i="",n=1;n<=e;n++)i+=String.fromCharCode(n);for(n=0;n<t.length;n++)t[n].start1+=e,t[n].start2+=e;var r=(n=t[0]).diffs;if(0==r.length||0!=r[0][0])r.unshift([0,i]),n.start1-=e,n.start2-=e,n.length1+=e,n.length2+=e;else if(e>r[0][1].length){var o=e-r[0][1].length;r[0][1]=i.substring(r[0][1].length)+r[0][1],n.start1-=o,n.start2-=o,n.length1+=o,n.length2+=o}return 0==(r=(n=t[t.length-1]).diffs).length||0!=r[r.length-1][0]?(r.push([0,i]),n.length1+=e,n.length2+=e):e>r[r.length-1][1].length&&(o=e-r[r.length-1][1].length,r[r.length-1][1]+=i.substring(0,o),n.length1+=o,n.length2+=o),i},u.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,i=0;i<t.length;i++)if(!(t[i].length1<=e)){var n=t[i];t.splice(i--,1);for(var r=n.start1,o=n.start2,s="";0!==n.diffs.length;){var a=new u.patch_obj,c=!0;for(a.start1=r-s.length,a.start2=o-s.length,""!==s&&(a.length1=a.length2=s.length,a.diffs.push([0,s]));0!==n.diffs.length&&a.length1<e-this.Patch_Margin;){s=n.diffs[0][0];var l=n.diffs[0][1];1===s?(a.length2+=l.length,o+=l.length,a.diffs.push(n.diffs.shift()),c=!1):-1===s&&1==a.diffs.length&&0==a.diffs[0][0]&&l.length>2*e?(a.length1+=l.length,r+=l.length,c=!1,a.diffs.push([s,l]),n.diffs.shift()):(l=l.substring(0,e-a.length1-this.Patch_Margin),a.length1+=l.length,r+=l.length,0===s?(a.length2+=l.length,o+=l.length):c=!1,a.diffs.push([s,l]),l==n.diffs[0][1]?n.diffs.shift():n.diffs[0][1]=n.diffs[0][1].substring(l.length))}s=(s=this.diff_text2(a.diffs)).substring(s.length-this.Patch_Margin),""!==(l=this.diff_text1(n.diffs).substring(0,this.Patch_Margin))&&(a.length1+=l.length,a.length2+=l.length,0!==a.diffs.length&&0===a.diffs[a.diffs.length-1][0]?a.diffs[a.diffs.length-1][1]+=l:a.diffs.push([0,l])),c||t.splice(++i,0,a)}}},u.prototype.patch_toText=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e.join("")},u.prototype.patch_fromText=function(t){var e=[];if(!t)return e;t=t.split("\n");for(var i=0,n=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<t.length;){var r=t[i].match(n);if(!r)throw Error("Invalid patch string: "+t[i]);var o=new u.patch_obj;for(e.push(o),o.start1=parseInt(r[1],10),""===r[2]?(o.start1--,o.length1=1):"0"==r[2]?o.length1=0:(o.start1--,o.length1=parseInt(r[2],10)),o.start2=parseInt(r[3],10),""===r[4]?(o.start2--,o.length2=1):"0"==r[4]?o.length2=0:(o.start2--,o.length2=parseInt(r[4],10)),i++;i<t.length;){r=t[i].charAt(0);try{var s=decodeURI(t[i].substring(1))}catch(t){throw Error("Illegal escape in patch_fromText: "+s)}if("-"==r)o.diffs.push([-1,s]);else if("+"==r)o.diffs.push([1,s]);else if(" "==r)o.diffs.push([0,s]);else{if("@"==r)break;if(""!==r)throw Error('Invalid patch mode "'+r+'" in: '+s)}i++}}return e},(u.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0}).prototype.toString=function(){var t,e,i;for(t=["@@ -"+(t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],e=0;e<this.diffs.length;e++){switch(this.diffs[e][0]){case 1:i="+";break;case-1:i="-";break;case 0:i=" "}t[e+1]=i+encodeURI(this.diffs[e][1])+"\n"}return t.join("").replace(/%20/g," ")},this.diff_match_patch=u,this.DIFF_DELETE=-1,this.DIFF_INSERT=1,this.DIFF_EQUAL=0}(),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(t):"function"==typeof define&&define.amd?define("colors",[],function(){return e(t)}):t.Colors=e(t)}(this,function(t,l){"use strict";function o(t,e,i,n,r){if("string"==typeof e)i=(e=R.txt2color(e)).type,L[i]=e[i],r=r!==l?r:e.alpha;else if(e)for(var o in e)t[i][o]=a(e[o]/D[i][o][1],0,1);return r!==l&&(t.alpha=a(+r,0,1)),s(i,n?t:l)}function s(t,e){var i,n,r,o,s,a,c,l,h=e||L,u=R,d=N.options,f=D,p=h.RND,g="",m="",v={hsl:"hsv",rgb:t},y=p.rgb;if("alpha"!==t){for(var _ in f)if(!f[_][_])for(g in t!==_&&(m=v[_]||"rgb",h[_]=u[m+"2"+_](h[m])),p[_]||(p[_]={}),i=h[_])p[_][g]=j(i[g]*f[_][g][1]);y=p.rgb,h.HEX=u.RGB2HEX(y),h.equivalentGrey=d.grey.r*h.rgb.r+d.grey.g*h.rgb.g+d.grey.b*h.rgb.b,h.webSave=n=$(y,51),h.webSmart=r=$(y,17),h.saveColor=y.r===n.r&&y.g===n.g&&y.b===n.b?"web save":y.r===r.r&&y.g===r.g&&y.b===r.b?"web smart":"",h.hueRGB=R.hue2RGB(h.hsv.h),e&&(h.background=(o=y,s=h.rgb,a=h.alpha,c=N.options.grey,(l={}).RGB={r:o.r,g:o.g,b:o.b},l.rgb={r:s.r,g:s.g,b:s.b},l.alpha=a,l.equivalentGrey=j(c.r*o.r+c.g*o.g+c.b*o.b),l.rgbaMixBlack=I(s,{r:0,g:0,b:0},a,1),l.rgbaMixWhite=I(s,{r:1,g:1,b:1},a,1),l.rgbaMixBlack.luminance=O(l.rgbaMixBlack,!0),l.rgbaMixWhite.luminance=O(l.rgbaMixWhite,!0),N.options.customBG&&(l.rgbaMixCustom=I(s,N.options.customBG,a,1),l.rgbaMixCustom.luminance=O(l.rgbaMixCustom,!0),N.options.customBG.luminance=O(N.options.customBG,!0)),l))}var b,w,x,C,S,k,T,K,P=h.rgb,A=h.alpha,M="luminance",E=h.background;return(b=I(P,{r:0,g:0,b:0},A,1))[M]=O(b,!0),h.rgbaMixBlack=b,(w=I(P,{r:1,g:1,b:1},A,1))[M]=O(w,!0),h.rgbaMixWhite=w,d.customBG&&((x=I(P,E.rgbaMixCustom,A,1))[M]=O(x,!0),x.WCAG2Ratio=(T=x[M],K=E.rgbaMixCustom[M],j(100*(K<=T?(T+.05)/(K+.05):(K+.05)/(T+.05)))/100),(h.rgbaMixBGMixCustom=x).luminanceDelta=F.abs(x[M]-E.rgbaMixCustom[M]),x.hueDelta=(C=E.rgbaMixCustom,S=x,k=!0,(F.max(C.r-S.r,S.r-C.r)+F.max(C.g-S.g,S.g-C.g)+F.max(C.b-S.b,S.b-C.b))*(k?255:1)/765)),h.RGBLuminance=O(y),h.HUELuminance=O(h.hueRGB),d.convertCallback&&d.convertCallback(h,t),h}function $(t,e){var i={},n=0,r=e/2;for(var o in t)n=t[o]%e,i[o]=t[o]+(r<n?e-n:-n);return i}function O(t,e){for(var i=e?1:255,n=[t.r/i,t.g/i,t.b/i],r=N.options.luminance,o=n.length;o--;)n[o]=n[o]<=.03928?n[o]/12.92:F.pow((n[o]+.055)/1.055,2.4);return r.r*n[0]+r.g*n[1]+r.b*n[2]}function I(t,e,i,n){var r={},o=i!==l?i:1,s=n!==l?n:1,a=o+s*(1-o);for(var c in t)r[c]=(t[c]*o+e[c]*s*(1-o))/a;return r.a=a,r}function a(t,e,i){return i<t?i:t<e?e:t}var D={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,360],s:[0,100],v:[0,100]},hsl:{h:[0,360],s:[0,100],l:[0,100]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},F=t.Math,j=F.round,N={},L={},e={r:.298954,g:.586434,b:.114612},i={r:.2126,g:.7152,b:.0722},n=function(t){this.colors={RND:{}},this.options={color:"rgba(0,0,0,0)",grey:e,luminance:i,valueRanges:D},r(this,t||{})},r=function(t,e){var i,n=t.options;for(var r in c(t),e)e[r]!==l&&(n[r]=e[r]);i=n.customBG,n.customBG="string"==typeof i?R.txt2color(i).rgb:i,L=o(t.colors,n.color,l,!0)},c=function(t){N!==t&&(L=(N=t).colors)};n.prototype.setColor=function(t,e,i){return c(this),t?o(this.colors,t,e,l,i):(i!==l&&(this.colors.alpha=a(i,0,1)),s(e))},n.prototype.setCustomBackground=function(t){return c(this),this.options.customBG="string"==typeof t?R.txt2color(t).rgb:t,o(this.colors,l,"rgb")},n.prototype.saveAsBackground=function(){return c(this),o(this.colors,l,"rgb",!0)},n.prototype.toString=function(t,e){return R.color2text((t||"rgb").toLowerCase(),this.colors,e)};var R={txt2color:function(t){var e={},i=t.replace(/(?:#|\)|%)/g,"").split("("),n=(i[1]||"").split(/,\s*/),r=i[1]?i[0].substr(0,3):"rgb",o="";if(e.type=r,e[r]={},i[1])for(var s=3;s--;)o=r[s]||r.charAt(s),e[r][o]=+n[s]/D[r][o][1];else e.rgb=R.HEX2rgb(i[0]);return e.alpha=n[3]?+n[3]:1,e},color2text:function(t,e,i){var n=!1!==i&&j(100*e.alpha)/100,r="number"==typeof n&&!1!==i&&(i||1!==n),o=e.RND.rgb,s=e.RND.hsl,a="hex"===t&&r,c="hex"===t&&!a,l="rgb"===t||a?o.r+", "+o.g+", "+o.b:c?"#"+e.HEX:s.h+", "+s.s+"%, "+s.l+"%";return c?l:(a?"rgb":t)+(r?"a":"")+"("+l+(r?", "+n:"")+")"},RGB2HEX:function(t){return((t.r<16?"0":"")+t.r.toString(16)+(t.g<16?"0":"")+t.g.toString(16)+(t.b<16?"0":"")+t.b.toString(16)).toUpperCase()},HEX2rgb:function(t){return{r:+("0x"+(t=t.split(""))[0]+t[t[3]?1:0])/255,g:+("0x"+t[t[3]?2:1]+(t[3]||t[1]))/255,b:+("0x"+(t[4]||t[2])+(t[5]||t[2]))/255}},hue2RGB:function(t){var e=6*t,i=~~e%6,n=6===e?0:e-i;return{r:j(255*[1,1-n,0,0,n,1][i]),g:j(255*[n,1,1,1-n,0,0][i]),b:j(255*[0,0,n,1,1,1-n][i])}},rgb2hsv:function(t){var e,i,n=t.r,r=t.g,o=t.b,s=0;return r<o&&(r=o+(o=r,0),s=-1),i=o,n<r&&(n=r+(r=n,0),s=-2/6-s,i=F.min(r,o)),e=n-i,{h:(n?e/n:0)<1e-15?L&&L.hsl&&L.hsl.h||0:e?F.abs(s+(r-o)/(6*e)):0,s:n?e/n:L&&L.hsv&&L.hsv.s||0,v:n}},hsv2rgb:function(t){var e=6*t.h,i=t.s,n=t.v,r=~~e,o=e-r,s=n*(1-i),a=n*(1-o*i),c=n*(1-(1-o)*i),l=r%6;return{r:[n,a,s,s,c,n][l],g:[c,n,n,a,s,s][l],b:[s,s,c,n,n,a][l]}},hsv2hsl:function(t){var e=(2-t.s)*t.v,i=t.s*t.v;return i=t.s?e<1?e?i/e:0:i/(2-e):0,{h:t.h,s:t.v||i?i:L&&L.hsl&&L.hsl.s||0,l:e/2}},rgb2hsl:function(t,e){var i=R.rgb2hsv(t);return R.hsv2hsl(e?i:L.hsv=i)},hsl2rgb:function(t){var e=6*t.h,i=t.s,n=t.l,r=n<.5?n*(1+i):n+i-i*n,o=n+n-r,s=~~e,a=r*(r?(r-o)/r:0)*(e-s),c=o+a,l=r-a,h=s%6;return{r:[r,l,o,o,c,r][h],g:[c,r,r,l,o,o][h],b:[o,o,c,r,r,l][h]}}};return n}),function(i,n){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n(i,require("jquery"),require("colors")):"function"==typeof define&&define.amd?define(["jquery","colors"],function(t,e){return n(i,t,e)}):n(i,i.jQuery,i.Colors)}(this,function(o,s,e,g){"use strict";function a(t){return t.value||t.getAttribute("value")||s(t).css("background-color")||"#FFF"}function r(t){return(t=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0]:t).originalEvent?t.originalEvent:t}function c(t){return s(t.find(y.doRender)[0]||t[0])}function i(t){var e=s(this),i=e.offset(),n=s(o),r=y.gap;t?((_=c(e))._colorMode=_.data("colorMode"),f.$trigger=e,(p||(s("head")[y.cssPrepend?"prepend":"append"]('<style type="text/css" id="tinyColorPickerStyles">'+(y.css||I)+(y.cssAddon||"")+"</style>"),s(O).css({margin:y.margin}).appendTo("body").show(0,function(){f.$UI=p=s(this),E=y.GPU&&p.css("perspective")!==g,b=s(".cp-z-slider",this),w=s(".cp-xy-slider",this),x=s(".cp-xy-cursor",this),C=s(".cp-z-cursor",this),S=s(".cp-alpha",this),k=s(".cp-alpha-cursor",this),y.buildCallback.call(f,p),p.prepend("<div>").children().eq(0).css("width",p.children().eq(0).width()),p._width=this.offsetWidth,p._height=this.offsetHeight}).hide())).css(y.positionCallback.call(f,e)||{left:(p._left=i.left)-(0<(p._left+=p._width-(n.scrollLeft()+n.width()))+r?p._left+r:0),top:(p._top=i.top+e.outerHeight())-(0<(p._top+=p._height-(n.scrollTop()+n.height()))+r?p._top+r:0)}).show(y.animationSpeed,function(){!0!==t&&(S.toggle(!!y.opacity)._width=S.width(),w._width=w.width(),w._height=w.height(),b._height=b.height(),v.setColor(a(_[0])),d(!0))}).off(".tcp").on(A,".cp-xy-slider,.cp-z-slider,.cp-alpha",l)):f.$trigger&&s(p).hide(y.animationSpeed,function(){d(!1),f.$trigger=null}).off(".tcp")}function l(t){var e=this.className.replace(/cp-(.*?)(?:\s*|$)/,"$1").replace("-","_");1<(t.button||t.which)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1,_._offset=s(this).offset(),(e="xy_slider"===e?n:"z_slider"===e?h:u)(t),d(),T.on(M,function(){T.off(".tcp")}).on(P,function(t){e(t),d()}))}function n(t){var e=r(t),i=e.pageX-_._offset.left,n=e.pageY-_._offset.top;v.setColor({s:i/w._width*100,v:100-n/w._height*100},"hsv")}function h(t){var e=r(t).pageY-_._offset.top;v.setColor({h:360-e/b._height*360},"hsv")}function u(t){var e=(r(t).pageX-_._offset.left)/S._width;v.setColor({},"rgb",e)}function d(t){var e=v.colors,i=e.hueRGB,n=(e.RND.rgb,e.RND.hsl,y.dark),r=y.light,o=v.toString(_._colorMode,y.forceAlpha),s=.22<e.HUELuminance?n:r,a=.22<e.rgbaMixBlack.luminance?n:r,c=(1-e.hsv.h)*b._height,l=e.hsv.s*w._width,h=(1-e.hsv.v)*w._height,u=e.alpha*S._width,d=E?"translate3d":"",f=_[0].value,p=_[0].hasAttribute("value")&&""===f&&t!==g;w._css={backgroundColor:"rgb("+i.r+","+i.g+","+i.b+")"},x._css={transform:d+"("+l+"px, "+h+"px, 0)",left:E?"":l,top:E?"":h,borderColor:.22<e.RGBLuminance?n:r},C._css={transform:d+"(0, "+c+"px, 0)",top:E?"":c,borderColor:"transparent "+s},S._css={backgroundColor:"#"+e.HEX},k._css={transform:d+"("+u+"px, 0, 0)",left:E?"":u,borderColor:a+" transparent"},_._css={backgroundColor:p?"":o,color:p?"":.22<e.rgbaMixBGMixCustom.luminance?n:r},_.text=p?"":f!==o?o:"",t!==g?m(t):$(m)}function m(t){w.css(w._css),x.css(x._css),C.css(C._css),S.css(S._css),k.css(k._css),y.doRender&&_.css(_._css),_.text&&_.val(_.text),y.renderCallback.call(f,_,"boolean"==typeof t?t:g)}var f,v,y,_,p,b,w,x,C,S,k,T=s(document),K=s(),P="touchmove.tcp mousemove.tcp pointermove.tcp",A="touchstart.tcp mousedown.tcp pointerdown.tcp",M="touchend.tcp mouseup.tcp pointerup.tcp",E=!1,$=o.requestAnimationFrame||o.webkitRequestAnimationFrame||function(t){t()},O='<div class="cp-color-picker"><div class="cp-z-slider"><div class="cp-z-cursor"></div></div><div class="cp-xy-slider"><div class="cp-white"></div><div class="cp-xy-cursor"></div></div><div class="cp-alpha"><div class="cp-alpha-cursor"></div></div></div>',I=".cp-color-picker{position:absolute;overflow:hidden;padding:6px 6px 0;background-color:#444;color:#bbb;font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:400;cursor:default;border-radius:5px}.cp-color-picker>div{position:relative;overflow:hidden}.cp-xy-slider{float:left;height:128px;width:128px;margin-bottom:6px;background:linear-gradient(to right,#FFF,rgba(255,255,255,0))}.cp-white{height:100%;width:100%;background:linear-gradient(rgba(0,0,0,0),#000)}.cp-xy-cursor{position:absolute;top:0;width:10px;height:10px;margin:-5px;border:1px solid #fff;border-radius:100%;box-sizing:border-box}.cp-z-slider{float:right;margin-left:6px;height:128px;width:20px;background:linear-gradient(red 0,#f0f 17%,#00f 33%,#0ff 50%,#0f0 67%,#ff0 83%,red 100%)}.cp-z-cursor{position:absolute;margin-top:-4px;width:100%;border:4px solid #fff;border-color:transparent #fff;box-sizing:border-box}.cp-alpha{clear:both;width:100%;height:16px;margin:6px 0;background:linear-gradient(to right,#444,rgba(0,0,0,0))}.cp-alpha-cursor{position:absolute;margin-left:-4px;height:100%;border:4px solid #fff;border-color:#fff transparent;box-sizing:border-box}",D=function(t){v=this.color=new e(t),y=v.options,f=this};D.prototype={render:d,toggle:i},s.fn.colorPicker=function(n){var e=this,t=function(){};return n=s.extend({animationSpeed:150,GPU:!0,doRender:!0,customBG:"#FFF",opacity:!0,renderCallback:t,buildCallback:t,positionCallback:t,body:document.body,scrollResize:!0,gap:4,dark:"#222",light:"#DDD"},n),!f&&n.scrollResize&&s(o).on("resize.tcp scroll.tcp",function(){f.$trigger&&f.toggle.call(f.$trigger[0],!0)}),K=K.add(this),this.colorPicker=f||new D(n),this.options=n,s(n.body).off(".tcp").on(A,function(t){-1===K.add(p).add(s(p).find(t.target)).index(t.target)&&i()}),this.on("focusin.tcp click.tcp",function(t){f.color.options=s.extend(f.color.options,y=e.options),i.call(this,t)}).on("change.tcp",function(){v.setColor(this.value||"#FFF"),e.colorPicker.render(!0)}).each(function(){var t=a(this),e=t.split("("),i=c(s(this));i.data("colorMode",e[1]?e[0].substr(0,3):"HEX").attr("readonly",y.preventFocus),n.doRender&&i.css({"background-color":t,color:function(){return.22<v.setColor(t).rgbaMixBGMixCustom.luminance?n.dark:n.light}})})},s.fn.colorPicker.destroy=function(){s("*").off(".tcp"),f.toggle(!1),K=s()}}),function(t,e){"function"==typeof define&&define.amd?define("sifter",e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.Sifter=e()}(this,function(){var t=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};t.prototype.tokenize=function(t){if(!(t=a(String(t||"").toLowerCase()))||!t.length)return[];var e,i,n,r,o=[],s=t.split(/ +/);for(e=0,i=s.length;e<i;e++){if(n=c(s[e]),this.settings.diacritics)for(r in l)l.hasOwnProperty(r)&&(n=n.replace(new RegExp(r,"g"),l[r]));o.push({string:s[e],regex:new RegExp(n,"i")})}return o},t.prototype.iterator=function(t,e){(s(t)?Array.prototype.forEach||function(t){for(var e=0,i=this.length;e<i;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)}).apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var r,o,s;t=this.prepareSearch(t,e),o=t.tokens,r=t.options.fields,s=o.length;var a,c=function(t,e){var i,n;return t?-1===(n=(t=String(t||"")).search(e.regex))?0:(i=e.string.length/t.length,0===n&&(i+=.5),i):0},l=(a=r.length)?1===a?function(t,e){return c(e[r[0]],t)}:function(t,e){for(var i=0,n=0;i<a;i++)n+=c(e[r[i]],t);return n/a}:function(){return 0};return s?1===s?function(t){return l(o[0],t)}:"and"===t.options.conjunction?function(t){for(var e,i=0,n=0;i<s;i++){if((e=l(o[i],t))<=0)return 0;n+=e}return n/s}:function(t){for(var e=0,i=0;e<s;e++)i+=l(o[e],t);return i/s}:function(){return 0}},t.prototype.getSortFunction=function(t,e){var i,n,r,o,s,a,c,l,h,u,d;if(d=!(t=(r=this).prepareSearch(t,e)).query&&e.sort_empty||e.sort,h=function(t,e){return"$score"===t?e.score:r.items[e.id][t]},s=[],d)for(i=0,n=d.length;i<n;i++)(t.query||"$score"!==d[i].field)&&s.push(d[i]);if(t.query){for(u=!0,i=0,n=s.length;i<n;i++)if("$score"===s[i].field){u=!1;break}u&&s.unshift({field:"$score",direction:"desc"})}else for(i=0,n=s.length;i<n;i++)if("$score"===s[i].field){s.splice(i,1);break}for(l=[],i=0,n=s.length;i<n;i++)l.push("desc"===s[i].direction?-1:1);return(a=s.length)?1===a?(o=s[0].field,c=l[0],function(t,e){return c*f(h(o,t),h(o,e))}):function(t,e){var i,n,r;for(i=0;i<a;i++)if(r=s[i].field,n=l[i]*f(h(r,t),h(r,e)))return n;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"===_typeof(t))return t;var i=(e=o({},e)).fields,n=e.sort,r=e.sort_empty;return i&&!s(i)&&(e.fields=[i]),n&&!s(n)&&(e.sort=[n]),r&&!s(r)&&(e.sort_empty=[r]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,i){var n,r,e,o;return r=this.prepareSearch(t,i),i=r.options,t=r.query,o=i.score||this.getScoreFunction(r),t.length?this.iterator(this.items,function(t,e){n=o(t),(!1===i.filter||0<n)&&r.items.push({score:n,id:e})}):this.iterator(this.items,function(t,e){r.items.push({score:1,id:e})}),(e=this.getSortFunction(r,i))&&r.items.sort(e),r.total=r.items.length,"number"==typeof i.limit&&(r.items=r.items.slice(0,i.limit)),r};var f=function(t,e){return"number"==typeof t&&"number"==typeof e?e<t?1:t<e?-1:0:(t=String(t||"").toLowerCase(),(e=String(e||"").toLowerCase())<t?1:t<e?-1:0)},o=function(t,e){var i,n,r,o;for(i=1,n=arguments.length;i<n;i++)if(o=arguments[i])for(r in o)o.hasOwnProperty(r)&&(t[r]=o[r]);return t},a=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},c=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},s=Array.isArray||$&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},l={a:"[aÀÁÂÃÄÅàáâãäå]",c:"[cÇçćĆčČ]",d:"[dđĐ]",e:"[eÈÉÊËèéêë]",i:"[iÌÍÎÏìíîï]",n:"[nÑñ]",o:"[oÒÓÔÕÕÖØòóôõöø]",s:"[sŠš]",u:"[uÙÚÛÜùúûü]",y:"[yŸÿý]",z:"[zŽž]"};return t}),function(t,e){"function"==typeof define&&define.amd?define("microplugin",e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.MicroPlugin=e()}(this,function(){var t={mixin:function(n){n.plugins={},n.prototype.initializePlugins=function(t){var e,i,n,r=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},o.isArray(t))for(e=0,i=t.length;e<i;e++)"string"==typeof t[e]?r.push(t[e]):(this.plugins.settings[t[e].name]=t[e].options,r.push(t[e].name));else if(t)for(n in t)t.hasOwnProperty(n)&&(this.plugins.settings[n]=t[n],r.push(n));for(;r.length;)this.require(r.shift())},n.prototype.loadPlugin=function(t){var e=this.plugins,i=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');e.requested[t]=!0,e.loaded[t]=i.fn.apply(this,[this.plugins.settings[t]||{}]),e.names.push(t)},n.prototype.require=function(t){var e=this.plugins;if(!this.plugins.loaded.hasOwnProperty(t)){if(e.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');this.loadPlugin(t)}return e.loaded[t]},n.define=function(t,e){n.plugins[t]={name:t,fn:e}}}},o={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}};return t}),function(t,e){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],e):t.Selectize=e(t.jQuery,t.Sifter,t.MicroPlugin)}(this,function(x,l,t){"use strict";var C=function(t,e){if("string"!=typeof e||e.length){var l="string"==typeof e?new RegExp(e,"i"):e,i=function t(e){var i=0;if(3===e.nodeType){var n=e.data.search(l);if(0<=n&&0<e.data.length){var r=e.data.match(l),o=document.createElement("span");o.className="highlight";var s=e.splitText(n),a=(s.splitText(r[0].length),s.cloneNode(!0));o.appendChild(a),s.parentNode.replaceChild(o,s),i=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=t(e.childNodes[c]);return i};return t.each(function(){i(this)})}},n=function(){};n.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(t){for(var e=["on","off","trigger"],i=0;i<e.length;i++)t.prototype[e[i]]=n.prototype[e[i]]};var _=/Mac/.test(navigator.userAgent),b=_?91:17,w=_?18:17,h=function(t){return void 0!==t},S=function(t){return null==t?"":"boolean"==typeof t?t?"1":"0":t+""},a=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},c=function(t){return(t+"").replace(/\$/g,"$$$$")},u=function(t,e){if(!x.isArray(e))return e;var i,n,r={};for(i=0,n=e.length;i<n;i++)e[i].hasOwnProperty(t)&&(r[e[i][t]]=e[i]);return r},e=function(e,i,t){var n,r=e.trigger,o={};for(n in e.trigger=function(){var t=arguments[0];if(-1===i.indexOf(t))return r.apply(e,arguments);o[t]=arguments},t.apply(e,[]),e.trigger=r,o)o.hasOwnProperty(n)&&r.apply(e,o[n])},d=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-t.value.length),e.start=i.text.length-n,e.length=n}return e},k=function(l){var t=function(t){var e,i,n,r,o,s,a,c;(t=t||window.event||{}).metaKey||t.altKey||!1!==l.data("grow")&&(e=l.val(),t.type&&"keydown"===t.type.toLowerCase()&&(n=97<=(i=t.keyCode)&&i<=122||65<=i&&i<=90||48<=i&&i<=57||32===i,46===i||8===i?(c=d(l[0])).length?e=e.substring(0,c.start)+e.substring(c.start+c.length):8===i&&c.start?e=e.substring(0,c.start-1)+e.substring(c.start+1):46===i&&void 0!==c.start&&(e=e.substring(0,c.start)+e.substring(c.start+1)):n&&(s=t.shiftKey,a=String.fromCharCode(t.keyCode),e+=a=s?a.toUpperCase():a.toLowerCase())),r=l.attr("placeholder")||"",!e.length&&r.length&&(e=r),(o=function(t,e){var i=x("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");!function(t,e,i){var n,r,o={};if(i)for(n=0,r=i.length;n<r;n++)o[i[n]]=t.css(i[n]);else o=t.css();e.css(o)}(e,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var n=i.width();return i.remove(),n}(e,l)+4)!==l.width()&&(l.width(o),l.triggerHandler("resize")))};l.on("keydown keyup update blur",t),t()},s=function t(e,i){var n,r,o,s,a,c=this;(r=e[0]).selectize=c,n=(n=window.getComputedStyle?window.getComputedStyle(r,null).getPropertyValue("direction"):r.currentStyle&&r.currentStyle.direction)||e.parents("[dir]:first").attr("dir")||"",x.extend(c,{settings:i,$input:e,tagType:"select"===r.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(n),eventNS:".selectize"+ ++t.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:(o=c.onSearchChange,s=i.loadThrottle,function(){var t=this,e=arguments;window.clearTimeout(a),a=window.setTimeout(function(){o.apply(t,e)},s)})}),c.sifter=new l(this.options,{diacritics:i.diacritics}),x.extend(c.options,u(i.valueField,i.options)),delete c.settings.options,x.extend(c.optgroups,u(i.optgroupValueField,i.optgroups)),delete c.settings.optgroups,c.settings.mode=c.settings.mode||(1===c.settings.maxItems?"single":"multi"),"boolean"!=typeof c.settings.hideSelected&&(c.settings.hideSelected="multi"===c.settings.mode),c.initializePlugins(c.settings.plugins),c.setupCallbacks(),c.setupTemplates(),c.setup()};return n.mixin(s),t.mixin(s),x.extend(s.prototype,{setup:function(){var t,e,i,n,r,o,s,a,c,l,h,u,d,f,p=this,g=p.settings,m=p.eventNS,v=x(window),y=x(document);s=p.settings.mode,a=p.$input.attr("tabindex")||"",c=p.$input.attr("class")||"",t=x("<div>").addClass(g.wrapperClass).addClass(c).addClass(s),e=x("<div>").addClass(g.inputClass).addClass("items").appendTo(t),i=x('<input type="text" autocomplete="off">').appendTo(e).attr("tabindex",a),o=x(g.dropdownParent||t),n=x("<div>").addClass(g.dropdownClass).addClass(c).addClass(s).hide().appendTo(o),r=x("<div>").addClass(g.dropdownContentClass).appendTo(n),t.css({width:p.$input[0].style.width}),p.plugins.names.length&&(l="plugin-"+p.plugins.names.join(" plugin-"),t.addClass(l),n.addClass(l)),(null===g.maxItems||1<g.maxItems)&&1===p.tagType&&p.$input.attr("multiple","multiple"),p.settings.placeholder&&i.attr("placeholder",g.placeholder),p.$wrapper=t,p.$control=e,p.$control_input=i,p.$dropdown=n,p.$dropdown_content=r,n.on("mouseenter","[data-selectable]",function(){return p.onOptionHover.apply(p,arguments)}),n.on("mousedown","[data-selectable]",function(){return p.onOptionSelect.apply(p,arguments)}),u="mousedown",d="*:not(input)",f=function(){return p.onItemSelect.apply(p,arguments)},(h=e).on(u,d,function(t){for(var e=t.target;e&&e.parentNode!==h[0];)e=e.parentNode;return t.currentTarget=e,f.apply(this,[t])}),k(i),e.on({mousedown:function(){return p.onMouseDown.apply(p,arguments)},click:function(){return p.onClick.apply(p,arguments)}}),i.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return p.onKeyDown.apply(p,arguments)},keyup:function(){return p.onKeyUp.apply(p,arguments)},keypress:function(){return p.onKeyPress.apply(p,arguments)},resize:function(){p.positionDropdown.apply(p,[])},blur:function(){return p.onBlur.apply(p,arguments)},focus:function(){return p.onFocus.apply(p,arguments)}}),y.on("keydown"+m,function(t){p.isCmdDown=t[_?"metaKey":"ctrlKey"],p.isCtrlDown=t[_?"altKey":"ctrlKey"],p.isShiftDown=t.shiftKey}),y.on("keyup"+m,function(t){t.keyCode===w&&(p.isCtrlDown=!1),16===t.keyCode&&(p.isShiftDown=!1),t.keyCode===b&&(p.isCmdDown=!1)}),y.on("mousedown"+m,function(t){if(p.isFocused){if(t.target===p.$dropdown[0]||t.target.parentNode===p.$dropdown[0])return!1;p.$control.has(t.target).length||t.target===p.$control[0]||p.blur()}}),v.on(["scroll"+m,"resize"+m].join(" "),function(){p.isOpen&&p.positionDropdown.apply(p,arguments)}),v.on("mousemove"+m,function(){p.ignoreHover=!1}),this.revertSettings={$children:p.$input.children().detach(),tabindex:p.$input.attr("tabindex")},p.$input.attr("tabindex",-1).hide().after(p.$wrapper),x.isArray(g.items)&&(p.setValue(g.items),delete g.items),p.$input[0].validity&&p.$input.on("invalid"+m,function(t){t.preventDefault(),p.isInvalid=!0,p.refreshState()}),p.updateOriginalInput(),p.refreshItems(),p.refreshState(),p.updatePlaceholder(),p.isSetup=!0,p.$input.is(":disabled")&&p.disable(),p.on("change",this.onChange),p.trigger("initialize"),g.preload&&p.onSearchChange("")},setupTemplates:function(){var i=this.settings.labelField,n=this.settings.optgroupLabelField,t={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[n])+"</div>"},option:function(t,e){return'<div class="option">'+e(t[i])+"</div>"},item:function(t,e){return'<div class="item">'+e(t[i])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};this.settings.render=x.extend({},t,this.settings.render)},setupCallbacks:function(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType"};for(t in i)i.hasOwnProperty(t)&&(e=this.settings[i[t]])&&this.on(t,e)},onClick:function(t){this.isFocused||(this.focus(),t.preventDefault())},onMouseDown:function(t){var e=this,i=t.isDefaultPrevented();x(t.target);if(e.isFocused){if(t.target!==e.$control_input[0])return"single"===e.settings.mode?e.isOpen?e.close():e.open():i||e.setActiveItem(null),!1}else i||window.setTimeout(function(){e.focus()},0)},onChange:function(){this.$input.trigger("change")},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){t.target,this.$control_input[0];var e=this;if(e.isLocked)9!==t.keyCode&&t.preventDefault();else{switch(t.keyCode){case 65:if(e.isCmdDown)return void e.selectAll();break;case 27:return void e.close();case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.$activeOption){e.ignoreHover=!0;var i=e.getAdjacentOption(e.$activeOption,1);i.length&&e.setActiveOption(i,!0,!0)}return void t.preventDefault();case 38:if(e.$activeOption){e.ignoreHover=!0;var n=e.getAdjacentOption(e.$activeOption,-1);n.length&&e.setActiveOption(n,!0,!0)}return void t.preventDefault();case 13:return e.isOpen&&e.$activeOption&&e.onOptionSelect({currentTarget:e.$activeOption}),void t.preventDefault();case 37:return void e.advanceSelection(-1,t);case 39:return void e.advanceSelection(1,t);case 9:return void(e.settings.create&&e.createItem()&&t.preventDefault());case 8:case 46:return void e.deleteSelection(t)}(e.isFull()||e.isInputHidden)&&t.preventDefault()}},onKeyUp:function(t){if(this.isLocked)return t&&t.preventDefault();var e=this.$control_input.val()||"";this.lastValue!==e&&(this.lastValue=e,this.onSearchChange(e),this.refreshOptions(),this.trigger("type",e))},onSearchChange:function(e){var i=this,n=i.settings.load;n&&(i.loadedSearches.hasOwnProperty(e)||(i.loadedSearches[e]=!0,i.load(function(t){n.apply(i,[e,t])})))},onFocus:function(t){var e=this;if(e.isFocused=!0,e.isDisabled)return e.blur(),t&&t.preventDefault(),!1;e.ignoreFocus||("focus"===e.settings.preload&&e.onSearchChange(""),e.$activeItems.length||(e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())},onBlur:function(t){var e=this;e.isFocused=!1,e.ignoreFocus||(e.settings.create&&e.settings.createOnBlur&&e.createItem(),e.close(),e.setTextboxValue(""),e.setActiveItem(null),e.setActiveOption(null),e.setCaret(e.items.length),e.refreshState())},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(t){var e,i;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),(i=x(t.currentTarget)).hasClass("create")?this.createItem():(e=i.attr("data-value"))&&(this.lastQuery=null,this.setTextboxValue(""),this.addItem(e),!this.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&this.setActiveOption(this.getOption(e)))},onItemSelect:function(t){this.isLocked||"multi"===this.settings.mode&&(t.preventDefault(),this.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,i=e.$wrapper.addClass("loading");e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||i.removeClass("loading"),e.trigger("load",t)}])},setTextboxValue:function(t){this.$control_input.val(t).triggerHandler("update"),this.lastValue=t},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(n){e(this,["change"],function(){this.clear();for(var t=x.isArray(n)?n:[n],e=0,i=t.length;e<i;e++)this.addItem(t[e])})},setActiveItem:function(t,e){var i,n,r,o,s,a,c,l,h=this;if("single"!==h.settings.mode){if(!(t=x(t)).length)return x(h.$activeItems).removeClass("active"),h.$activeItems=[],void(h.isFocused&&h.showInput());if("mousedown"===(i=e&&e.type.toLowerCase())&&h.isShiftDown&&h.$activeItems.length){for(l=h.$control.children(".active:last"),o=Array.prototype.indexOf.apply(h.$control[0].childNodes,[l[0]]),(s=Array.prototype.indexOf.apply(h.$control[0].childNodes,[t[0]]))<o&&(c=o,o=s,s=c),n=o;n<=s;n++)a=h.$control[0].childNodes[n],-1===h.$activeItems.indexOf(a)&&(x(a).addClass("active"),h.$activeItems.push(a));e.preventDefault()}else"mousedown"===i&&h.isCtrlDown||"keydown"===i&&this.isShiftDown?t.hasClass("active")?(r=h.$activeItems.indexOf(t[0]),h.$activeItems.splice(r,1),t.removeClass("active")):h.$activeItems.push(t.addClass("active")[0]):(x(h.$activeItems).removeClass("active"),h.$activeItems=[t.addClass("active")[0]]);h.hideInput(),this.isFocused||h.focus()}},setActiveOption:function(t,e,i){var n,r,o,s,a,c=this;c.$activeOption&&c.$activeOption.removeClass("active"),c.$activeOption=null,(t=x(t)).length&&(c.$activeOption=t.addClass("active"),!e&&h(e)||(n=c.$dropdown_content.height(),r=c.$activeOption.outerHeight(!0),e=c.$dropdown_content.scrollTop()||0,a=(s=o=c.$activeOption.offset().top-c.$dropdown_content.offset().top+e)-n+r,n+e<o+r?c.$dropdown_content.stop().animate({scrollTop:a},i?c.settings.scrollDuration:0):o<e&&c.$dropdown_content.stop().animate({scrollTop:s},i?c.settings.scrollDuration:0)))},selectAll:function(){"single"!==this.settings.mode&&(this.$activeItems=Array.prototype.slice.apply(this.$control.children(":not(input)").addClass("active")),this.$activeItems.length&&(this.hideInput(),this.close()),this.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0))},blur:function(){this.$control_input.trigger("blur")},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e={field:e}),{fields:t.searchField,conjunction:t.searchConjunction,sort:e}},search:function(t){var e,i,n,r=this.settings,o=this.getSearchOptions();if(r.score&&"function"!=typeof(n=this.settings.score.apply(this,[t])))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==this.lastQuery?(this.lastQuery=t,i=this.sifter.search(t,x.extend(o,{score:n})),this.currentResults=i):i=x.extend(!0,{},this.currentResults),r.hideSelected)for(e=i.items.length-1;0<=e;e--)-1!==this.items.indexOf(S(i.items[e].id))&&i.items.splice(e,1);return i},refreshOptions:function(t){var e,i,n,r,o,s,a,c,l,h,u,d,f,p,g,m;void 0===t&&(t=!0);var v=this,y=v.$control_input.val(),_=v.search(y),b=v.$dropdown_content,w=v.$activeOption&&S(v.$activeOption.attr("data-value"));if(r=_.items.length,"number"==typeof v.settings.maxOptions&&(r=Math.min(r,v.settings.maxOptions)),o={},v.settings.optgroupOrder)for(s=v.settings.optgroupOrder,e=0;e<s.length;e++)o[s[e]]=[];else s=[];for(e=0;e<r;e++)for(a=v.options[_.items[e].id],c=v.render("option",a),l=a[v.settings.optgroupField]||"",i=0,n=(h=x.isArray(l)?l:[l])&&h.length;i<n;i++)l=h[i],v.optgroups.hasOwnProperty(l)||(l=""),o.hasOwnProperty(l)||(o[l]=[],s.push(l)),o[l].push(c);for(u=[],e=0,r=s.length;e<r;e++)l=s[e],v.optgroups.hasOwnProperty(l)&&o[l].length?(d=v.render("optgroup_header",v.optgroups[l])||"",d+=o[l].join(""),u.push(v.render("optgroup",x.extend({},v.optgroups[l],{html:d})))):u.push(o[l].join(""));if(b.html(u.join("")),v.settings.highlight&&_.query.length&&_.tokens.length)for(e=0,r=_.tokens.length;e<r;e++)C(b,_.tokens[e].regex);if(!v.settings.hideSelected)for(e=0,r=v.items.length;e<r;e++)v.getOption(v.items[e]).addClass("selected");(f=v.settings.create&&_.query.length)&&(b.prepend(v.render("option_create",{input:y})),m=x(b[0].childNodes[0])),v.hasOptions=0<_.items.length||f,v.hasOptions?(0<_.items.length?((g=w&&v.getOption(w))&&g.length?p=g:"single"===v.settings.mode&&v.items.length&&(p=v.getOption(v.items[0])),p&&p.length||(p=m&&!v.settings.addPrecedence?v.getAdjacentOption(m,1):b.find("[data-selectable]:first"))):p=m,v.setActiveOption(p),t&&!v.isOpen&&v.open()):(v.setActiveOption(null),t&&v.isOpen&&v.close())},addOption:function(t){var e,i,n;if(x.isArray(t))for(e=0,i=t.length;e<i;e++)this.addOption(t[e]);else(n=S(t[this.settings.valueField]))&&!this.options.hasOwnProperty(n)&&(this.userOptions[n]=!0,this.options[n]=t,this.lastQuery=null,this.trigger("option_add",n,t))},addOptionGroup:function(t,e){this.optgroups[t]=e,this.trigger("optgroup_add",t,e)},updateOption:function(t,e){var i,n,r,o,s,a,c=this;if(t=S(t),r=S(e[c.settings.valueField]),c.options.hasOwnProperty(t)){if(!r)throw new Error("Value must be set in option data");r!==t&&(delete c.options[t],-1!==(o=c.items.indexOf(t))&&c.items.splice(o,1,r)),c.options[r]=e,s=c.renderCache.item,a=c.renderCache.option,h(s)&&(delete s[t],delete s[r]),h(a)&&(delete a[t],delete a[r]),-1!==c.items.indexOf(r)&&(i=c.getItem(t),n=x(c.render("item",e)),i.hasClass("active")&&n.addClass("active"),i.replaceWith(n)),c.isOpen&&c.refreshOptions(!1)}},removeOption:function(t){t=S(t),delete this.userOptions[t],delete this.options[t],this.lastQuery=null,this.trigger("option_remove",t),this.removeItem(t)},clearOptions:function(){this.loadedSearches={},this.userOptions={},this.options=this.sifter.items={},this.lastQuery=null,this.trigger("option_clear"),this.clear()},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,e){var i=this.$dropdown.find("[data-selectable]"),n=i.index(t)+e;return 0<=n&&n<i.length?i.eq(n):x()},getElementWithValue:function(t,e){if(t=S(t))for(var i=0,n=e.length;i<n;i++)if(e[i].getAttribute("data-value")===t)return x(e[i]);return x()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItem:function(s){e(this,["change"],function(){var t,e,i,n,r=this,o=r.settings.mode;s=S(s),-1===r.items.indexOf(s)?r.options.hasOwnProperty(s)&&("single"===o&&r.clear(),"multi"===o&&r.isFull()||(t=x(r.render("item",r.options[s])),r.items.splice(r.caretPos,0,s),r.insertAtCaret(t),r.refreshState(),r.isSetup&&(i=r.$dropdown_content.find("[data-selectable]"),e=r.getOption(s),n=r.getAdjacentOption(e,1).attr("data-value"),r.refreshOptions(r.isFocused&&"single"!==o),n&&r.setActiveOption(r.getOption(n)),!i.length||null!==r.settings.maxItems&&r.items.length>=r.settings.maxItems?r.close():r.positionDropdown(),r.updatePlaceholder(),r.trigger("item_add",s,t),r.updateOriginalInput()))):"single"===o&&r.close()})},removeItem:function(t){var e,i,n,r=this;e="object"===_typeof(t)?t:r.getItem(t),t=S(e.attr("data-value")),-1!==(i=r.items.indexOf(t))&&(e.remove(),e.hasClass("active")&&(n=r.$activeItems.indexOf(e[0]),r.$activeItems.splice(n,1)),r.items.splice(i,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(t)&&r.removeOption(t),i<r.caretPos&&r.setCaret(r.caretPos-1),r.refreshState(),r.updatePlaceholder(),r.updateOriginalInput(),r.positionDropdown(),r.trigger("item_remove",t))},createItem:function(){var i=this,t=x.trim(i.$control_input.val()||""),n=i.caretPos;if(!t.length)return!1;i.lock();var e,r,o="function"==typeof i.settings.create?this.settings.create:function(t){var e={};return e[i.settings.labelField]=t,e[i.settings.valueField]=t,e},s=(r=!(e=function(t){if(i.unlock(),t&&"object"===_typeof(t)){var e=S(t[i.settings.valueField]);e&&(i.setTextboxValue(""),i.addOption(t),i.setCaret(n),i.addItem(e),i.refreshOptions("single"!==i.settings.mode))}}),function(){r||(r=!0,e.apply(this,arguments))}),a=o.apply(this,[t,s]);return void 0!==a&&s(a),!0},refreshItems:function(){if(this.lastQuery=null,this.isSetup)for(var t=0;t<this.items.length;t++)this.addItem(this.items);this.refreshState(),this.updateOriginalInput()},refreshState:function(){var t=this.isRequired&&!this.items.length;t||(this.isInvalid=!1),this.$control_input.prop("required",t),this.refreshClasses()},refreshClasses:function(){var t=this,e=t.isFull(),i=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",i).toggleClass("full",e).toggleClass("not-full",!e).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!x.isEmptyObject(t.options)).toggleClass("has-items",0<t.items.length),t.$control_input.data("grow",!e&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(){var t,e,i;if("select"===this.$input[0].tagName.toLowerCase()){for(i=[],t=0,e=this.items.length;t<e;t++)i.push('<option value="'+a(this.items[t])+'" selected="selected"></option>');i.length||this.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),this.$input.html(i.join(""))}else this.$input.val(this.getValue());this.isSetup&&this.trigger("change",this.$input.val())},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length&&this.settings.hidePlaceholder?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update")}},open:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),t.$dropdown.css({visibility:"hidden",display:"block"}),t.positionDropdown(),t.$dropdown.css({visibility:"visible"}),t.trigger("dropdown_open",t.$dropdown))},close:function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&t.hideInput(),t.isOpen=!1,t.$dropdown.hide(),t.setActiveOption(null),t.refreshState(),e&&t.trigger("dropdown_close",t.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t.outerWidth(),top:e.top,left:e.left})},clear:function(){this.items.length&&(this.$control.children(":not(input)").remove(),this.items=[],this.setCaret(0),this.updatePlaceholder(),this.updateOriginalInput(),this.refreshState(),this.showInput(),this.trigger("clear"))},insertAtCaret:function(t){var e=Math.min(this.caretPos,this.items.length);0===e?this.$control.prepend(t):x(this.$control[0].childNodes[e]).before(t),this.setCaret(e+1)},deleteSelection:function(t){var e,i,n,r,o,s,a,c,l,h=this;if(!h.settings.disableDelete){if(n=t&&8===t.keyCode?-1:1,r=d(h.$control_input[0]),h.$activeOption&&!h.settings.hideSelected&&(a=h.getAdjacentOption(h.$activeOption,-1).attr("data-value")),o=[],h.$activeItems.length){for(l=h.$control.children(".active:"+(0<n?"last":"first")),s=h.$control.children(":not(input)").index(l),0<n&&s++,e=0,i=h.$activeItems.length;e<i;e++)o.push(x(h.$activeItems[e]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(h.isFocused||"single"===h.settings.mode)&&h.items.length&&(n<0&&0===r.start&&0===r.length?o.push(h.items[h.caretPos-1]):0<n&&r.start===h.$control_input.val().length&&o.push(h.items[h.caretPos]));if(!o.length||"function"==typeof h.settings.onDelete&&!1===h.settings.onDelete.apply(h,[o]))return!1;for(void 0!==s&&h.setCaret(s);o.length;)h.removeItem(o.pop());return h.showInput(),h.positionDropdown(),h.refreshOptions(!0),a&&(c=h.getOption(a)).length&&h.setActiveOption(c),!0}},advanceSelection:function(t,e){var i,n,r,o,s,a=this;a.settings.disableCaret||0!==t&&(a.rtl&&(t*=-1),i=0<t?"last":"first",n=d(a.$control_input[0]),a.isFocused&&!a.isInputHidden?(o=a.$control_input.val().length,(t<0?0===n.start&&0===n.length:n.start===o)&&!o&&a.advanceCaret(t,e)):(s=a.$control.children(".active:"+i)).length&&(r=a.$control.children(":not(input)").index(s),a.setActiveItem(null),a.setCaret(0<t?r+1:r)))},advanceCaret:function(t,e){var i,n;this.settings.disableCaret||0!==t&&(i=0<t?"next":"prev",this.isShiftDown?(n=this.$control_input[i]()).length&&(this.hideInput(),this.setActiveItem(n),e&&e.preventDefault()):this.setCaret(this.caretPos+t))},setCaret:function(t){var e,i,n,r;for(t="single"===this.settings.mode?this.items.length:Math.max(0,Math.min(this.items.length,t)),e=0,i=(n=this.$control.children(":not(input)")).length;e<i;e++)r=x(n[e]).detach(),e<t?this.$control_input.before(r):this.$control.append(r);this.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.isDisabled=!0,this.lock()},enable:function(){this.$input.prop("disabled",!1),this.isDisabled=!1,this.unlock()},destroy:function(){var t=this.eventNS,e=this.revertSettings;this.trigger("destroy"),this.off(),this.$wrapper.remove(),this.$dropdown.remove(),this.$input.html("").append(e.$children).removeAttr("tabindex").attr({tabindex:e.tabindex}).show(),x(window).off(t),x(document).off(t),x(document.body).off(t),delete this.$input[0].selectize},render:function(t,e){var i,n,r="",o=!1,s=/^[\t ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return"option"!==t&&"item"!==t||(o=!!(i=S(e[this.settings.valueField]))),o&&(h(this.renderCache[t])||(this.renderCache[t]={}),this.renderCache[t].hasOwnProperty(i))?this.renderCache[t][i]:(r=this.settings.render[t].apply(this,[e,a]),"option"!==t&&"option_create"!==t||(r=r.replace(s,"<$1 data-selectable")),"optgroup"===t&&(n=e[this.settings.optgroupValueField]||"",r=r.replace(s,'<$1 data-group="'+c(a(n))+'"')),"option"!==t&&"item"!==t||(r=r.replace(s,'<$1 data-value="'+c(a(i||""))+'"')),o&&(this.renderCache[t][i]=r),r)}}),s.count=0,s.defaults={plugins:[],delimiter:",",persist:!0,diacritics:!0,create:!1,createOnBlur:!1,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,preload:!1,scrollDuration:60,loadThrottle:300,dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",optgroupOrder:null,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,disableDelete:!1,disableCaret:!1,hidePlaceholder:!0,render:{}},x.fn.selectize=function(r){var o=x.fn.selectize.defaults,a=x.extend({},o,r),u=a.dataAttr,d=a.labelField,f=a.valueField,p=a.optgroupField,g=a.optgroupLabelField,m=a.optgroupValueField;return this.each(function(){if(!this.selectize){var t,e=x(this),i=this.tagName.toLowerCase(),n={placeholder:e.children('option[value=""]').text()||e.attr("placeholder"),options:{},optgroups:{},items:[]};"select"===i?function(t,s){var e,i,n,r,o=0,a=s.options,c=function(t){var e=u&&t.attr(u);return"string"==typeof e&&e.length?JSON.parse(e):null},l=function(t,e){var i,n;(i=(t=x(t)).attr("value")||"").length&&(a.hasOwnProperty(i)?e&&(a[i].optgroup?x.isArray(a[i].optgroup)?a[i].optgroup.push(e):a[i].optgroup=[a[i].optgroup,e]:a[i].optgroup=e):((n=c(t)||{})[d]=n[d]||t.text(),n[f]=n[f]||i,n[p]=n[p]||e,n.$order=++o,a[i]=n,t.is(":selected")&&s.items.push(i)))},h=function(t){var e,i,n,r,o;for((n=(t=x(t)).attr("label"))&&((r=c(t)||{})[g]=n,r[m]=n,s.optgroups[n]=r),e=0,i=(o=x("option",t)).length;e<i;e++)l(o[e],n)};for(s.maxItems=t.attr("multiple")?null:1,e=0,i=(r=t.children()).length;e<i;e++)"optgroup"===(n=r[e].tagName.toLowerCase())?h(r[e]):"option"===n&&l(r[e])}(e,n):function(t,e){var i,n,r,o,s=x.trim(t.val()||"");if(s.length){for(i=0,n=(r=s.split(a.delimiter)).length;i<n;i++)(o={})[d]=r[i],o[f]=r[i],e.options[r[i]]=o;e.items=r}}(e,n),t=new s(e,x.extend(!0,{},o,n,r)),e.data("selectize",t),e.addClass("selectized")}})},x.fn.selectize.defaults=s.defaults,s});var EnjoyHint=function(t){var f,p=this,i=$.extend({onStart:function(){},onEnd:function(){},onSkip:function(){},onNext:function(){}},t),n=[],g=0;$body=$("body");var e=function(t){t.preventDefault()},r=function(){$(".enjoyhint").remove(),$body.css({overflow:"auto"}),$(document).off("touchmove",e)};p.clear=function(){var t=$(".enjoyhint_next_btn"),e=$(".enjoyhint_skip_btn");t.removeClass(p.nextUserClass),t.text("Next"),e.removeClass(p.skipUserClass),e.text("Skip")};var o=function u(){if(!n||!n[g])return $body.enjoyhint("hide"),i.onEnd(),void r();i.onNext();var t=$(".enjoyhint");t.removeClass("enjoyhint-step-"+g),t.removeClass("enjoyhint-step-"+(g+1)),t.addClass("enjoyhint-step-"+(g+1));var d=n[g];d.onBeforeStart&&"function"==typeof d.onBeforeStart&&d.onBeforeStart();var e=d.timeout||0;setTimeout(function(){if(!d.selector)for(var t in d)d.hasOwnProperty(t)&&t.split(" ")[1]&&(d.selector=t.split(" ")[1],d.event=t.split(" ")[0],"next"!=t.split(" ")[0]&&"auto"!=t.split(" ")[0]&&"custom"!=t.split(" ")[0]||(d.event_type=t.split(" ")[0]),d.description=d[t]);setTimeout(function(){p.clear()},250),$(document.body).scrollTop(d.selector,d.scrollAnimationSpeed||250,{offset:-100}),setTimeout(function(){var t=$(d.selector),e=m(d.event);if($body.enjoyhint("show"),$body.enjoyhint("hide_next"),f=t,d.event_selector&&(f=$(d.event_selector)),d.event_type||"key"!=d.event||t.keydown(function(t){t.which==d.keyCode&&(g++,u())}),1==d.showNext&&$body.enjoyhint("show_next"),0==d.showSkip?$body.enjoyhint("hide_skip"):$body.enjoyhint("show_skip"),d.showSkip,d.nextButton){var i=$(".enjoyhint_next_btn");i.addClass(d.nextButton.className||""),i.html(d.nextButton.text||"Next"),p.nextUserClass=d.nextButton.className}if(d.skipButton){var n=$(".enjoyhint_skip_btn");n.addClass(d.skipButton.className||""),n.html(d.skipButton.text||"Skip"),p.skipUserClass=d.skipButton.className}if(d.event_type)switch(d.event_type){case"auto":return t[d.event](),d.event,g++,void u();case"custom":v(d.event,function(){g++,y(d.event),u()});break;case"next":$body.enjoyhint("show_next")}else f.on(e,function(t){d.keyCode&&t.keyCode!=d.keyCode||(g++,$(this).off(e),u())});var r=Math.max(t.outerWidth(),t.outerHeight()),o=d.radius||Math.round(r/2)+5,s=t.offset(),a=t.outerWidth(),c=t.outerHeight(),l={x:s.left+Math.round(a/2),y:s.top+Math.round(c/2)-$(document).scrollTop()},h={enjoyHintElementSelector:d.selector,center_x:l.x,center_y:l.y,text:d.description,top:d.top,bottom:d.bottom,left:d.left,right:d.right,margin:d.margin,scroll:d.scroll};d.shape&&"circle"==d.shape?(h.shape="circle",h.radius=o):(h.radius=0,h.width=a+0,h.height=c+0),$body.enjoyhint("render_label_with_shape",h,p.stop)},d.scrollAnimationSpeed+20||270)},e)},s=function(){g++,o()},a=function(){var t=n[g],e=$(t.selector);y(t.event),e.off(m(t.event)),r()},m=function(t,e){return t+(e?"custom":"")+".enjoy_hint"},v=function(t,e){$body.on(m(t,!0),e)},y=function(t){$body.off(m(t,!0))};window.addEventListener("resize",function(){null!=f&&$body.enjoyhint("redo_events_near_rect",f[0].getBoundingClientRect())}),p.stop=function(){a()},p.reRunScript=function(t){g=t,o()},p.runScript=function(){g=0,i.onStart(),o()},p.resumeScript=function(){o()},p.setCurrentStep=function(t){g=t},p.getCurrentStep=function(){return g},p.trigger=function(t){switch(t){case"next":s();break;case"skip":a()}},p.setScript=function(t){t&&(n=t)},p.set=function(t){p.setScript(t)},p.setSteps=function(t){p.setScript(t)},p.run=function(){p.runScript()},p.resume=function(){p.resumeScript()},$(".enjoyhint")&&$(".enjoyhint").remove(),$body.css({overflow:"hidden"}),$(document).on("touchmove",e),$body.enjoyhint({onNextClick:function(){s()},onSkipClick:function(){i.onSkip(),a()}})};CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,r){return i<2*r&&(r=i/2),n<2*r&&(r=n/2),this.beginPath(),this.moveTo(t+r,e),this.arcTo(t+i,e,t+i,e+n,r),this.arcTo(t+i,e+n,t,e+n,r),this.arcTo(t,e+n,t,e,r),this.arcTo(t,e,t+i,e,r),this.closePath(),this},function(W){var G,_,b,w,x,C,S,k=window.innerWidth,T=window.innerHeight,e={init:function(h){return this.each(function(){this.enjoyhint_obj={},(G=this.enjoyhint_obj).resetComponentStuff=function(){S=C=x=w=b=_=null,k=window.innerWidth,T=window.innerHeight};var t=W(this);function c(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e)i.setAttribute(n,e[n]);return i}G.options=jQuery.extend({onNextClick:function(){},onSkipClick:function(){},animation_time:800},h),G.gcl={chooser:"enjoyhint"},G.cl={enjoy_hint:"enjoyhint",hide:"enjoyhint_hide",disable_events_element:"enjoyhint_disable_events",btn:"enjoyhint_btn",skip_btn:"enjoyhint_skip_btn",close_btn:"enjoyhint_close_btn",next_btn:"enjoyhint_next_btn",main_canvas:"enjoyhint_canvas",main_svg:"enjoyhint_svg",svg_wrapper:"enjoyhint_svg_wrapper",svg_transparent:"enjoyhint_svg_transparent",kinetic_container:"kinetic_container"},G.canvas_size={w:1.4*W(window).width(),h:1.4*W(window).height()};G.enjoyhint=W("<div>",{class:G.cl.enjoy_hint+" "+G.cl.svg_transparent}).appendTo(t),G.enjoyhint_svg_wrapper=W("<div>",{class:G.cl.svg_wrapper+" "+G.cl.svg_transparent}).appendTo(G.enjoyhint),G.$stage_container=W('<div id="'+G.cl.kinetic_container+'">').appendTo(G.enjoyhint),G.$canvas=W('<canvas id="enj_canvas" width="'+G.canvas_size.w+'" height="'+G.canvas_size.h+'" class="'+G.cl.main_canvas+'">').appendTo(G.enjoyhint),G.$svg=W('<svg width="'+G.canvas_size.w+'" height="'+G.canvas_size.h+'" class="'+G.cl.main_canvas+" "+G.cl.main_svg+'">').appendTo(G.enjoyhint_svg_wrapper);var e=W(c("defs")),i=W(c("marker",{id:"arrowMarker",viewBox:"0 0 36 21",refX:"21",refY:"10",markerUnits:"strokeWidth",orient:"auto",markerWidth:"16",markerHeight:"12"})),n=W(c("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:2",d:"M0,0 c30,11 30,9 0,20"}));e.append(i.append(n)).appendTo(G.$svg),G.kinetic_stage=new Kinetic.Stage({container:G.cl.kinetic_container,width:G.canvas_size.w,height:G.canvas_size.h,scaleX:1}),G.layer=new Kinetic.Layer,G.rect=new Kinetic.Rect({fill:"rgba(5,43,62,.9)",width:G.canvas_size.w,height:G.canvas_size.h});var r=W("<div>",{class:G.cl.disable_events_element}).appendTo(G.enjoyhint),o=r.clone().appendTo(G.enjoyhint),s=r.clone().appendTo(G.enjoyhint),a=r.clone().appendTo(G.enjoyhint),l=function(t){t.stopImmediatePropagation()};W("button").focusout(l),r.click(l),o.click(l),s.click(l),a.click(l),G.$skip_btn=W("<div>",{class:G.cl.skip_btn}).appendTo(G.enjoyhint).html("Skip").click(function(t){G.hide(),G.options.onSkipClick()}),G.$next_btn=W("<div>",{class:G.cl.next_btn}).appendTo(G.enjoyhint).html("Next").click(function(t){G.options.onNextClick()}),G.$close_btn=W("<div>",{class:G.cl.close_btn}).appendTo(G.enjoyhint).html("").click(function(t){G.hide(),G.options.onSkipClick()}),G.$canvas.mousedown(function(t){W("canvas").css({left:"4000px"});var e=document.elementFromPoint(t.clientX,t.clientY);return W("canvas").css({left:"0px"}),W(e).click(),!1});G.shape=new Kinetic.Shape({radius:0,center_x:-130,center_y:-130,width:0,height:0,sceneFunc:function(t){var e=this.getContext("2d")._context,i=(this.pos,e.globalCompositeOperation);e.globalCompositeOperation="destination-out",e.beginPath();var n=this.attrs.center_x-Math.round(this.attrs.width/2),r=this.attrs.center_y-Math.round(this.attrs.height/2);e.roundRect(n,r,this.attrs.width,this.attrs.height,this.attrs.radius),e.fillStyle="red",e.fill(),e.globalCompositeOperation=i}}),G.shape.radius=0,G.layer.add(G.rect),G.layer.add(G.shape),G.kinetic_stage.add(G.layer),W(window).on("resize",function(){if(!W(G.stepData.enjoyHintElementSelector).is(":visible"))return G.stopFunction(),void W(window).off("resize");window.innerWidth,window.innerHeight;var t=W(G.stepData.enjoyHintElementSelector)[0].getBoundingClientRect();G.shape.attrs.center_x=Math.round(t.left+t.width/2),G.shape.attrs.center_y=Math.round(t.top+t.height/2),G.shape.attrs.width=t.width+11,G.shape.attrs.height=t.height+11;var e=window.innerWidth,i=window.innerHeight,n=e/k,r=i/T;if(G.kinetic_stage.setAttr("width",k*n),G.kinetic_stage.setAttr("height",T*r),null!=G.stepData){if(window.innerWidth,window.innerHeight,C||(C=G.shape.attrs.center_x,G.shape.attrs.center_y),!w){w=[];var o=W("#enjoyhint_arrpw_line").attr("d");w.push(o.substr(1).split(",")[0]),w.push(o.substr(o.indexOf("Q")+1).split(",")[0]),w.push(o.split(" ")[2].split(",")[0]),(x=[]).push(o.split(",")[1].split(" ")[0]),x.push(o.split(",")[2].split(" ")[0]),x.push(o.split(",")[3])}var s=W(".enjoy_hint_label");_||(_=s[0].getBoundingClientRect().left,b=s[0].getBoundingClientRect().top);var a=W(".enjoyhint_skip_btn");S||(S=a[0].getBoundingClientRect().left,a[0].getBoundingClientRect().top),s.css("left",window.innerWidth/2-s.outerWidth()/2);var c=s[0].getBoundingClientRect();if(window.innerWidth<640)W("#enjoyhint_arrpw_line").hide(),s.css("top",window.innerHeight/2-s.outerHeight()/2);else{var l,h,u,d;W("#enjoyhint_arrpw_line").show(),s.css("top",b);var f=c.left+c.width/2<G.shape.attrs.center_x,p=c.top+c.height/2<G.shape.attrs.center_y;d=window.innerWidth<900?(l=Math.round(c.left+(c.width/2+15)*(c.left+c.width/2<G.shape.attrs.center_x?1:-1)),u=Math.round(c.top+c.height*(c.top+c.height/2<G.shape.attrs.center_y?1:-1)),h=Math.round(G.shape.attrs.center_x+(G.shape.attrs.radius+15)*(f?-1:1)),Math.round(G.shape.attrs.center_y)):(l=Math.round(c.left+c.width/2+(c.width/2+15)*(f?1:-1)),u=Math.round(c.top+c.height/2),h=Math.round(G.shape.attrs.center_x),Math.round(G.shape.attrs.center_y+(G.shape.attrs.height/2+15)*(p?-1:1)));var g=l<h?h:l,m=u<d?u:d;Math.abs(c.left+c.width/2-G.shape.attrs.center_x)<200&&(g=l=h=c.left+c.width/2,m=u=c.top,console.log("ok")),window.innerWidth<900&&(g=l<h?l:h,m=u<d?d:u);var v="M%d1,%d2 Q%d3,%d4 %d5,%d6".replace("%d1",l).replace("%d2",u).replace("%d3",g).replace("%d4",m).replace("%d5",h).replace("%d6",d);W("#enjoyhint_arrpw_line")[0].setAttribute("d",v)}var y=+S+(G.shape.attrs.center_x-C)/2;a.css("left",y<15?15:y),a.css("top",c.top+c.height+20)}G.rect=new Kinetic.Rect({fill:"rgba(0,0,0,0.8)",width:window.innerWidth,height:window.innerHeight}),G.layer.removeChildren(),G.layer.add(G.rect),G.layer.add(G.shape),G.layer.draw(),G.kinetic_stage.draw()});G.enjoyhint;return G.show=function(){G.enjoyhint.removeClass(G.cl.hide)},G.hide=function(){G.enjoyhint.addClass(G.cl.hide),new Kinetic.Tween({node:G.shape,duration:.002,center_x:-130,center_y:-130}).play()},G.hide(),G.hideNextBtn=function(){G.$next_btn.addClass(G.cl.hide),G.nextBtn="hide"},G.showNextBtn=function(){G.$next_btn.removeClass(G.cl.hide),G.nextBtn="show"},G.hideSkipBtn=function(){G.$skip_btn.addClass(G.cl.hide)},G.showSkipBtn=function(){G.$skip_btn.removeClass(G.cl.hide)},G.renderCircle=function(t){var e=t.r||0,i=t.x||0,n=t.y||0;new Kinetic.Tween({node:G.shape,duration:.2,center_x:i,center_y:n,width:2*e,height:2*e,radius:e}).play();var r=i-e,o=i+e,s=n-e,a=n+e;return{x:i,y:n,left:r,right:o,top:s,bottom:a,conn:{left:{x:r-20,y:n},right:{x:o+20,y:n},top:{x:i,y:s-20},bottom:{x:i,y:a+20}}}},G.renderRect=function(t,e){var i=t.r||0,n=t.x||0,r=t.y||0,o=t.w||0,s=t.h||0;new Kinetic.Tween({node:G.shape,duration:e,center_x:n,center_y:r,width:o,height:s,radius:i}).play();var a=Math.round(o/2),c=Math.round(s/2),l=n-a,h=n+a,u=r-c,d=r+c;return{x:n,y:r,left:l,right:h,top:u,bottom:d,conn:{left:{x:l-20,y:r},right:{x:h+20,y:r},top:{x:n,y:u-20},bottom:{x:n,y:d+20}}}},G.renderLabel=function(t){var e=t.x||0;G.originalElementX=e;var i=t.y||0,n=(t.text,G.getLabelElement({x:e,y:i,text:t.text})),r=n.width(),o=n.height(),s=n.offset().left,a=n.offset().left+r,c=n.offset().top-W(document).scrollTop(),l=n.offset().top+o,h={x:s-10,y:c+Math.round(o/2)},u={x:a+10,y:c+Math.round(o/2)},d={x:s+Math.round(r/2),y:c-10},f={x:s+Math.round(r/2),y:l+10};return n.detach(),setTimeout(function(){W("#enjoyhint_label").remove(),n.appendTo(G.enjoyhint)},G.options.animation_time/2),{label:n,left:s,right:a,top:c,bottom:l,conn:{left:h,right:u,top:d,bottom:f}}},G.renderArrow=function(t){if(640<=window.innerWidth){var e=t.x_from||0,i=t.y_from||0,n=t.x_to||0,r=t.y_to||0,o=t.by_top_side,s=0,a=0;s=o?r<=i?(a=r,e):(a=i,n):r<=i?(a=i,n):(a=r,e)}t.text;G.enjoyhint.addClass(G.cl.svg_transparent),setTimeout(function(){W("#enjoyhint_arrpw_line").remove();var t="M"+e+","+i+" Q"+s+","+a+" "+n+","+r;G.$svg.append(c("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:3","marker-end":"url(#arrowMarker)",d:t,id:"enjoyhint_arrpw_line"})),G.enjoyhint.removeClass(G.cl.svg_transparent)},G.options.animation_time/2)},G.getLabelElement=function(t){return W("<div>",{class:"enjoy_hint_label",id:"enjoyhint_label"}).css({top:t.y+"px",left:t.x+"px"}).html(t.text).appendTo(G.enjoyhint)},G.disableEventsNearRect=function(t){r.css({top:"0",left:"0"}).height(t.top),o.css({top:t.bottom+"px",left:"0"}),s.css({top:"0",left:"0px"}).width(t.left),a.css({top:"0",left:t.right+"px"})},jQuery.event.special.destroyed={remove:function(t){t.handler&&t.handler()}},G.renderLabelWithShape=function(t){G.stepData=t;var e=function t(e){return"MD-DIALOG"===e.tagName?e:void 0===e.tagName?null:t(W(e).parent()[0])}(W(G.stepData.enjoyHintElementSelector)[0]);null!=e&&W(e).on("dialogClosing",function(){G.stopFunction()}),G.resetComponentStuff();var i=t.shape||"rect",n={},r=0,o=0,s=t.top||0,a=t.bottom||0,c=t.left||0,l=t.right||0;switch(i){case"circle":r=o=t.radius;var h=(p={top:t.center_y-o+s,bottom:t.center_y+o-a,left:t.center_x-r+c,right:t.center_x+r-l}).right-p.left,u=p.bottom-p.top;t.radius=Math.round(Math.min(h,u)/2),r=o=Math.round(t.radius/2);var d=Math.round(h/2),f=Math.round(u/2);t.center_x=p.left+d,t.center_y=p.top+f,n=G.renderCircle({x:t.center_x,y:t.center_y,r:t.radius});break;case"rect":r=Math.round(t.width/2),o=Math.round(t.height/2);var p={top:t.center_y-o+s,bottom:t.center_y+o-a,left:t.center_x-r+c,right:t.center_x+r-l};t.width=p.right-p.left,t.height=p.bottom-p.top,r=Math.round(t.width/2),o=Math.round(t.height/2),t.center_x=p.left+r,t.center_y=p.top+o,n=G.renderRect({x:t.center_x,y:t.center_y,w:t.width,h:t.height,r:t.radius},.2)}var g=G.enjoyhint.width(),m=G.enjoyhint.height(),v=G.getLabelElement({x:0,y:0,text:t.text}),y=v.outerWidth(),_=v.outerHeight();v.remove();var b=t.center_y-o,w=m-(t.center_y+o),x=(t.center_x,t.center_x,t.center_x,t.center_x,150+_+40),C=o+150,S="top"==(m-t.center_y<t.center_y?"top":"bottom")?t.center_y-C-_:t.center_y+C,k=window.innerWidth/2-y/2;b<x&&w<x&&(S=t.center_y+40),window.innerWidth;var T=G.renderLabel({x:k,y:S,text:t.text}),K=k+Math.round((y-G.$next_btn.width())/2);G.$next_btn.css({left:K,top:S+_+20});var P=k+G.$next_btn.width()+10;"hide"==G.nextBtn&&(P=k),G.$skip_btn.css({left:P,top:S+_+20}),G.$close_btn.css({right:10,top:10}),G.disableEventsNearRect({top:n.top,bottom:n.bottom,left:n.left,right:n.right});var A=!1,M="left",E="left",$=T.left<=n.x&&T.right>=n.x,O=T.right<n.x,I=(T.left,n.x,T.right,n.left,T.left,n.right,T.bottom<n.top),D=T.top>n.bottom,F=T.bottom>=n.y&&T.top<=n.y,j=T.bottom<=n.y&&!I,N=T.top>=n.y&&!D;function L(t,e,i){M=t,E=e,A=i}function R(t,e,i,n,r){var o=[];(o=I?t:j?e:F?i:N?n:r)&&L(o[0],o[1],o[2])}if($)if(I)L("bottom","top","top");else{if(!D)return;L("top","bottom","bottom")}else O?R(["right","top","top"],["bottom","left","bottom"],["right","left","top"],["top","left","top"],["right","bottom","bottom"]):R(["left","top","top"],["bottom","right","bottom"],["left","right","top"],["top","right","top"],["left","bottom","bottom"]);var z=T.conn[M],B=n.conn[E],H="top"==A;G.renderArrow({x_from:z.x,y_from:z.y,x_to:window.innerWidth<640?n.left+(0<n.left):B.x,y_to:window.innerWidth<640?n.conn.left.y:B.y,by_top_side:H})},G.clear=function(){G.ctx.clearRect(0,0,3e3,2e3)},this})},set:function(t){return this.each(function(){this.enjoyhint_obj.setValue(t)}),this},show:function(){return this.each(function(){this.enjoyhint_obj.show()}),this},hide:function(){return this.each(function(){this.enjoyhint_obj.hide()}),this},hide_next:function(){return this.each(function(){this.enjoyhint_obj.hideNextBtn()}),this},show_next:function(){return this.each(function(){this.enjoyhint_obj.showNextBtn()}),this},hide_skip:function(){return this.each(function(){this.enjoyhint_obj.hideSkipBtn()}),this},show_skip:function(){return this.each(function(){this.enjoyhint_obj.showSkipBtn()}),this},render_circle:function(t,e,i){return this.each(function(){this.enjoyhint_obj.renderCircle(t,e,i)}),this},render_label:function(t,e,i){return this.each(function(){this.enjoyhint_obj.renderLabel(t,e,i)}),this},render_label_with_shape:function(t,e){return this.each(function(){G.stopFunction=e,this.enjoyhint_obj.renderLabelWithShape(t)}),this},redo_events_near_rect:function(t){G.disableEventsNearRect({top:t.top,bottom:t.bottom,left:t.left,right:t.right})},clear:function(){return this.each(function(){this.enjoyhint_obj.clear()}),this},close:function(t){return this.each(function(){this.enjoyhint_obj.closePopdown()}),this}};W.fn.enjoyhint=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==_typeof(t)&&t?(W.error("Method "+t+" does not exist on $.numinput"),this):e.init.apply(this,arguments)}}(window.jQuery);var Kinetic={};!function(t){var e=Math.PI/180;(Kinetic={version:"5.2.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,showWarnings:!0,Filters:{},Node:function(t){this._init(t)},Shape:function(t){this.__init(t)},Container:function(t){this.__init(t)},Stage:function(t){this.___init(t)},BaseLayer:function(t){this.___init(t)},Layer:function(t){this.____init(t)},FastLayer:function(t){this.____init(t)},Group:function(t){this.___init(t)},isDragging:function(){var t=Kinetic.DD;return!!t&&t.isDragging},isDragReady:function(){var t=Kinetic.DD;return!!t&&!!t.node},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){if(void 0!==e)for(var i=e.split(/\s/g),n=0;n<i.length;n++){var r=i[n];r&&(void 0===this.names[r]&&(this.names[r]=[]),this.names[r].push(t))}},_removeName:function(t,e){if(void 0!==t){var i=this.names[t];if(void 0!==i){for(var n=0;n<i.length;n++){i[n]._id===e&&i.splice(n,1)}0===i.length&&delete this.names[t]}}},getAngle:function(t){return this.angleDeg?t*e:t},_parseUA:function(t){var e=t.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),r=!!t.match(/IEMobile/i);return{browser:i[1]||"",version:i[2]||"0",mobile:n,ieMobile:r}},UA:void 0}).UA=Kinetic._parseUA(t.navigator&&t.navigator.userAgent||"")}(this),function(t,e){if("object"==("undefined"==typeof exports?"undefined":_typeof(exports))){var i=e();if(global.window===global)Kinetic.document=global.document,Kinetic.window=global;else{var n=require("canvas"),r=require("jsdom").jsdom;Kinetic.document=r("<!DOCTYPE html><html><head></head><body></body></html>"),Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=n.Image,Kinetic._nodeCanvas=n}return Kinetic.root=t,module.exports=i}"function"==typeof define&&define.amd&&define(e),Kinetic.document=document,Kinetic.window=window,Kinetic.root=t}(this,function(){return Kinetic}),function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,i=0;for(this.length=e;i<e;i++)this[i]=t[i];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){var t,e=[],i=this.length;for(t=0;t<i;t++)e.push(this[t]);return e},Kinetic.Collection.toCollection=function(t){var e,i=new Kinetic.Collection,n=t.length;for(e=0;e<n;e++)i.push(t[e]);return i},Kinetic.Collection._mapMethod=function(n){Kinetic.Collection.prototype[n]=function(){var t,e=this.length,i=[].slice.call(arguments);for(t=0;t<e;t++)this[t][n].apply(this[t],i);return this}},Kinetic.Collection.mapMethods=function(t){var e=t.prototype;for(var i in e)Kinetic.Collection._mapMethod(i)},Kinetic.Transform=function(t){this.m=t&&t.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},translate:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},scale:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.m[0]*e+this.m[2]*i,r=this.m[1]*e+this.m[3]*i,o=this.m[0]*-i+this.m[2]*e,s=this.m[1]*-i+this.m[3]*e;return this.m[0]=n,this.m[1]=r,this.m[2]=o,this.m[3]=s,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var i=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=n,this.m[2]=r,this.m[3]=o,this},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],s=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=r,this.m[4]=o,this.m[5]=s,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,n=-this.m[2]*t,r=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=r,this.m[4]=o,this.m[5]=s,this},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var i=this.m[0],n=this.m[1],r=this.m[2],o=this.m[3],s=this.m[4],a=(i*(e-this.m[5])-n*(t-s))/(i*o-n*r),c=(t-s-r*a)/i;return this.translate(c,a)}};var e=Math.PI/180,i=180/Math.PI,n={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},r=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"==Object.prototype.toString.call(t)},_isString:function(t){return"[object String]"==Object.prototype.toString.call(t)},_throttle:function(i,n,t){var r,o,s,a=null,c=0,l=t||{},h=function(){c=!1===l.leading?0:(new Date).getTime(),a=null,s=i.apply(r,o),r=o=null};return function(){var t=(new Date).getTime();c||!1!==l.leading||(c=t);var e=n-(t-c);return r=this,o=arguments,e<=0?(clearTimeout(a),a=null,c=t,s=i.apply(r,o),r=o=null):a||!1===l.trailing||(a=setTimeout(h,e)),s}},_hasMethods:function(t){var e,i=[];for(e in t)this._isFunction(t[e])&&i.push(e);return 0<i.length},createCanvasElement:function(){var t=Kinetic.document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},isBrowser:function(){return"object"!=("undefined"==typeof exports?"undefined":_typeof(exports))},_isInDocument:function(t){for(;t=t.parentNode;)if(t==Kinetic.document)return!0;return!1},_simplifyArray:function(t){var e,i,n=[],r=t.length,o=Kinetic.Util;for(e=0;e<r;e++)i=t[e],o._isNumber(i)?i=Math.round(1e3*i)/1e3:o._isString(i)||(i=i.toString()),n.push(i);return n},_getImage:function(t,e){var i,n;if(t)if(this._isElement(t))e(t);else if(this._isString(t))(i=new Kinetic.window.Image).onload=function(){e(i)},i.src=t;else if(t.data){(n=Kinetic.Util.createCanvasElement()).width=t.width,n.height=t.height,n.getContext("2d").putImageData(t,0,0),this._getImage(n.toDataURL(),e)}else e(null);else e(null)},_getRGBAString:function(t){return["rgba(",t.red||0,",",t.green||0,",",t.blue||0,",",t.alpha||1,")"].join("")},_rgbToHex:function(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in n?{r:(e=n[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=r.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var i=this._clone(e);for(var n in t)i[n]=this._isObject(t[n])?this._merge(t[n],i[n]):t[n];return i},cloneObject:function(t){var e={};for(var i in t)e[i]=this._isObject(t[i])?this.cloneObject(t[i]):this._isArray(t[i])?this.cloneArray(t[i]):t[i];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*e},_radToDeg:function(t){return t*i},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},error:function(t){throw new Error("Kinetic error: "+t)},warn:function(t){Kinetic.root.console&&console.warn&&Kinetic.showWarnings&&console.warn("Kinetic warning: "+t)},extend:function(t,e){function i(){this.constructor=t}i.prototype=e.prototype;var n=t.prototype;for(var r in t.prototype=new i,n)n.hasOwnProperty(r)&&(t.prototype[r]=n[r]);t.__super__=e.prototype},addMethods:function(t,e){var i;for(i in e)t.prototype[i]=e[i]},_getControlPoints:function(t,e,i,n,r,o,s){var a=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),c=Math.sqrt(Math.pow(r-i,2)+Math.pow(o-n,2)),l=s*a/(a+c),h=s*c/(a+c);return[i-l*(r-t),n-l*(o-e),i+h*(r-t),n+h*(o-e)]},_expandPoints:function(t,e){var i,n,r=t.length,o=[];for(i=2;i<r-2;i+=2)n=Kinetic.Util._getControlPoints(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),o.push(n[0]),o.push(n[1]),o.push(t[i]),o.push(t[i+1]),o.push(n[2]),o.push(n[3]);return o},_removeLastLetter:function(t){return t.substring(0,t.length-1)}}}(),function(){var t=Kinetic.Util.createCanvasElement().getContext("2d"),i=Kinetic.UA.mobile?(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1):1;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){var e=(t||{}).pixelRatio||Kinetic.pixelRatio||i;this.pixelRatio=e,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(t){this.pixelRatio=t,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px"},setHeight:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},toDataURL:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return Kinetic.Util.warn("Unable to get data URL. "+t.message),""}}}},Kinetic.SceneCanvas=function(t){var e=t||{},i=e.width||0,n=e.height||0;Kinetic.Canvas.call(this,e),this.context=new Kinetic.SceneContext(this),this.setSize(i,n)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio,i=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,t),i.scale(e,e)},setHeight:function(t){var e=this.pixelRatio,i=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,t),i.scale(e,e)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){var e=t||{},i=e.width||0,n=e.height||0;Kinetic.Canvas.call(this,e),this.context=new Kinetic.HitContext(this),this.setSize(i,n),this.hitCanvas=!0},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var a=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(t){this.init(t)},Kinetic.Context.prototype={init:function(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(t){t.getFillEnabled()&&this._fill(t)},strokeShape:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStrokeShape:function(t){t.getFillEnabled()&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},getTrace:function(t){var e,i,n,r,o=this.traceArr,s=o.length,a="";for(e=0;e<s;e++)(n=(i=o[e]).method)?(r=i.args,a+=n,a+=t?"()":Kinetic.Util._isArray(r[0])?"(["+r.join(",")+"])":"("+r.join(",")+")"):(a+=i.property,t||(a+="="+i.val)),a+=";";return a},clearTrace:function(){this.traceArr=[]},_trace:function(t){var e=this.traceArr;e.push(t),e.length>=Kinetic.traceArrMax&&e.shift()},reset:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},getCanvas:function(){return this.canvas},clear:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth(),e.getHeight())},_applyLineCap:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},setAttr:function(t,e){this._context[t]=e},arc:function(){var t=arguments;this._context.arc(t[0],t[1],t[2],t[3],t[4],t[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var t=arguments;this._context.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},clearRect:function(){var t=arguments;this._context.clearRect(t[0],t[1],t[2],t[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var t=arguments;return 2===t.length?this._context.createImageData(t[0],t[1]):1===t.length?this._context.createImageData(t[0]):void 0},createLinearGradient:function(){var t=arguments;return this._context.createLinearGradient(t[0],t[1],t[2],t[3])},createPattern:function(){var t=arguments;return this._context.createPattern(t[0],t[1])},createRadialGradient:function(){var t=arguments;return this._context.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5])},drawImage:function(){var t=arguments,e=this._context;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},fill:function(){this._context.fill()},fillText:function(){var t=arguments;this._context.fillText(t[0],t[1],t[2])},getImageData:function(){var t=arguments;return this._context.getImageData(t[0],t[1],t[2],t[3])},lineTo:function(){var t=arguments;this._context.lineTo(t[0],t[1])},moveTo:function(){var t=arguments;this._context.moveTo(t[0],t[1])},rect:function(){var t=arguments;this._context.rect(t[0],t[1],t[2],t[3])},putImageData:function(){var t=arguments;this._context.putImageData(t[0],t[1],t[2])},quadraticCurveTo:function(){var t=arguments;this._context.quadraticCurveTo(t[0],t[1],t[2],t[3])},restore:function(){this._context.restore()},rotate:function(){var t=arguments;this._context.rotate(t[0])},save:function(){this._context.save()},scale:function(){var t=arguments;this._context.scale(t[0],t[1])},setLineDash:function(){var t=arguments,e=this._context;this._context.setLineDash?e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])},setTransform:function(){var t=arguments;this._context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},stroke:function(){this._context.stroke()},strokeText:function(){var t=arguments;this._context.strokeText(t[0],t[1],t[2])},transform:function(){var t=arguments;this._context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(){var t=arguments;this._context.translate(t[0],t[1])},_enableTrace:function(){var t,n,r=this,e=a.length,o=Kinetic.Util._simplifyArray,i=this.setAttr,s=function(t){var e,i=r[t];r[t]=function(){return n=o(Array.prototype.slice.call(arguments,0)),e=i.apply(r,arguments),r._trace({method:t,args:n}),e}};for(t=0;t<e;t++)s(a[t]);r.setAttr=function(){i.apply(r,arguments),r._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(t){Kinetic.Context.call(this,t)},Kinetic.SceneContext.prototype={_fillColor:function(t){var e=t.fill()||Kinetic.Util._getRGBAString({red:t.fillRed(),green:t.fillGreen(),blue:t.fillBlue(),alpha:t.fillAlpha()});this.setAttr("fillStyle",e),t._fillFunc(this)},_fillPattern:function(t){var e=t.getFillPatternImage(),i=t.getFillPatternX(),n=t.getFillPatternY(),r=t.getFillPatternScale(),o=Kinetic.getAngle(t.getFillPatternRotation()),s=t.getFillPatternOffset(),a=t.getFillPatternRepeat();(i||n)&&this.translate(i||0,n||0),o&&this.rotate(o),r&&this.scale(r.x,r.y),s&&this.translate(-1*s.x,-1*s.y),this.setAttr("fillStyle",this.createPattern(e,a||"repeat")),this.fill()},_fillLinearGradient:function(t){var e=t.getFillLinearGradientStartPoint(),i=t.getFillLinearGradientEndPoint(),n=t.getFillLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,i.x,i.y);if(n){for(var o=0;o<n.length;o+=2)r.addColorStop(n[o],n[o+1]);this.setAttr("fillStyle",r),this.fill()}},_fillRadialGradient:function(t){for(var e=t.getFillRadialGradientStartPoint(),i=t.getFillRadialGradientEndPoint(),n=t.getFillRadialGradientStartRadius(),r=t.getFillRadialGradientEndRadius(),o=t.getFillRadialGradientColorStops(),s=this.createRadialGradient(e.x,e.y,n,i.x,i.y,r),a=0;a<o.length;a+=2)s.addColorStop(o[a],o[a+1]);this.setAttr("fillStyle",s),this.fill()},_fill:function(t){var e=t.fill()||t.fillRed()||t.fillGreen()||t.fillBlue(),i=t.getFillPatternImage(),n=t.getFillLinearGradientColorStops(),r=t.getFillRadialGradientColorStops(),o=t.getFillPriority();e&&"color"===o?this._fillColor(t):i&&"pattern"===o?this._fillPattern(t):n&&"linear-gradient"===o?this._fillLinearGradient(t):r&&"radial-gradient"===o?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):n?this._fillLinearGradient(t):r&&this._fillRadialGradient(t)},_stroke:function(t){var e=t.dash(),i=t.getStrokeScaleEnabled();t.hasStroke()&&(i||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),e&&t.dashEnabled()&&this.setLineDash(e),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.stroke()||Kinetic.Util._getRGBAString({red:t.strokeRed(),green:t.strokeGreen(),blue:t.strokeBlue(),alpha:t.strokeAlpha()})),t._strokeFunc(this),i||this.restore())},_applyShadow:function(t){var e=Kinetic.Util,i=t.getAbsoluteOpacity(),n=e.get(t.getShadowColor(),"black"),r=e.get(t.getShadowBlur(),5),o=e.get(t.getShadowOpacity(),1),s=e.get(t.getShadowOffset(),{x:0,y:0});o&&this.setAttr("globalAlpha",o*i),this.setAttr("shadowColor",n),this.setAttr("shadowBlur",r),this.setAttr("shadowOffsetX",s.x),this.setAttr("shadowOffsetY",s.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(t){Kinetic.Context.call(this,t)},Kinetic.HitContext.prototype={_fill:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},_stroke:function(t){t.hasStroke()&&(this._applyLineCap(t),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),Kinetic.Factory={addGetterSetter:function(t,e,i,n,r){this.addGetter(t,e,i),this.addSetter(t,e,n,r),this.addOverloadedGetterSetter(t,e)},addGetter:function(t,e,i){var n="get"+Kinetic.Util._capitalize(e);t.prototype[n]=function(){var t=this.attrs[e];return void 0===t?i:t}},addSetter:function(t,e,i,n){var r="set"+Kinetic.Util._capitalize(e);t.prototype[r]=function(t){return i&&(t=i.call(this,t)),this._setAttr(e,t),n&&n.call(this),this}},addComponentsGetterSetter:function(t,n,e,r,o){var i,s,a=e.length,c=Kinetic.Util._capitalize,l="get"+c(n),h="set"+c(n);t.prototype[l]=function(){var t={};for(i=0;i<a;i++)t[s=e[i]]=this.getAttr(n+c(s));return t},t.prototype[h]=function(t){var e,i=this.attrs[n];for(e in r&&(t=r.call(this,t)),t)this._setAttr(n+c(e),t[e]);return this._fireChangeEvent(n,i,t),o&&o.call(this),this},this.addOverloadedGetterSetter(t,n)},addOverloadedGetterSetter:function(t,e){var i=Kinetic.Util._capitalize(e),n="set"+i,r="get"+i;t.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[r]()}},backCompat:function(t,e){var i;for(i in e)t.prototype[i]=t.prototype[e[i]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(t){return 255<t?255:t<0?0:Math.round(t)},alphaComponent:function(t){return 1<t?1:t<1e-4?1e-4:t}},function(){var i="absoluteOpacity",n="absoluteTransform",r="listening",o="mouseenter",s="mouseleave",a="transform",c="visible",h=["id"],l=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(" ");Kinetic.Util.addMethods(Kinetic.Node,{_init:function(t){var e=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(t),this.on(l,function(){this._clearCache(a),e._clearSelfAndDescendantCache(n)}),this.on("visibleChange.kinetic",function(){e._clearSelfAndDescendantCache(c)}),this.on("listeningChange.kinetic",function(){e._clearSelfAndDescendantCache(r)}),this.on("opacityChange.kinetic",function(){e._clearSelfAndDescendantCache(i)})},_clearCache:function(t){t?delete this._cache[t]:this._cache={}},_getCache:function(t,e){return void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]},_clearSelfAndDescendantCache:function(e){this._clearCache(e),this.children&&this.getChildren().each(function(t){t._clearSelfAndDescendantCache(e)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(t){var e=t||{},i=e.x||0,n=e.y||0,r=e.width||this.width(),o=e.height||this.height(),s=e.drawBorder||!1;if(0!==r&&0!==o){var a=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:o}),c=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:o}),l=new Kinetic.HitCanvas({width:r,height:o}),h=a.getContext(),u=l.getContext();return l.isCache=!0,this.clearCache(),h.save(),u.save(),s&&(h.save(),h.beginPath(),h.rect(0,0,r,o),h.closePath(),h.setAttr("strokeStyle","red"),h.setAttr("lineWidth",5),h.stroke(),h.restore()),h.translate(-1*i,-1*n),u.translate(-1*i,-1*n),"Shape"===this.nodeType&&(h.translate(-1*this.x(),-1*this.y()),u.translate(-1*this.x(),-1*this.y())),this.drawScene(a,this),this.drawHit(l,this),h.restore(),u.restore(),this._cache.canvas={scene:a,filter:c,hit:l},this}Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.")},_drawCachedSceneCanvas:function(t){t.save(),this.getLayer()._applyTransform(this,t),t._applyOpacity(this),t.drawImage(this._getCachedSceneCanvas()._canvas,0,0),t.restore()},_getCachedSceneCanvas:function(){var t,e,i,n=this.filters(),r=this._cache.canvas,o=r.scene,s=r.filter,a=s.getContext();if(n){if(!this._filterUpToDate){try{for(t=n.length,a.clear(),a.drawImage(o._canvas,0,0),e=a.getImageData(0,0,s.getWidth(),s.getHeight()),i=0;i<t;i++)n[i].call(this,e),a.putImageData(e,0,0)}catch(t){Kinetic.Util.warn("Unable to apply filter. "+t.message)}this._filterUpToDate=!0}return s}return o},_drawCachedHitCanvas:function(t){var e=this._cache.canvas.hit;t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(e._canvas,0,0),t.restore()},on:function(t,e){var i,n,r,o,s=t.split(" "),a=s.length;for(i=0;i<a;i++)r=(n=s[i].split("."))[0],o=n[1]||"",this.eventListeners[r]||(this.eventListeners[r]=[]),this.eventListeners[r].push({name:o,handler:e});return this},off:function(t){var e,i,n,r,o,s=(t||"").split(" "),a=s.length;if(!t)for(i in this.eventListeners)this._off(i);for(e=0;e<a;e++)if(r=(n=s[e].split("."))[0],o=n[1],r)this.eventListeners[r]&&this._off(r,o);else for(i in this.eventListeners)this._off(i,o);return this},dispatchEvent:function(t){var e={target:this,type:t.type,evt:t};this.fire(t.type,e)},addEventListener:function(t,e){this.on(t,function(t){e.call(this,t.evt)})},removeEventListener:function(t){this.off(t)},remove:function(){var t=this.getParent();return t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache(n),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(r),this._clearSelfAndDescendantCache(i),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e="get"+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),e=new Kinetic.Collection;t;)e.push(t),t=t.getParent();return e},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var e,i;if(t)for(e in t)"children"===e||t[e]instanceof Kinetic.Node||(i="set"+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]));return this},isListening:function(){return this._getCache(r,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return"inherit"===t?!e||e.isListening():t},isVisible:function(){return this._getCache(c,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return"inherit"===t?!e||e.isVisible():t},shouldDrawHit:function(t){var e=this.getLayer();return t&&t.isCache||e&&e.hitGraphEnabled()&&this.isListening()&&this.isVisible()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){var i,n,r,o,s=this.getDepth(),a=this,c=0;return"Stage"!==a.nodeType&&function t(e){for(i=[],n=e.length,r=0;r<n;r++)o=e[r],c++,"Shape"!==o.nodeType&&(i=i.concat(o.getChildren().toArray())),o._id===a._id&&(r=n);0<i.length&&i[0].getDepth()<=s&&t(i)}(a.getStage().getChildren()),c},getDepth:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(t){return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform().getMatrix(),e=new Kinetic.Transform,i=this.offset();return e.m=t.slice(),e.translate(i.x,i.y),e.getTranslation()},setAbsolutePosition:function(t){var e,i=this._clearTransform();return this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,(e=this.getAbsoluteTransform()).invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(i),this},_setTransform:function(t){var e;for(e in t)this.attrs[e]=t[e];this._clearCache(a),this._clearSelfAndDescendantCache(n)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(a),this._clearSelfAndDescendantCache(n),t},move:function(t){var e=t.x,i=t.y,n=this.getX(),r=this.getY();return void 0!==e&&(n+=e),void 0!==i&&(r+=i),this.setPosition({x:n,y:r}),this},_eachAncestorReverse:function(t,e){var i,n,r=[],o=this.getParent();if(e&&e._id===this._id)return t(this),!0;for(r.unshift(this);o&&(!e||o._id!==e._id);)r.unshift(o),o=o.parent;for(i=r.length,n=0;n<i;n++)t(r[n])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},moveToTop:function(){if(this.parent){var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0}Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.")},moveUp:function(){if(this.parent){var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}Kinetic.Util.warn("Node has no parent. moveUp function is ignored.")},moveDown:function(){if(this.parent){var t=this.index;return 0<t&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}Kinetic.Util.warn("Node has no parent. moveDown function is ignored.")},moveToBottom:function(){if(this.parent){var t=this.index;return 0<t&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.")},setZIndex:function(t){if(this.parent){var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.")},getAbsoluteOpacity:function(){return this._getCache(i,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return this.getParent()!==t&&(this.remove(),t.add(this)),this},toObject:function(){var t,e,i,n=Kinetic.Util,r={},o=this.getAttrs();for(t in r.attrs={},o)e=o[t],n._isFunction(e)||n._isElement(e)||n._isObject(e)&&n._hasMethods(e)||(i=this[t],delete o[t],(i?i.call(this):null)!==(o[t]=e)&&(r.attrs[t]=e));return r.className=this.getClassName(),r},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var t=this.getParent();return t?t.getLayer():null},getStage:function(){return this._getCache("stage",this._getStage)},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,i){return i?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(t){return t?this._getAbsoluteTransform(t):this._getCache(n,this._getAbsoluteTransform)},_getAbsoluteTransform:function(t){var e,i,n=new Kinetic.Transform;return this._eachAncestorReverse(function(t){e=t.transformsEnabled(),i=t.getTransform(),"all"===e?n.multiply(i):"position"===e&&n.translate(t.x(),t.y())},t),n},getTransform:function(){return this._getCache(a,this._getTransform)},_getTransform:function(){var t=new Kinetic.Transform,e=this.getX(),i=this.getY(),n=Kinetic.getAngle(this.getRotation()),r=this.getScaleX(),o=this.getScaleY(),s=this.getSkewX(),a=this.getSkewY(),c=this.getOffsetX(),l=this.getOffsetY();return(0!==e||0!==i)&&t.translate(e,i),0!==n&&t.rotate(n),(0!==s||0!==a)&&t.skew(s,a),(1!==r||1!==o)&&t.scale(r,o),(0!==c||0!==l)&&t.translate(-1*c,-1*l),t},clone:function(t){var e,i,n,r,o,s=this.getClassName(),a=Kinetic.Util.cloneObject(this.attrs);for(var c in h){delete a[h[c]]}for(e in t)a[e]=t[e];var l=new Kinetic[s](a);for(e in this.eventListeners)for(n=(i=this.eventListeners[e]).length,r=0;r<n;r++)(o=i[r]).name.indexOf("kinetic")<0&&(l.eventListeners[e]||(l.eventListeners[e]=[]),l.eventListeners[e].push(o));return l},toDataURL:function(t){var e=(t=t||{}).mimeType||null,i=t.quality||null,n=this.getStage(),r=t.x||0,o=t.y||0,s=new Kinetic.SceneCanvas({width:t.width||this.getWidth()||(n?n.getWidth():0),height:t.height||this.getHeight()||(n?n.getHeight():0),pixelRatio:1}),a=s.getContext();return a.save(),(r||o)&&a.translate(-1*r,-1*o),this.drawScene(s),a.restore(),s.toDataURL(e,i)},toImage:function(e){Kinetic.Util._getImage(this.toDataURL(e),function(t){e.callback(t)})},setSize:function(t){return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},_off:function(t,e){var i,n,r=this.eventListeners[t];for(i=0;i<r.length;i++)if(!("kinetic"===(n=r[i].name)&&"kinetic"!==e||e&&n!==e)){if(r.splice(i,1),0===r.length){delete this.eventListeners[t];break}i--}},_fireChangeEvent:function(t,e,i){this._fire(t+"Change",{oldVal:e,newVal:i})},setId:function(t){var e=this.getId();return Kinetic._removeId(e),Kinetic._addId(this,t),this._setAttr("id",t),this},setName:function(t){var e=this.getName();return Kinetic._removeName(e,this._id),Kinetic._addName(this,t),this._setAttr("name",t),this},setAttr:function(t,e){var i=this["set"+Kinetic.Util._capitalize(t)];return Kinetic.Util._isFunction(i)?i.call(this,e):this._setAttr(t,e),this},_setAttr:function(t,e){var i;void 0!==e&&(i=this.attrs[t],this.attrs[t]=e,this._fireChangeEvent(t,i,e))},_setComponentAttr:function(t,e,i){var n;void 0!==i&&((n=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,n,i))},_fireAndBubble:function(t,e,i){var n=!0;if(e&&"Shape"===this.nodeType&&(e.target=this),t===o&&i&&(this._id===i._id||this.isAncestorOf&&this.isAncestorOf(i))?n=!1:t===s&&i&&(this._id===i._id||this.isAncestorOf&&this.isAncestorOf(i))&&(n=!1),n){this._fire(t,e);var r=(t===o||t===s)&&(i&&i.isAncestorOf&&i.isAncestorOf(this)||!(!i||!i.isAncestorOf));e&&!e.cancelBubble&&this.parent&&this.parent.isListening()&&!r&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i.parent):this._fireAndBubble.call(this.parent,t,e))}},_fire:function(t,e){var i,n=this.eventListeners[t];if(e.type=t,n)for(i=0;i<n.length;i++)n[i].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var i,n,r,o=Kinetic.Node.prototype.getClassName.call(t),s=t.children;if(e&&(t.attrs.container=e),i=new Kinetic[o](t.attrs),s)for(n=s.length,r=0;r<n;r++)i.add(this._createNode(s[r]));return i},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),Kinetic.Filters.Grayscale=function(t){var e,i,n=t.data,r=n.length;for(e=0;e<r;e+=4)i=.34*n[e]+.5*n[e+1]+.16*n[e+2],n[e]=i,n[e+1]=i,n[e+2]=i},Kinetic.Filters.Brighten=function(t){var e,i=255*this.brightness(),n=t.data,r=n.length;for(e=0;e<r;e+=4)n[e]+=i,n[e+1]+=i,n[e+2]+=i},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.Invert=function(t){var e,i=t.data,n=i.length;for(e=0;e<n;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},function(){function z(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var B=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],H=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(t){var e=Math.round(this.blurRadius());0<e&&function(t,e){var i,n,r,o,s,a,c,l,h,u,d,f,p,g,m,v,y,_,b,w,x,C,S,k,T=t.data,K=t.width,P=t.height,A=e+e+1,M=K-1,E=P-1,$=e+1,O=$*($+1)/2,I=new z,D=null,F=I,j=null,N=null,L=B[e],R=H[e];for(r=1;r<A;r++)F=F.next=new z,r==$&&(D=F);for(F.next=I,c=a=0,n=0;n<P;n++){for(v=y=_=b=l=h=u=d=0,f=$*(w=T[a]),p=$*(x=T[a+1]),g=$*(C=T[a+2]),m=$*(S=T[a+3]),l+=O*w,h+=O*x,u+=O*C,d+=O*S,F=I,r=0;r<$;r++)F.r=w,F.g=x,F.b=C,F.a=S,F=F.next;for(r=1;r<$;r++)o=a+((M<r?M:r)<<2),l+=(F.r=w=T[o])*(k=$-r),h+=(F.g=x=T[o+1])*k,u+=(F.b=C=T[o+2])*k,d+=(F.a=S=T[o+3])*k,v+=w,y+=x,_+=C,b+=S,F=F.next;for(j=I,N=D,i=0;i<K;i++)T[a+3]=S=d*L>>R,0!==S?(S=255/S,T[a]=(l*L>>R)*S,T[a+1]=(h*L>>R)*S,T[a+2]=(u*L>>R)*S):T[a]=T[a+1]=T[a+2]=0,l-=f,h-=p,u-=g,d-=m,f-=j.r,p-=j.g,g-=j.b,m-=j.a,o=c+((o=i+e+1)<M?o:M)<<2,l+=v+=j.r=T[o],h+=y+=j.g=T[o+1],u+=_+=j.b=T[o+2],d+=b+=j.a=T[o+3],j=j.next,f+=w=N.r,p+=x=N.g,g+=C=N.b,m+=S=N.a,v-=w,y-=x,_-=C,b-=S,N=N.next,a+=4;c+=K}for(i=0;i<K;i++){for(y=_=b=v=h=u=d=l=0,f=$*(w=T[a=i<<2]),p=$*(x=T[a+1]),g=$*(C=T[a+2]),m=$*(S=T[a+3]),l+=O*w,h+=O*x,u+=O*C,d+=O*S,F=I,r=0;r<$;r++)F.r=w,F.g=x,F.b=C,F.a=S,F=F.next;for(s=K,r=1;r<=e;r++)a=s+i<<2,l+=(F.r=w=T[a])*(k=$-r),h+=(F.g=x=T[a+1])*k,u+=(F.b=C=T[a+2])*k,d+=(F.a=S=T[a+3])*k,v+=w,y+=x,_+=C,b+=S,F=F.next,r<E&&(s+=K);for(a=i,j=I,N=D,n=0;n<P;n++)T[3+(o=a<<2)]=S=d*L>>R,0<S?(S=255/S,T[o]=(l*L>>R)*S,T[o+1]=(h*L>>R)*S,T[o+2]=(u*L>>R)*S):T[o]=T[o+1]=T[o+2]=0,l-=f,h-=p,u-=g,d-=m,f-=j.r,p-=j.g,g-=j.b,m-=j.a,o=i+((o=n+$)<E?o:E)*K<<2,l+=v+=j.r=T[o],h+=y+=j.g=T[o+1],u+=_+=j.b=T[o+2],d+=b+=j.a=T[o+3],j=j.next,f+=w=N.r,p+=x=N.g,g+=C=N.b,m+=S=N.a,v-=w,y-=x,_-=C,b-=S,N=N.next,a+=K}}(t,e)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function u(t,e,i){var n=4*(i*t.width+e),r=[];return r.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),r}function d(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}Kinetic.Filters.Mask=function(t){var e=function(t,e){var i=u(t,0,0),n=u(t,t.width-1,0),r=u(t,0,t.height-1),o=u(t,t.width-1,t.height-1),s=e||10;if(d(i,n)<s&&d(n,o)<s&&d(o,r)<s&&d(r,i)<s){for(var a=function(t){for(var e=[0,0,0],i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([n,i,o,r]),c=[],l=0;l<t.width*t.height;l++){var h=d(a,[t.data[4*l],t.data[4*l+1],t.data[4*l+2]]);c[l]=h<s?0:255}return c}}(t,this.threshold());return e&&function(t,e){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}(t,e=function(t,e,i){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],r=Math.round(Math.sqrt(n.length)),o=Math.floor(r/2),s=[],a=0;a<i;a++)for(var c=0;c<e;c++){for(var l=a*e+c,h=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f=a+u-o,p=c+d-o;if(0<=f&&f<i&&0<=p&&p<e){var g=n[u*r+d];h+=t[f*e+p]*g}}s[l]=h}return s}(e=function(t,e,i){for(var n=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(n.length)),o=Math.floor(r/2),s=[],a=0;a<i;a++)for(var c=0;c<e;c++){for(var l=a*e+c,h=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f=a+u-o,p=c+d-o;if(0<=f&&f<i&&0<=p&&p<e){var g=n[u*r+d];h+=t[f*e+p]*g}}s[l]=1020<=h?255:0}return s}(e=function(t,e,i){for(var n=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(n.length)),o=Math.floor(r/2),s=[],a=0;a<i;a++)for(var c=0;c<e;c++){for(var l=a*e+c,h=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f=a+u-o,p=c+d-o;if(0<=f&&f<i&&0<=p&&p<e){var g=n[u*r+d];h+=t[f*e+p]*g}}s[l]=2040===h?255:0}return s}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),Kinetic.Filters.RGB=function(t){var e,i,n=t.data,r=n.length,o=this.red(),s=this.green(),a=this.blue();for(e=0;e<r;e+=4)i=(.34*n[e]+.5*n[e+1]+.16*n[e+2])/255,n[e]=i*o,n[e+1]=i*s,n[e+2]=i*a,n[e+3]=n[e+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(t){return this._filterUpToDate=!1,255<t?255:t<0?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(t){return this._filterUpToDate=!1,255<t?255:t<0?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSV=function(t){var e,i,n,r,o,s=t.data,a=s.length,c=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,u=c*l*Math.cos(h*Math.PI/180),d=c*l*Math.sin(h*Math.PI/180),f=.299*c+.701*u+.167*d,p=.587*c-.587*u+.33*d,g=.114*c-.114*u-.497*d,m=.299*c-.299*u-.328*d,v=.587*c+.413*u+.035*d,y=.114*c-.114*u+.293*d,_=.299*c-.3*u+1.25*d,b=.587*c-.586*u-1.05*d,w=.114*c+.886*u-.2*d;for(e=0;e<a;e+=4)i=s[e+0],n=s[e+1],r=s[e+2],o=s[e+3],s[e+0]=f*i+p*n+g*r,s[e+1]=m*i+v*n+y*r,s[e+2]=_*i+b*n+w*r,s[e+3]=o},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(t){var e,i,n,r,o,s=t.data,a=s.length,c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,h=127*this.luminance(),u=1*c*Math.cos(l*Math.PI/180),d=1*c*Math.sin(l*Math.PI/180),f=.299+.701*u+.167*d,p=.587-.587*u+.33*d,g=.114-.114*u-.497*d,m=.299-.299*u-.328*d,v=.587+.413*u+.035*d,y=.114-.114*u+.293*d,_=.299-.3*u+1.25*d,b=.587-.586*u-1.05*d,w=.114+.886*u-.2*d;for(e=0;e<a;e+=4)i=s[e+0],n=s[e+1],r=s[e+2],o=s[e+3],s[e+0]=f*i+p*n+g*r+h,s[e+1]=m*i+v*n+y*r+h,s[e+2]=_*i+b*n+w*r+h,s[e+3]=o},Kinetic.Filters.Emboss=function(t){var e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),n=this.embossDirection(),r=this.embossBlend(),o=0,s=0,a=t.data,c=t.width,l=t.height,h=4*c,u=l;switch(n){case"top-left":s=o=-1;break;case"top":o=-1,s=0;break;case"top-right":o=-1,s=1;break;case"right":o=0,s=1;break;case"bottom-right":s=o=1;break;case"bottom":o=1,s=0;break;case"bottom-left":s=-(o=1);break;case"left":o=0,s=-1}do{var d=(u-1)*h,f=o;u+f<1&&(f=0),l<u+f&&(f=0);var p=(u-1+f)*c*4,g=c;do{var m=d+4*(g-1),v=s;g+v<1&&(v=0),c<g+v&&(v=0);var y=p+4*(g-1+v),_=a[m]-a[y],b=a[m+1]-a[y+1],w=a[m+2]-a[y+2],x=_,C=0<x?x:-x;if(C<(0<b?b:-b)&&(x=b),C<(0<w?w:-w)&&(x=w),x*=e,r){var S=a[m]+x,k=a[m+1]+x,T=a[m+2]+x;a[m]=255<S?255:S<0?0:S,a[m+1]=255<k?255:k<0?0:k,a[m+2]=255<T?255:T<0?0:T}else{var K=i-x;K<0?K=0:255<K&&(K=255),a[m]=a[m+1]=a[m+2]=K}}while(--g)}while(--u)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter),function(){function C(t,e,i,n,r){var o=i-e,s=r-n;return 0===o?n+s/2:0===s?n:s*((t-e)/o)+n}Kinetic.Filters.Enhance=function(t){var e,i,n,r,o=t.data,s=o.length,a=o[0],c=a,l=o[1],h=l,u=o[2],d=u,f=this.enhance();if(0!==f){for(r=0;r<s;r+=4)(e=o[r+0])<a?a=e:c<e&&(c=e),(i=o[r+1])<l?l=i:h<i&&(h=i),(n=o[r+2])<u?u=n:d<n&&(d=n);var p,g,m,v,y,_,b,w,x;for(c===a&&(c=255,a=0),h===l&&(h=255,l=0),d===u&&(d=255,u=0),x=0<f?(g=c+f*(255-c),m=a-f*(a-0),y=h+f*(255-h),_=l-f*(l-0),w=d+f*(255-d),u-f*(u-0)):(g=c+f*(c-(p=.5*(c+a))),m=a+f*(a-p),y=h+f*(h-(v=.5*(h+l))),_=l+f*(l-v),w=d+f*(d-(b=.5*(d+u))),u+f*(u-b)),r=0;r<s;r+=4)o[r+0]=C(o[r+0],a,c,m,g),o[r+1]=C(o[r+1],l,h,_,y),o[r+2]=C(o[r+2],u,d,x,w)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),Kinetic.Filters.Posterize=function(t){var e,i=Math.round(254*this.levels())+1,n=t.data,r=n.length,o=255/i;for(e=0;e<r;e+=1)n[e]=Math.floor(n[e]/o)*o},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.Noise=function(t){var e,i=255*this.noise(),n=t.data,r=n.length,o=i/2;for(e=0;e<r;e+=4)n[e+0]+=o-2*o*Math.random(),n[e+1]+=o-2*o*Math.random(),n[e+2]+=o-2*o*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.Pixelate=function(t){var e,i,n,r,o,s,a,c,l,h,u,d,f,p,g=Math.ceil(this.pixelSize()),m=t.width,v=t.height,y=Math.ceil(m/g),_=Math.ceil(v/g);for(t=t.data,d=0;d<y;d+=1)for(f=0;f<_;f+=1){for(l=(c=d*g)+g,u=(h=f*g)+g,p=a=s=o=r=0,e=c;e<l;e+=1)if(!(m<=e))for(i=h;i<u;i+=1)v<=i||(r+=t[0+(n=4*(m*i+e))],o+=t[n+1],s+=t[n+2],a+=t[n+3],p+=1);for(r/=p,o/=p,s/=p,e=c;e<l;e+=1)if(!(m<=e))for(i=h;i<u;i+=1)v<=i||(t[0+(n=4*(m*i+e))]=r,t[n+1]=o,t[n+2]=s,t[n+3]=a)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.Threshold=function(t){var e,i=255*this.threshold(),n=t.data,r=n.length;for(e=0;e<r;e+=1)n[e]=n[e]<i?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.Sepia=function(t){var e,i,n,r,o,s,a,c,l,h=t.data,u=t.width,d=t.height,f=4*u;do{for(e=(d-1)*f,i=u;a=.393*(r=h[n=e+4*(i-1)])+.769*(o=h[n+1])+.189*(s=h[n+2]),c=.349*r+.686*o+.168*s,l=.272*r+.534*o+.131*s,h[n]=255<a?255:a,h[n+1]=255<c?255:c,h[n+2]=255<l?255:l,h[n+3]=h[n+3],--i;);}while(--d)},Kinetic.Filters.Solarize=function(t){var e=t.data,i=t.width,n=4*i,r=t.height;do{var o=(r-1)*n,s=i;do{var a=o+4*(s-1),c=e[a],l=e[a+1],h=e[a+2];127<c&&(c=255-c),127<l&&(l=255-l),127<h&&(h=255-h),e[a]=c,e[a+1]=l,e[a+2]=h}while(--s)}while(--r)},function(){var w=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(t){var e,i,n,r,o,s,a,c,l,h=t.width,u=t.height,d=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),p=Math.floor(h*(f%360)/360);if(!(d<1)){w.width=h,w.height=u;var g=w.getContext("2d").getImageData(0,0,h,u);!function(t,e,i){var n,r,o,s,a=t.data,c=e.data,l=t.width,h=t.height,u=i.polarCenterX||l/2,d=i.polarCenterY||h/2,f=0,p=0,g=0,m=0,v=Math.sqrt(u*u+d*d);r=l-u,o=h-d,v=v<(s=Math.sqrt(r*r+o*o))?s:v;var y,_,b,w,x=h,C=l,S=360/C*Math.PI/180;for(_=0;_<C;_+=1)for(b=Math.sin(_*S),w=Math.cos(_*S),y=0;y<x;y+=1)r=Math.floor(u+v*y/x*w),f=a[0+(n=4*((o=Math.floor(d+v*y/x*b))*l+r))],p=a[n+1],g=a[n+2],m=a[n+3],c[0+(n=4*(_+y*l))]=f,c[n+1]=p,c[n+2]=g,c[n+3]=m}(t,g,{polarCenterX:h/2,polarCenterY:u/2});for(var m=h/Math.pow(2,d);m<=8;)m*=2,d-=1;var v=m=Math.ceil(m),y=0,_=v,b=1;for(h<p+m&&(y=v,_=0,b=-1),i=0;i<u;i+=1)for(e=y;e!==_;e+=b)c=4*(h*i+Math.round(e+p)%h),r=g.data[c+0],o=g.data[c+1],s=g.data[c+2],a=g.data[c+3],l=4*(h*i+e),g.data[l+0]=r,g.data[l+1]=o,g.data[l+2]=s,g.data[l+3]=a;for(i=0;i<u;i+=1)for(v=Math.floor(m),n=0;n<d;n+=1){for(e=0;e<v+1;e+=1)c=4*(h*i+e),r=g.data[c+0],o=g.data[c+1],s=g.data[c+2],a=g.data[c+3],l=4*(h*i+2*v-e-1),g.data[l+0]=r,g.data[l+1]=o,g.data[l+2]=s,g.data[l+3]=a;v*=2}!function(t,e,i){var n,r,o,s,a,c,l=t.data,h=e.data,u=t.width,d=t.height,f=i.polarCenterX||u/2,p=i.polarCenterY||d/2,g=0,m=0,v=0,y=0,_=Math.sqrt(f*f+p*p);r=u-f,o=d-p,_=_<(c=Math.sqrt(r*r+o*o))?c:_;var b,w,x,C=d,S=u,k=i.polarRotation||0;for(r=0;r<u;r+=1)for(o=0;o<d;o+=1)s=r-f,a=o-p,b=Math.sqrt(s*s+a*a)*C/_,w=(w=(180*Math.atan2(a,s)/Math.PI+360+k)%360)*S/360,x=Math.floor(w),g=l[0+(n=4*(Math.floor(b)*u+x))],m=l[n+1],v=l[n+2],y=l[n+3],h[0+(n=4*(o*u+r))]=g,h[n+1]=m,h[n+2]=v,h[n+3]=y}(g,t,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t){setTimeout(t,1e3/60)}var h=Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()},e=Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||t;Kinetic.Animation=function(t,e){var i=Kinetic.Animation;this.func=t,this.setLayers(e),this.id=i.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:h()}},Kinetic.Animation.prototype={setLayers:function(t){var e;e=t?0<t.length?t:[t]:[],this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,i,n=this.layers;if(n){for(e=n.length,i=0;i<e;i++)if(n[i]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){var t,e=Kinetic.Animation.animations,i=e.length;for(t=0;t<i;t++)if(e[t].id===this.id)return!0;return!1},start:function(){var t=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=h(),t._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){var e,i=t.id,n=this.animations,r=n.length;for(e=0;e<r;e++)if(n[e].id===i){this.animations.splice(e,1);break}},Kinetic.Animation._runFrames=function(){var t,e,i,n,r,o,s,a,c={},l=this.animations;for(n=0;n<l.length;n++)if(e=(t=l[n]).layers,i=t.func,t._updateFrameObject(h()),o=e.length,!i||!1!==i.call(t,t.frame))for(r=0;r<o;r++)void 0!==(s=e[r])._id&&(c[s._id]=s);for(a in c)c[a].draw()},Kinetic.Animation._animationLoop=function(){var t=Kinetic.Animation;t.animations.length?(function(){e.apply(Kinetic.root,arguments)}(t._animationLoop),t._runFrames()):t.animRunning=!1},Kinetic.Animation._handleAnimation=function(){this.animRunning||(this.animRunning=!0,this._animationLoop())};var i=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){i.call(this,t)},Kinetic.BaseLayer.prototype.batchDraw=function(){var t=this,e=Kinetic.Animation;this.batchAnim||(this.batchAnim=new e(function(){t.lastBatchDrawTime&&500<h()-t.lastBatchDrawTime&&t.batchAnim.stop()},this)),this.lastBatchDrawTime=h(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(t){t.batchDraw()})}}(),function(){var c={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=0;Kinetic.Tween=function(t){var e,i,n=this,r=t.node,o=r._id,s=t.easing||Kinetic.Easings.Linear,a=!!t.yoyo;for(i in e=void 0===t.duration?1:0===t.duration?.001:t.duration,this.node=r,this._id=l++,this.anim=new Kinetic.Animation(function(){n.tween.onEnterFrame()},r.getLayer()||(r instanceof Kinetic.Stage?r.getLayers():null)),this.tween=new h(i,function(t){n._tweenFunc(t)},s,0,1,1e3*e,a),this._addListeners(),Kinetic.Tween.attrs[o]||(Kinetic.Tween.attrs[o]={}),Kinetic.Tween.attrs[o][this._id]||(Kinetic.Tween.attrs[o][this._id]={}),Kinetic.Tween.tweens[o]||(Kinetic.Tween.tweens[o]={}),t)void 0===c[i]&&this._addAttr(i,t[i]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var i,n,r,o,s,a=this.node,c=a._id;if((r=Kinetic.Tween.tweens[c][t])&&delete Kinetic.Tween.attrs[c][r][t],i=a.getAttr(t),Kinetic.Util._isArray(e))for(n=[],s=e.length,o=0;o<s;o++)n.push(e[o]-i[o]);else n=e-i;Kinetic.Tween.attrs[c][this._id][t]={start:i,diff:n},Kinetic.Tween.tweens[c][t]=this._id},_tweenFunc:function(t){var e,i,n,r,o,s,a,c=this.node,l=Kinetic.Tween.attrs[c._id][this._id];for(e in l){if(n=(i=l[e]).start,r=i.diff,Kinetic.Util._isArray(n))for(o=[],a=n.length,s=0;s<a;s++)o.push(n[s]+r[s]*t);else o=n+r*t;c.setAttr(e,o)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()},this.tween.onReset=function(){t.onReset&&t.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){return this.tween.reset(),this},seek:function(t){return this.tween.seek(1e3*t),this},pause:function(){return this.tween.pause(),this},finish:function(){return this.tween.finish(),this},destroy:function(){var t,e=this.node._id,i=this._id,n=Kinetic.Tween.tweens[e];for(t in this.pause(),n)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][i]}};var h=function(t,e,i,n,r,o,s){this.prop=t,this.propFunc=e,this.begin=n,this._pos=n,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=s,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=r-this.begin,this.pause()};h.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},pause:function(){this.state=1,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,i,n){return i*(t/=n)*t*(2.70158*t-1.70158)+e},BackEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*(2.70158*t+1.70158)+1)+e},BackEaseInOut:function(t,e,i,n){var r=1.70158;return(t/=n/2)<1?i/2*t*t*((1+(r*=1.525))*t-r)+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},ElasticEaseIn:function(t,e,i,n,r,o){var s=0;return 0===t?e:1==(t/=n)?e+i:(o||(o=.3*n),s=!r||r<Math.abs(i)?(r=i,o/4):o/(2*Math.PI)*Math.asin(i/r),-r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-s)*Math.PI/o)+e)},ElasticEaseOut:function(t,e,i,n,r,o){var s=0;return 0===t?e:1==(t/=n)?e+i:(o||(o=.3*n),s=!r||r<Math.abs(i)?(r=i,o/4):o/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin(2*(t*n-s)*Math.PI/o)+i+e)},ElasticEaseInOut:function(t,e,i,n,r,o){var s=0;return 0===t?e:2==(t/=n/2)?e+i:(o||(o=.3*n*1.5),s=!r||r<Math.abs(i)?(r=i,o/4):o/(2*Math.PI)*Math.asin(i/r),t<1?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-s)*Math.PI/o)+e:r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-s)*Math.PI/o)*.5+i+e)},BounceEaseOut:function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,i,n){return i-Kinetic.Easings.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut:function(t,e,i,n){return t<n/2?.5*Kinetic.Easings.BounceEaseIn(2*t,0,i,n)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-n,0,i,n)+.5*i+e},EaseIn:function(t,e,i,n){return i*(t/=n)*t+e},EaseOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,i,n){return i*t/n+e}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation(function(){var t=this.dirty;return this.dirty=!1,t}),isDragging:!1,justDragged:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,i=e.node;if(i){if(!e.isDragging){var n=i.getStage().getPointerPosition(),r=i.dragDistance();if(Math.max(Math.abs(n.x-e.startPointerPos.x),Math.abs(n.y-e.startPointerPos.y))<r)return}i._setDragPosition(t),e.isDragging||(e.isDragging=!0,i.fire("dragstart",{type:"dragstart",target:i,evt:t},!0)),i.fire("dragmove",{type:"dragmove",target:i,evt:t},!0)}},_endDragBefore:function(t){var e,i=Kinetic.DD,n=i.node;n&&(n.nodeType,e=n.getLayer(),i.anim.stop(),i.isDragging&&(i.isDragging=!1,i.justDragged=!0,Kinetic.listenClickTap=!1,t&&(t.dragEndNode=n)),delete i.node,(e||n).draw())},_endDragAfter:function(t){var e=(t=t||{}).dragEndNode;t&&e&&e.fire("dragend",{type:"dragend",target:e,evt:t},!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),i=this.getLayer(),n=e.getPointerPosition(),r=this.getAbsolutePosition();n&&(t.node&&t.node.stopDrag(),t.node=this,t.startPointerPos=n,t.offset.x=n.x-r.x,t.offset.y=n.y-r.y,t.anim.setLayers(i||this.getLayers()),t.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(t){var e=Kinetic.DD,i=this.getStage().getPointerPosition(),n=this.getDragBoundFunc();if(i){var r={x:i.x-e.offset.x,y:i.y-e.offset.y};void 0!==n&&(r=n.call(this,r,t)),this.setAbsolutePosition(r),this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(e.anim.dirty=!0),this._lastPos=r}},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var e=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var t=Kinetic.DD;t.node&&t.node._id===this._id&&this.stopDrag(),e.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return!(!t.node||t.node._id!==this._id||!t.isDragging)},Kinetic.Node.prototype._listenDrag=function(){var e=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(t){Kinetic.DD.node||e.startDrag(t)}):this.on("mousedown.kinetic touchstart.kinetic",function(t){1!==t.evt.button&&2!==t.evt.button&&(Kinetic.DD.node||e.startDrag(t))})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Kinetic.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var t=Kinetic.document.documentElement;t.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),t.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),t.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),t.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),Kinetic.Util.addMethods(Kinetic.Container,{__init:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(e){if(e){var i=new Kinetic.Collection;return this.children.each(function(t){e(t)&&i.push(t)}),i}return this.children},hasChildren:function(){return 0<this.getChildren().length},removeChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),i=0;i<e.length;i++)delete(t=e[i]).parent,t.index=0,t.hasChildren()&&t.removeChildren(),t.remove();return e=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),i=0;i<e.length;i++)delete(t=e[i]).parent,t.index=0,t.destroy();return e=null,this.children=new Kinetic.Collection,this},add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}if(t.getParent())return t.moveTo(this),this;var i=this.children;return this._validateAdd(t),t.index=i.length,t.parent=this,i.push(t),this._fire("add",{child:t}),t.isDragging()&&Kinetic.DD.anim.setLayers(t.getLayer()),this},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(t){var e,i,n,r,o,s,a,c=[],l=t.replace(/ /g,"").split(","),h=l.length;for(e=0;e<h;e++)if("#"===(n=l[e]).charAt(0))(o=this._getNodeById(n.slice(1)))&&c.push(o);else if("."===n.charAt(0))r=this._getNodesByName(n.slice(1)),c=c.concat(r);else for(a=(s=this.getChildren()).length,i=0;i<a;i++)c=c.concat(s[i]._get(n));return Kinetic.Collection.toCollection(c)},_getNodeById:function(t){var e=Kinetic.ids[t];return void 0!==e&&this.isAncestorOf(e)?e:null},_getNodesByName:function(t){var e=Kinetic.names[t]||[];return this._getDescendants(e)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),i=this.getChildren(),n=i.length,r=0;r<n;r++)e=e.concat(i[r]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),i=e.length,n=0;n<i;n++){var r=e[n];t.children.push(r.toObject())}return t},_getDescendants:function(t){for(var e=[],i=t.length,n=0;n<i;n++){var r=t[n];this.isAncestorOf(r)&&e.push(r)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(e){var i=[];return this.find("Shape").each(function(t){t.isVisible()&&t.intersects(e)&&i.push(t)}),i},_setChildrenIndices:function(){this.children.each(function(t,e){t.index=e})},drawScene:function(t,e){var i=this.getLayer(),n=t||i&&i.getCanvas(),r=n&&n.getContext(),o=this._cache.canvas,s=o&&o.scene;return this.isVisible()&&(s?this._drawCachedSceneCanvas(r):this._drawChildren(n,"drawScene",e)),this},drawHit:function(t,e){var i=this.getLayer(),n=t||i&&i.hitCanvas,r=n&&n.getContext(),o=this._cache.canvas,s=o&&o.hit;return this.shouldDrawHit(n)&&(i&&i.clearHitCache(),s?this._drawCachedHitCanvas(r):this._drawChildren(n,"drawHit",e)),this},_drawChildren:function(e,i,n){var t,r,o=this.getLayer(),s=e&&e.getContext(),a=this.getClipWidth(),c=this.getClipHeight(),l=a&&c;l&&o&&(t=this.getClipX(),r=this.getClipY(),s.save(),o._applyTransform(this,s),s.beginPath(),s.rect(t,r,a,c),s.clip(),s.reset()),this.children.each(function(t){t[i](e,n)}),l&&s.restore()},shouldDrawHit:function(t){var e=this.getLayer(),i=Kinetic.DD&&Kinetic.isDragging()&&-1!==Kinetic.DD.anim.getLayers().indexOf(e);return t&&t.isCache||e&&e.hitGraphEnabled()&&this.isVisible()&&!i}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container),function(){function n(t){t.fill()}function r(t){t.stroke()}function o(t){t.fill()}function s(t){t.stroke()}function a(){this._clearCache("hasShadow")}Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(t){this.nodeType="Shape",this._fillFunc=n,this._strokeFunc=r,this._fillFuncHit=o,this._strokeFuncHit=s;for(var e,i=Kinetic.shapes;!(e=Kinetic.Util.getRandomColor())||e in i;);i[this.colorKey=e]=this,Kinetic.Node.call(this,t),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",a)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache("hasShadow",this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},intersects:function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawScene(e),0<e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(t,e){var i,n,r=this.getLayer(),o=t||r.getCanvas(),s=o.getContext(),a=this._cache.canvas,c=this.sceneFunc(),l=this.hasShadow();if(this.isVisible())if(a)this._drawCachedSceneCanvas(s);else if(c){if(s.save(),this._useBufferCanvas()){if((n=(i=this.getStage().bufferCanvas).getContext()).clear(),n.save(),n._applyLineJoin(this),r)r._applyTransform(this,n,e);else{var h=this.getAbsoluteTransform(e).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5])}c.call(this,n),n.restore(),l&&!o.hitCanvas&&(s.save(),s._applyShadow(this),s.drawImage(i._canvas,0,0),s.restore()),s._applyOpacity(this),s.drawImage(i._canvas,0,0)}else{if(s._applyLineJoin(this),r)r._applyTransform(this,s,e);else{var u=this.getAbsoluteTransform(e).getMatrix();s.transform(u[0],u[1],u[2],u[3],u[4],u[5])}l&&!o.hitCanvas&&(s.save(),s._applyShadow(this),c.call(this,s),s.restore()),s._applyOpacity(this),c.call(this,s)}s.restore()}return this},drawHit:function(t,e){var i=this.getLayer(),n=t||i.hitCanvas,r=n.getContext(),o=this.hitFunc()||this.sceneFunc(),s=this._cache.canvas,a=s&&s.hit;if(this.shouldDrawHit(n))if(i&&i.clearHitCache(),a)this._drawCachedHitCanvas(r);else if(o){if(r.save(),r._applyLineJoin(this),i)i._applyTransform(this,r,e);else{var c=this.getAbsoluteTransform(e).getMatrix();r.transform(c[0],c[1],c[2],c[3],c[4],c[5])}o.call(this,r),r.restore()}return this},drawHitFromCache:function(t){var e,i,n,r,o,s,a=t||0,c=this._cache.canvas,l=this._getCachedSceneCanvas(),h=l.getContext(),u=c.hit.getContext(),d=l.getWidth(),f=l.getHeight();u.clear();try{for(e=h.getImageData(0,0,d,f).data,n=(i=u.getImageData(0,0,d,f)).data,r=e.length,o=Kinetic.Util._hexToRgb(this.colorKey),s=0;s<r;s+=4)a<e[s+3]&&(n[s]=o.r,n[s+1]=o.g,n[s+2]=o.b,n[s+3]=255);u.putImageData(i,0,0)}catch(t){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+t.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function e(e,i){e.content.addEventListener(i,function(t){e[s+i](t)},!1)}var n="mouseout",r="mouseleave",i="touchstart",o="mousewheel",s="_",a=["mousedown","mousemove","mouseup",n,i,"touchmove","touchend","mouseover","DOMMouseScroll",o,"wheel"],c=a.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){this.nodeType="Stage",Kinetic.Container.call(this,t),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(t){if("string"===_typeof(t)){var e=t;if(!(t=Kinetic.document.getElementById(t)))throw"Can not find container in document with id "+e}return this._setAttr("container",t),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,i=e.length;for(t=0;t<i;t++)e[t].clear();return this},clone:function(t){return t||(t={}),t.container=Kinetic.document.createElement("div"),Kinetic.Container.prototype.clone.call(this,t)},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t);var e=Kinetic.stages.indexOf(this);-1<e&&Kinetic.stages.splice(e,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(r){var o=(r=r||{}).mimeType||null,s=r.quality||null,t=r.x||0,e=r.y||0,a=new Kinetic.SceneCanvas({width:r.width||this.getWidth(),height:r.height||this.getHeight(),pixelRatio:1}),c=a.getContext()._context,l=this.children;(t||e)&&c.translate(-1*t,-1*e),function t(e){var i=l[e].toDataURL(),n=new Kinetic.window.Image;n.onload=function(){c.drawImage(n,0,0),e<l.length-1?t(e+1):r.callback(a.toDataURL(o,s))},n.src=i}(0)},toImage:function(t){var e=t.callback;t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(t){var e,i,n=this.getChildren();for(e=n.length-1;0<=e;e--)if(i=n[e].getIntersection(t))return i;return null},_resizeDOM:function(){if(this.content){var t,e,i=this.getWidth(),n=this.getHeight(),r=this.getChildren(),o=r.length;for(this.content.style.width=i+"px",this.content.style.height=n+"px",this.bufferCanvas.setSize(i,n),this.bufferHitCanvas.setSize(i,n),t=0;t<o;t++)(e=r[t]).setSize(i,n),e.draw()}},add:function(t){if(!(1<arguments.length))return Kinetic.Container.prototype.add.call(this,t),t._setCanvasSize(this.width(),this.height()),t.draw(),this.content.appendChild(t.canvas._canvas),this;for(var e=0;e<arguments.length;e++)this.add(arguments[e])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var t=0;t<c;t++)e(this,a[t])},_mouseover:function(t){Kinetic.UA.mobile||(this._setPointerPosition(t),this._fire("contentMouseover",{evt:t}))},_mouseout:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.targetShape;e&&!Kinetic.isDragging()&&(e._fireAndBubble(n,{evt:t}),e._fireAndBubble(r,{evt:t}),this.targetShape=null),this.pointerPos=void 0,this._fire("contentMouseout",{evt:t})}},_mousemove:function(t){if(Kinetic.UA.ieMobile)return this._touchmove(t);if((void 0===t.webkitMovementX&&void 0===t.webkitMovementY||0!==t.webkitMovementY||0!==t.webkitMovementX)&&!Kinetic.UA.mobile){this._setPointerPosition(t);var e,i=Kinetic.DD;Kinetic.isDragging()||((e=this.getIntersection(this.getPointerPosition()))&&e.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===e._id?e._fireAndBubble("mousemove",{evt:t}):(this.targetShape&&(this.targetShape._fireAndBubble(n,{evt:t},e),this.targetShape._fireAndBubble(r,{evt:t},e)),e._fireAndBubble("mouseover",{evt:t},this.targetShape),e._fireAndBubble("mouseenter",{evt:t},this.targetShape),this.targetShape=e):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(n,{evt:t}),this.targetShape._fireAndBubble(r,{evt:t}),this.targetShape=null),this._fire("contentMousemove",{evt:t})),i&&i._drag(t),t.preventDefault&&t.preventDefault()}},_mousedown:function(t){if(Kinetic.UA.ieMobile)return this._touchstart(t);if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.clickStartShape=e)._fireAndBubble("mousedown",{evt:t}),this._fire("contentMousedown",{evt:t})}t.preventDefault&&t.preventDefault()},_mouseup:function(t){if(Kinetic.UA.ieMobile)return this._touchend(t);if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),i=this.clickStartShape,n=!1,r=Kinetic.DD;Kinetic.inDblClickWindow?(n=!0,Kinetic.inDblClickWindow=!1):r&&r.justDragged?r&&(r.justDragged=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble("mouseup",{evt:t}),Kinetic.listenClickTap&&i&&i._id===e._id&&(e._fireAndBubble("click",{evt:t}),n&&e._fireAndBubble("dblclick",{evt:t}))),this._fire("contentMouseup",{evt:t}),Kinetic.listenClickTap&&(this._fire("contentClick",{evt:t}),n&&this._fire("contentDblclick",{evt:t})),Kinetic.listenClickTap=!1}t.preventDefault&&t.preventDefault()},_touchstart:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&((this.tapStartShape=e)._fireAndBubble(i,{evt:t}),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire("contentTouchstart",{evt:t})},_touchend:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),i=!1;Kinetic.inDblClickWindow?(i=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble("touchend",{evt:t}),Kinetic.listenClickTap&&e._id===this.tapStartShape._id&&(e._fireAndBubble("tap",{evt:t}),i&&e._fireAndBubble("dbltap",{evt:t})),e.isListening()&&t.preventDefault&&t.preventDefault()),Kinetic.listenClickTap&&(this._fire("contentTouchend",{evt:t}),i&&this._fire("contentDbltap",{evt:t})),Kinetic.listenClickTap=!1},_touchmove:function(t){this._setPointerPosition(t);var e,i=Kinetic.DD;Kinetic.isDragging()||((e=this.getIntersection(this.getPointerPosition()))&&e.isListening()&&(e._fireAndBubble("touchmove",{evt:t}),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire("contentTouchmove",{evt:t})),i&&(i._drag(t),Kinetic.isDragging()&&t.preventDefault())},_DOMMouseScroll:function(t){this._mousewheel(t)},_mousewheel:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()&&e._fireAndBubble(o,{evt:t})},_wheel:function(t){this._mousewheel(t)},_setPointerPosition:function(t){var e,i=this._getContentPosition(),n=t.offsetX,r=t.clientX,o=null,s=null;void 0!==(t=t||window.event).touches?0<t.touches.length&&(o=(e=t.touches[0]).clientX-i.left,s=e.clientY-i.top):void 0!==n?(o=n,s=t.offsetY):"mozilla"===Kinetic.UA.browser?(o=t.layerX,s=t.layerY):void 0!==r&&i&&(o=r-i.left,s=t.clientY-i.top),null!==o&&null!==s&&(this.pointerPos={x:o,y:s})},_getContentPosition:function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();if(!t){if(Kinetic.Util.isBrowser())throw"Stage has no container. A container is required.";t=Kinetic.document.createElement("div")}t.innerHTML="",this.content=Kinetic.document.createElement("div"),this.content.style.position="relative",this.content.style.display="inline-block",this.content.className="kineticjs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){var i,n,r=t.split(" "),o=r.length;for(i=0;i<o;i++)n=r[i],this.content.addEventListener(n,e,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(t){this.nodeType="Layer",Kinetic.Container.call(this,t)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},clearHitCache:function(){this._hitImageData=void 0},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[t+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var t=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),t&&t.parentNode&&Kinetic.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},getStage:function(){return this.parent},setSize:function(t,e){this.canvas.setSize(t,e)},getWidth:function(){return this.parent?this.parent.getWidth():void 0},setWidth:function(){Kinetic.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},getHeight:function(){return this.parent?this.parent.getHeight():void 0},setHeight:function(){Kinetic.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer),function(){var a=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],c=a.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,t)},_setCanvasSize:function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(t){var e,i,n,r;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var o=1,s=!1;;){for(i=0;i<c;i++){if(n=a[i],r=(e=this._getIntersection({x:t.x+n.x*o,y:t.y+n.y*o})).shape)return r;e.antialiased&&(s=!0)}if(!s)return;o+=1}},_getImageData:function(t,e){var i=this.hitCanvas.width||1,n=this.hitCanvas.height||1,r=Math.round(e)*i+Math.round(t);return this._hitImageData||(this._hitImageData=this.hitCanvas.context.getImageData(0,0,i,n)),[this._hitImageData.data[4*r+0],this._hitImageData.data[4*r+1],this._hitImageData.data[4*r+2],this._hitImageData.data[4*r+3]]},_getIntersection:function(t){var e,i=this.hitCanvas.context.getImageData(t.x,t.y,1,1).data,n=i[3];return 255===n?(e=Kinetic.Util._rgbToHex(i[0],i[1],i[2]),{shape:Kinetic.shapes["#"+e]}):0<n?{antialiased:!0}:{}},drawScene:function(t,e){var i=this.getLayer(),n=t||i&&i.getCanvas();return this._fire("beforeDraw",{node:this}),this.getClearBeforeDraw()&&n.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,n,e),this._fire("draw",{node:this}),this},_applyTransform:function(t,e,i){var n=t.getAbsoluteTransform(i).getMatrix();e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},drawHit:function(t,e){var i=this.getLayer(),n=t||i&&i.hitCanvas;return i&&i.getClearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,n,e),this.imageData=null,this},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this.imageData=null,this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this},setSize:function(t,e){Kinetic.BaseLayer.prototype.setSize.call(this,t,e),this.hitCanvas.setSize(t,e)}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,t)},_validateAdd:function(t){"Shape"!==t.getType()&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(t,e){this.canvas.setSize(t,e)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(t){var e=this.getLayer(),i=t||e&&e.getCanvas();return this.getClearBeforeDraw()&&i.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,i),this},_applyTransform:function(t,e,i){if(!i||i._id!==this._id){var n=t.getTransform().getMatrix();e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}},draw:function(){return this.drawScene(),this},clear:function(t){return this.getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),this.getCanvas()._canvas.style.display=t?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer),Kinetic.Util.addMethods(Kinetic.Group,{___init:function(t){this.nodeType="Group",Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group),Kinetic.Rect=function(t){this.___init(t)},Kinetic.Rect.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getCornerRadius(),i=this.getWidth(),n=this.getHeight();t.beginPath(),e?(t.moveTo(e,0),t.lineTo(i-e,0),t.arc(i-e,e,e,3*Math.PI/2,0,!1),t.lineTo(i,n-e),t.arc(i-e,n-e,e,0,Math.PI/2,!1),t.lineTo(e,n),t.arc(e,n-e,e,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect),function(){var e=2*Math.PI-1e-4;Kinetic.Circle=function(t){this.___init(t)},Kinetic.Circle.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Circle",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,e,!1),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.radius()!==t/2&&this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.radius()!==t/2&&this.setRadius(t/2)},setRadius:function(t){this._setAttr("radius",t),this.setWidth(2*t),this.setHeight(2*t)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetter(Kinetic.Circle,"radius",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Circle,"radius"),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var n=2*Math.PI-1e-4;Kinetic.Ellipse=function(t){this.___init(t)},Kinetic.Ellipse.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Ellipse",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getRadiusX(),i=this.getRadiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,n,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadiusX()},getHeight:function(){return 2*this.getRadiusY()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var e=2*Math.PI-1e-4;Kinetic.Ring=function(t){this.___init(t)},Kinetic.Ring.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getInnerRadius(),0,e,!1),t.moveTo(this.getOuterRadius(),0),t.arc(0,0,this.getOuterRadius(),e,0,!0),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.outerRadius()!==t/2&&this.setOuterRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.outerRadius()!==t/2&&this.setOuterRadius(t/2)},setOuterRadius:function(t){this._setAttr("outerRadius",t),this.setWidth(2*t),this.setHeight(2*t)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetter(Kinetic.Ring,"outerRadius",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Ring,"outerRadius"),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),Kinetic.Wedge=function(t){this.___init(t)},Kinetic.Wedge.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge),Kinetic.Arc=function(t){this.___init(t)},Kinetic.Arc.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=Kinetic.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.getOuterRadius(),0,e,i),t.arc(0,0,this.getInnerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc),Kinetic.Image=function(t){this.___init(t)},Kinetic.Image.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Image",this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()&&this.getStage()},_sceneFunc:function(t){var e,i,n,r=this.getWidth(),o=this.getHeight(),s=this.getImage();s&&(e=this.getCropWidth(),i=this.getCropHeight(),n=e&&i?[s,this.getCropX(),this.getCropY(),e,i,0,0,r,o]:[s,0,0,r,o]),(this.hasFill()||this.hasStroke()||this.hasShadow())&&(t.beginPath(),t.rect(0,0,r,o),t.closePath(),t.fillStrokeShape(this)),s&&t.drawImage.apply(t,n)},_hitFunc:function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image),function(){function i(t){t.fillText(this.partialText,0,0)}function n(t){t.strokeText(this.partialText,0,0)}var K="auto",r=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],o=r.length,P=Kinetic.Util.createCanvasElement().getContext("2d");Kinetic.Text=function(t){this.___init(t)},Kinetic.Text.prototype={___init:function(t){(t=t||{}).fill=t.fill||"black",void 0===t.width&&(t.width=K),void 0===t.height&&(t.height=K),Kinetic.Shape.call(this,t),this._fillFunc=i,this._strokeFunc=n,this.className="Text";for(var e=0;e<o;e++)this.on(r[e]+"Change.kinetic",this._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,i=this.getPadding(),n=this.getTextHeight(),r=this.getLineHeight()*n,o=this.textArr,s=o.length,a=this.getWidth();for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),t.save(),t.translate(i,0),t.translate(0,i+n/2),e=0;e<s;e++){var c=o[e],l=c.text,h=c.width;t.save(),"right"===this.getAlign()?t.translate(a-h-2*i,0):"center"===this.getAlign()&&t.translate((a-h-2*i)/2,0),this.partialText=l,t.fillStrokeShape(this),t.restore(),t.translate(0,r)}t.restore()},_hitFunc:function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:t.toString();return this._setAttr("text",e),this},getWidth:function(){return this.attrs.width===K?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===K?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,i=P,n=this.getFontSize();return i.save(),i.font=this._getContextFont(),e=i.measureText(t),i.restore(),{width:e.width,height:parseInt(n,10)}},_getContextFont:function(){return this.getFontStyle()+" "+this.getFontVariant()+" "+this.getFontSize()+"px "+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return P.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),i=0,n=this.getLineHeight()*e,r=this.attrs.width,o=this.attrs.height,s=r!==K,a=o!==K,c=this.getPadding(),l=r-2*c,h=o-2*c,u=0,d=this.getWrap(),f="none"!==d,p="char"!==d&&f;this.textArr=[],P.save(),P.font=this._getContextFont();for(var g=0,m=t.length;g<m;++g){var v=t[g],y=this._getTextWidth(v);if(s&&l<y)for(;0<v.length;){for(var _=0,b=v.length,w="",x=0;_<b;){var C=_+b>>>1,S=v.slice(0,C+1),k=this._getTextWidth(S);k<=l?(_=C+1,w=S,x=k):b=C}if(!w)break;if(p){var T=Math.max(w.lastIndexOf(" "),w.lastIndexOf("-"))+1;0<T&&(_=T,w=w.slice(0,_),x=this._getTextWidth(w))}if(this._addTextLine(w,x),i=Math.max(i,x),u+=n,!f||a&&h<u+n)break;if(0<(v=v.slice(_)).length&&(y=this._getTextWidth(v))<=l){this._addTextLine(v,y),u+=n,i=Math.max(i,y);break}}else this._addTextLine(v,y),u+=n,i=Math.max(i,y);if(a&&h<u+n)break}P.restore(),this.textHeight=e,this.textWidth=i}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle","normal"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant","normal"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align","left"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap","word"),Kinetic.Factory.addGetter(Kinetic.Text,"text",""),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),Kinetic.Line=function(t){this.___init(t)},Kinetic.Line.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,i,n,r=this.getPoints(),o=r.length,s=this.getTension(),a=this.getClosed();if(o){if(t.beginPath(),t.moveTo(r[0],r[1]),0!==s&&4<o){for(i=(e=this.getTensionPoints()).length,n=a?0:4,a||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n<i-2;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);a||t.quadraticCurveTo(e[i-2],e[i-1],r[o-2],r[o-1])}else for(n=2;n<o;n+=2)t.lineTo(r[n],r[n+1]);a?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var t=this.getPoints(),e=t.length,i=this.getTension(),n=Kinetic.Util,r=n._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),o=n._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),s=Kinetic.Util._expandPoints(t,i);return[r[2],r[3]].concat(s).concat([o[0],o[1],t[e-2],t[e-1],o[2],o[3],r[0],r[1],t[0],t[1]])}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points",[]),Kinetic.Collection.mapMethods(Kinetic.Line),Kinetic.Sprite=function(t){this.___init(t)},Kinetic.Sprite.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Sprite",this._updated=!0;var e=this;this.anim=new Kinetic.Animation(function(){var t=e._updated;return e._updated=!1,t}),this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameIndexChange.kinetic",function(){this._updated=!0}),this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e=this.getAnimation(),i=this.frameIndex(),n=4*i,r=this.getAnimations()[e],o=this.frameOffsets(),s=r[n+0],a=r[n+1],c=r[n+2],l=r[n+3],h=this.getImage();if(h)if(o){var u=o[e],d=2*i;t.drawImage(h,s,a,c,l,u[d+0],u[d+1],c,l)}else t.drawImage(h,s,a,c,l,0,0,c,l)},_hitFunc:function(t){var e=this.getAnimation(),i=this.frameIndex(),n=4*i,r=this.getAnimations()[e],o=this.frameOffsets(),s=r[n+2],a=r[n+3];if(t.beginPath(),o){var c=o[e],l=2*i;t.rect(c[l+0],c[l+1],s,a)}else t.rect(0,0,s,a);t.closePath(),t.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.getFrameRate())},start:function(){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var t=this.frameIndex(),e=this.getAnimation(),i=this.getAnimations()[e].length/4;this.frameIndex(t<i-1?t+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameOffsets"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite),Kinetic.Path=function(t){this.___init(t)},Kinetic.Path.prototype={___init:function(t){this.dataArray=[];var e=this;Kinetic.Shape.call(this,t),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.dataArray,i=!1;t.beginPath();for(var n=0;n<e.length;n++){var r=e[n].command,o=e[n].points;switch(r){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var s=o[0],a=o[1],c=o[2],l=o[3],h=o[4],u=o[5],d=o[6],f=o[7],p=l<c?c:l,g=l<c?1:c/l,m=l<c?l/c:1;t.translate(s,a),t.rotate(d),t.scale(g,m),t.arc(0,0,p,h,h+u,1-f),t.scale(1/g,1/m),t.rotate(-d),t.translate(-s,-a);break;case"z":t.closePath(),i=!0}}i?t.fillStrokeShape(this):t.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))},Kinetic.Path.getPointOnLine=function(t,e,i,n,r,o,s){void 0===o&&(o=e),void 0===s&&(s=i);var a=(r-i)/(n-e+1e-8),c=Math.sqrt(t*t/(1+a*a));n<e&&(c*=-1);var l,h=a*c;if(n===e)l={x:o,y:s+h};else if((s-i)/(o-e+1e-8)===a)l={x:o+c,y:s+h};else{var u,d,f=this.getLineLength(e,i,n,r);if(f<1e-8)return;var p=(o-e)*(n-e)+(s-i)*(r-i);u=e+(p/=f*f)*(n-e),d=i+p*(r-i);var g=this.getLineLength(o,s,u,d),m=Math.sqrt(t*t-g*g);c=Math.sqrt(m*m/(1+a*a)),n<e&&(c*=-1),l={x:u+c,y:d+(h=a*c)}}return l},Kinetic.Path.getPointOnCubicBezier=function(t,e,i,n,r,o,s,a,c){function l(t){return t*t*t}function h(t){return 3*t*t*(1-t)}function u(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}return{x:a*l(t)+o*h(t)+n*u(t)+e*d(t),y:c*l(t)+s*h(t)+r*u(t)+i*d(t)}},Kinetic.Path.getPointOnQuadraticBezier=function(t,e,i,n,r,o,s){function a(t){return t*t}function c(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}return{x:o*a(t)+n*c(t)+e*l(t),y:s*a(t)+r*c(t)+i*l(t)}},Kinetic.Path.getPointOnEllipticalArc=function(t,e,i,n,r,o){var s=Math.cos(o),a=Math.sin(o),c=i*Math.cos(r),l=n*Math.sin(r);return{x:t+(c*s-l*a),y:e+(c*a+l*s)}},Kinetic.Path.parsePathData=function(t){if(!t)return[];var e=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var n=0;n<i.length;n++)e=e.replace(new RegExp(i[n],"g"),"|"+i[n]);var r=e.split("|"),o=[],s=0,a=0;for(n=1;n<r.length;n++){var c=r[n],l=c.charAt(0),h=(c=(c=(c=(c=c.slice(1)).replace(new RegExp(",-","g"),"-")).replace(new RegExp("-","g"),",-")).replace(new RegExp("e,-","g"),"e-")).split(",");0<h.length&&""===h[0]&&h.shift();for(var u=0;u<h.length;u++)h[u]=parseFloat(h[u]);for(;0<h.length&&!isNaN(h[0]);){var d,f,p,g,m,v,y,_,b,w,x=null,C=[],S=s,k=a;switch(l){case"l":s+=h.shift(),a+=h.shift(),x="L",C.push(s,a);break;case"L":s=h.shift(),a=h.shift(),C.push(s,a);break;case"m":var T=h.shift(),K=h.shift();if(s+=T,a+=K,x="M",2<o.length&&"z"===o[o.length-1].command)for(var P=o.length-2;0<=P;P--)if("M"===o[P].command){s=o[P].points[0]+T,a=o[P].points[1]+K;break}C.push(s,a),l="l";break;case"M":s=h.shift(),a=h.shift(),x="M",C.push(s,a),l="L";break;case"h":s+=h.shift(),x="L",C.push(s,a);break;case"H":s=h.shift(),x="L",C.push(s,a);break;case"v":a+=h.shift(),x="L",C.push(s,a);break;case"V":a=h.shift(),x="L",C.push(s,a);break;case"C":C.push(h.shift(),h.shift(),h.shift(),h.shift()),s=h.shift(),a=h.shift(),C.push(s,a);break;case"c":C.push(s+h.shift(),a+h.shift(),s+h.shift(),a+h.shift()),s+=h.shift(),a+=h.shift(),x="C",C.push(s,a);break;case"S":f=s,p=a,"C"===(d=o[o.length-1]).command&&(f=s+(s-d.points[2]),p=a+(a-d.points[3])),C.push(f,p,h.shift(),h.shift()),s=h.shift(),a=h.shift(),x="C",C.push(s,a);break;case"s":f=s,p=a,"C"===(d=o[o.length-1]).command&&(f=s+(s-d.points[2]),p=a+(a-d.points[3])),C.push(f,p,s+h.shift(),a+h.shift()),s+=h.shift(),a+=h.shift(),x="C",C.push(s,a);break;case"Q":C.push(h.shift(),h.shift()),s=h.shift(),a=h.shift(),C.push(s,a);break;case"q":C.push(s+h.shift(),a+h.shift()),s+=h.shift(),a+=h.shift(),x="Q",C.push(s,a);break;case"T":f=s,p=a,"Q"===(d=o[o.length-1]).command&&(f=s+(s-d.points[0]),p=a+(a-d.points[1])),s=h.shift(),a=h.shift(),x="Q",C.push(f,p,s,a);break;case"t":f=s,p=a,"Q"===(d=o[o.length-1]).command&&(f=s+(s-d.points[0]),p=a+(a-d.points[1])),s+=h.shift(),a+=h.shift(),x="Q",C.push(f,p,s,a);break;case"A":g=h.shift(),m=h.shift(),v=h.shift(),y=h.shift(),_=h.shift(),b=s,w=a,s=h.shift(),a=h.shift(),x="A",C=this.convertEndpointToCenterParameterization(b,w,s,a,y,_,g,m,v);break;case"a":g=h.shift(),m=h.shift(),v=h.shift(),y=h.shift(),_=h.shift(),b=s,w=a,s+=h.shift(),a+=h.shift(),x="A",C=this.convertEndpointToCenterParameterization(b,w,s,a,y,_,g,m,v)}o.push({command:x||l,points:C,start:{x:S,y:k},pathLength:this.calcLength(S,k,x||l,C)})}("z"===l||"Z"===l)&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o},Kinetic.Path.calcLength=function(t,e,i,n){var r,o,s,a,c=Kinetic.Path;switch(i){case"L":return c.getLineLength(t,e,n[0],n[1]);case"C":for(r=0,o=c.getPointOnCubicBezier(0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),a=.01;a<=1;a+=.01)s=c.getPointOnCubicBezier(a,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),r+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;return r;case"Q":for(r=0,o=c.getPointOnQuadraticBezier(0,t,e,n[0],n[1],n[2],n[3]),a=.01;a<=1;a+=.01)s=c.getPointOnQuadraticBezier(a,t,e,n[0],n[1],n[2],n[3]),r+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;return r;case"A":r=0;var l=n[4],h=n[5],u=n[4]+h,d=Math.PI/180;if(Math.abs(l-u)<d&&(d=Math.abs(l-u)),o=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),h<0)for(a=l-d;u<a;a-=d)s=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],a,0),r+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(a=l+d;a<u;a+=d)s=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],a,0),r+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),r+c.getLineLength(o.x,o.y,s.x,s.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(t,e,i,n,r,o,s,a,c){var l=c*(Math.PI/180),h=Math.cos(l)*(t-i)/2+Math.sin(l)*(e-n)/2,u=-1*Math.sin(l)*(t-i)/2+Math.cos(l)*(e-n)/2,d=h*h/(s*s)+u*u/(a*a);1<d&&(s*=Math.sqrt(d),a*=Math.sqrt(d));var f=Math.sqrt((s*s*a*a-s*s*u*u-a*a*h*h)/(s*s*u*u+a*a*h*h));r===o&&(f*=-1),isNaN(f)&&(f=0);var p=f*s*u/a,g=f*-a*h/s,m=(t+i)/2+Math.cos(l)*p-Math.sin(l)*g,v=(e+n)/2+Math.sin(l)*p+Math.cos(l)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},b=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},w=b([1,0],[(h-p)/s,(u-g)/a]),x=[(h-p)/s,(u-g)/a],C=[(-1*h-p)/s,(-1*u-g)/a],S=b(x,C);return _(x,C)<=-1&&(S=Math.PI),1<=_(x,C)&&(S=0),0===o&&0<S&&(S-=2*Math.PI),1===o&&S<0&&(S+=2*Math.PI),[m,v,s,a,w,S,l,o]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path),function(){function i(t){t.fillText(this.partialText,0,0)}function n(t){t.strokeText(this.partialText,0,0)}Kinetic.TextPath=function(t){this.___init(t)},Kinetic.TextPath.prototype={___init:function(t){var e=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,t),this._fillFunc=i,this._strokeFunc=n,this._fillFuncHit=i,this._strokeFuncHit=n,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",e._setTextData),e._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),t.save();for(var e=this.glyphInfo,i=0;i<e.length;i++){t.save();var n=e[i].p0;t.translate(n.x,n.y),t.rotate(e[i].rotation),this.partialText=e[i].text,t.fillStrokeShape(this),t.restore()}t.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Kinetic.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var i=e.measureText(t);return e.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var l=this,t=this._getTextSize(this.attrs.text);this.textWidth=t.width,this.textHeight=t.height,this.glyphInfo=[];for(var h,u,d,e=this.attrs.text.split(""),i=-1,f=0,p=function(){f=0;for(var t=l.dataArray,e=i+1;e<t.length;e++){if(0<t[e].pathLength)return t[i=e];"M"==t[e].command&&(h={x:t[e].points[0],y:t[e].points[1]})}return{}},n=function(t){var e=l._getTextSize(t).width,i=0,n=0;for(u=void 0;.01<Math.abs(e-i)/e&&n<25;){n++;for(var r=i;void 0===d;)(d=p())&&r+d.pathLength<e&&(r+=d.pathLength,d=void 0);if(d==={}||void 0===h)return;var o=!1;switch(d.command){case"L":Kinetic.Path.getLineLength(h.x,h.y,d.points[0],d.points[1])>e?u=Kinetic.Path.getPointOnLine(e,h.x,h.y,d.points[0],d.points[1],h.x,h.y):d=void 0;break;case"A":var s=d.points[4],a=d.points[5],c=d.points[4]+a;0===f?f=s+1e-8:i<e?f+=Math.PI/180*a/Math.abs(a):f-=Math.PI/360*a/Math.abs(a),(a<0&&f<c||0<=a&&c<f)&&(f=c,o=!0),u=Kinetic.Path.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],f,d.points[6]);break;case"C":0===f?f=e>d.pathLength?1e-8:e/d.pathLength:i<e?f+=(e-i)/d.pathLength:f-=(i-e)/d.pathLength,1<f&&(f=1,o=!0),u=Kinetic.Path.getPointOnCubicBezier(f,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":0===f?f=e/d.pathLength:i<e?f+=(e-i)/d.pathLength:f-=(i-e)/d.pathLength,1<f&&(f=1,o=!0),u=Kinetic.Path.getPointOnQuadraticBezier(f,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3])}void 0!==u&&(i=Kinetic.Path.getLineLength(h.x,h.y,u.x,u.y)),o&&(o=!1,d=void 0)}},r=0;r<e.length&&(n(e[r]),void 0!==h&&void 0!==u);r++){var o=Kinetic.Path.getLineLength(h.x,h.y,u.x,u.y),s=Kinetic.Path.getPointOnLine(0+o/2,h.x,h.y,u.x,u.y),a=Math.atan2(u.y-h.y,u.x-h.x);this.glyphInfo.push({transposeX:s.x,transposeY:s.y,text:e[r],rotation:a,p0:h,p1:u}),h=u}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle","normal"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant","normal"),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",""),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),Kinetic.RegularPolygon=function(t){this.___init(t)},Kinetic.RegularPolygon.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,i,n,r=this.attrs.sides,o=this.attrs.radius;for(t.beginPath(),t.moveTo(0,0-o),e=1;e<r;e++)i=o*Math.sin(2*e*Math.PI/r),n=-1*o*Math.cos(2*e*Math.PI/r),t.lineTo(i,n);t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon),Kinetic.Star=function(t){this.___init(t)},Kinetic.Star.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.innerRadius(),i=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var r=1;r<2*n;r++){var o=r%2==0?i:e,s=o*Math.sin(r*Math.PI/n),a=-1*o*Math.cos(r*Math.PI/n);t.lineTo(s,a)}t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star),function(){var r=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],o=r.length;Kinetic.Label=function(t){this.____init(t)},Kinetic.Label.prototype={____init:function(t){var e=this;Kinetic.Group.call(this,t),this.className="Label",this.on("add.kinetic",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(t){var e,i=this,n=function(){i._sync()};for(e=0;e<o;e++)t.on(r[e]+"Change.kinetic",n)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,i,n,r,o,s,a=this.getText(),c=this.getTag();if(a&&c){switch(t=a.getWidth(),e=a.getHeight(),i=c.getPointerDirection(),n=c.getPointerWidth(),s=c.getPointerHeight(),o=r=0,i){case"up":r=t/2,o=-1*s;break;case"right":r=t+n,o=e/2;break;case"down":r=t/2,o=e+s;break;case"left":r=-1*n,o=e/2}c.setAttrs({x:-1*r,y:-1*o,width:t,height:e}),a.setAttrs({x:-1*r,y:-1*o})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(t){this.___init(t)},Kinetic.Tag.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getWidth(),i=this.getHeight(),n=this.getPointerDirection(),r=this.getPointerWidth(),o=this.getPointerHeight(),s=this.getCornerRadius();t.beginPath(),t.moveTo(0,0),"up"===n&&(t.lineTo((e-r)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+r)/2,0)),s?(t.lineTo(e-s,0),t.arc(e-s,s,s,3*Math.PI/2,0,!1)):t.lineTo(e,0),"right"===n&&(t.lineTo(e,(i-o)/2),t.lineTo(e+r,i/2),t.lineTo(e,(i+o)/2)),s?(t.lineTo(e,i-s),t.arc(e-s,i-s,s,0,Math.PI/2,!1)):t.lineTo(e,i),"down"===n&&(t.lineTo((e+r)/2,i),t.lineTo(e/2,i+o),t.lineTo((e-r)/2,i)),s?(t.lineTo(s,i),t.arc(s,i-s,s,Math.PI/2,Math.PI,!1)):t.lineTo(0,i),"left"===n&&(t.lineTo(0,(i+o)/2),t.lineTo(-1*r,i/2),t.lineTo(0,(i-o)/2)),s&&(t.lineTo(0,s),t.arc(s,s,s,Math.PI,3*Math.PI/2,!1)),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection","none"),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}(),Kinetic.Arrow=function(t){this.____init(t)},Kinetic.Arrow.prototype={____init:function(t){Kinetic.Line.call(this,t),this.className="Arrow"},_sceneFunc:function(t){var e=2*Math.PI,i=this.points(),n=i.length,r=i[n-2]-i[n-4],o=i[n-1]-i[n-3],s=(Math.atan2(o,r)+e)%e,a=this.pointerLength(),c=this.pointerWidth();t.save(),t.beginPath(),t.translate(i[n-2],i[n-1]),t.rotate(s),t.moveTo(0,0),t.lineTo(-a,c/2),t.lineTo(-a,-c/2),t.closePath(),t.restore(),this.pointerAtBeginning()&&(t.save(),t.translate(i[0],i[1]),r=i[2]-i[0],o=i[3]-i[1],t.rotate((Math.atan2(-o,-r)+e)%e),t.moveTo(0,0),t.lineTo(-10,6),t.lineTo(-10,-6),t.closePath(),t.restore()),t.fillStrokeShape(this),Kinetic.Line.prototype._sceneFunc.apply(this,arguments)}},Kinetic.Util.extend(Kinetic.Arrow,Kinetic.Line),Kinetic.Factory.addGetterSetter(Kinetic.Arrow,"pointerLength",10),Kinetic.Factory.addGetterSetter(Kinetic.Arrow,"pointerWidth",10),Kinetic.Factory.addGetterSetter(Kinetic.Arrow,"pointerAtBeginning",!1),Kinetic.Collection.mapMethods(Kinetic.Arrow),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(s){"use strict";function v(t){return!t.nodeName||-1!==s.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])}function e(t){return s.isFunction(t)||s.isPlainObject(t)?t:{top:t,left:t}}var y=s.scrollTo=function(t,e,i){return s(window).scrollTo(t,e,i)};return y.defaults={axis:"xy",duration:0,limit:!0},s.fn.scrollTo=function(t,i,g){"object"===_typeof(i)&&(g=i,i=0),"function"==typeof g&&(g={onAfter:g}),"max"===t&&(t=9e9),g=s.extend({},y.defaults,g),i=i||g.duration;var m=g.queue&&1<g.axis.length;return m&&(i/=2),g.offset=e(g.offset),g.over=e(g.over),this.each(function(){function a(t){var e=s.extend({},g,{queue:!0,duration:i,complete:t&&function(){t.call(h,d,g)}});u.animate(f,e)}if(null!==t){var c,l=v(this),h=l?this.contentWindow||window:this,u=s(h),d=t,f={};switch(_typeof(d)){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(d)){d=e(d);break}d=l?s(d):s(d,h);case"object":if(0===d.length)return;(d.is||d.style)&&(c=(d=s(d)).offset())}var p=s.isFunction(g.offset)&&g.offset(h,d)||g.offset;s.each(g.axis.split(""),function(t,e){var i="x"===e?"Left":"Top",n=i.toLowerCase(),r="scroll"+i,o=u[r](),s=y.max(h,e);c?(f[r]=c[n]+(l?0:o-u.offset()[n]),g.margin&&(f[r]-=parseInt(d.css("margin"+i),10)||0,f[r]-=parseInt(d.css("border"+i+"Width"),10)||0),f[r]+=p[n]||0,g.over[n]&&(f[r]+=d["x"===e?"width":"height"]()*g.over[n])):(i=d[n],f[r]=i.slice&&"%"===i.slice(-1)?parseFloat(i)/100*s:i),g.limit&&/^\d+$/.test(f[r])&&(f[r]=f[r]<=0?0:Math.min(f[r],s)),!t&&1<g.axis.length&&(o===f[r]?f={}:m&&(a(g.onAfterFirst),f={}))}),a(g.onAfter)}})},y.max=function(t,e){var i="scroll"+(n="x"===e?"Width":"Height");if(!v(t))return t[i]-s(t)[n.toLowerCase()]();var n="client"+n,r=(o=t.ownerDocument||t.document).documentElement,o=o.body;return Math.max(r[i],o[i])-Math.min(r[n],o[n])},s.Tween.propHooks.scrollLeft=s.Tween.propHooks.scrollTop={get:function(t){return s(t.elem)[t.prop]()},set:function(t){var e=this.get(t);if(t.options.interrupt&&t._last&&t._last!==e)return s(t.elem).stop();var i=Math.round(t.now);e!==i&&(s(t.elem)[t.prop](i),t._last=this.get(t))}},y}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(require("jquery")):t(jQuery)}(function(w){"use strict";function i(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function n(t){var e=t.parent(),i=e.find(".minicolors-panel"),n=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-inline")||e.hasClass("minicolors-focus")||(r(),e.addClass("minicolors-focus"),i.animate?i.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(t.get(0))}):(i.css("opacity",1),n.show&&n.show.call(t.get(0))))}function r(){w(".minicolors-focus").each(function(){var t=w(this),e=t.find(".minicolors-input"),i=t.find(".minicolors-panel"),n=e.data("minicolors-settings");i.animate?i.fadeOut(n.hideSpeed,function(){n.hide&&n.hide.call(e.get(0)),t.removeClass("minicolors-focus")}):(i.css("opacity",0),n.hide&&n.hide.call(e.get(0)),t.removeClass("minicolors-focus"))})}function o(t,e,i){var n,r,o,s,a,c=t.parents(".minicolors").find(".minicolors-input"),l=c.data("minicolors-settings"),h=t.find("[class$=-picker]"),u=t.offset().left,d=t.offset().top,f=Math.round((e.pageX-u)/l.scale),p=Math.round((e.pageY-d)/l.scale),g=i?l.animationSpeed:0;e.originalEvent.changedTouches&&(f=e.originalEvent.changedTouches[0].pageX-u,p=e.originalEvent.changedTouches[0].pageY-d),f<0&&(f=0),p<0&&(p=0),f>t.width()&&(f=t.width()),p>t.height()&&(p=t.height()),t.parent().is(".minicolors-slider-wheel")&&h.parent().is(".minicolors-grid")&&(n=75-f,r=75-p,o=Math.sqrt(n*n+r*r),(s=Math.atan2(r,n))<0&&(s+=2*Math.PI),75<o&&(f=(o=75)-75*Math.cos(s),p=75-75*Math.sin(s)),f=Math.round(f),p=Math.round(p)),a={top:p+"px"},t.is(".minicolors-grid")&&(a.left=f+"px"),h.animate?h.stop(!0).animate(a,g,l.animationEasing,function(){m(c,t)}):(h.css(a),m(c,t))}function m(t,e){function i(t,e){var i,n;return t.length&&e?(i=t.offset().left,n=t.offset().top,{x:i-e.offset().left+t.outerWidth()/2,y:n-e.offset().top+t.outerHeight()/2}):null}var n,r,o,s,a,c,l,h=t.val(),u=t.attr("data-opacity"),d=t.parent(),f=t.data("minicolors-settings"),p=d.find(".minicolors-input-swatch"),g=d.find(".minicolors-grid"),m=d.find(".minicolors-slider"),v=d.find(".minicolors-opacity-slider"),y=g.find("[class$=-picker]"),_=m.find("[class$=-picker]"),b=v.find("[class$=-picker]"),w=i(y,g),x=i(_,m),C=i(b,v);if(e.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(f.control){case"wheel":s=g.width()/2-w.x,a=g.height()/2-w.y,c=Math.sqrt(s*s+a*a),(l=Math.atan2(a,s))<0&&(l+=2*Math.PI),75<c&&(c=75,w.x=69-75*Math.cos(l),w.y=69-75*Math.sin(l)),r=P(c/.75,0,100),h=$({h:n=P(180*l/Math.PI,0,360),s:r,b:o=P(100-Math.floor(x.y*(100/m.height())),0,100)}),m.css("backgroundColor",$({h:n,s:r,b:100}));break;case"saturation":h=$({h:n=P(parseInt(w.x*(360/g.width()),10),0,360),s:r=P(100-Math.floor(x.y*(100/m.height())),0,100),b:o=P(100-Math.floor(w.y*(100/g.height())),0,100)}),m.css("backgroundColor",$({h:n,s:100,b:o})),d.find(".minicolors-grid-inner").css("opacity",r/100);break;case"brightness":h=$({h:n=P(parseInt(w.x/f.scale*(360/g.width()),10),0,360),s:r=P(100-Math.floor(w.y/f.scale*(100/g.height())),0,100),b:o=P(100-Math.floor(x.y*(100/m.height())),0,100)}),m.css("backgroundColor",$({h:n,s:r,b:100})),d.find(".minicolors-grid-inner").css("opacity",1-o/100);break;default:h=$({h:n=P(360-parseInt(x.y*(360/m.height()),10),0,360),s:r=P(Math.floor(w.x*(100/g.width())),0,100),b:o=P(100-Math.floor(w.y*(100/g.height())),0,100)}),g.css("backgroundColor",$({h:n,s:100,b:100}))}S(t,h,u=f.opacity?parseFloat(1-C.y/v.height()).toFixed(2):1)}else p.find("span").css({backgroundColor:h,opacity:u}),k(t,h,u)}function S(t,e,i){var n,r=t.parent(),o=t.data("minicolors-settings"),s=r.find(".minicolors-input-swatch");o.opacity&&t.attr("data-opacity",i),e="rgb"===o.format?(n=A(e)?T(e,!0):O(C(e,!0)),i=""===t.attr("data-opacity")?1:P(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),!isNaN(i)&&o.opacity||(i=1),t.minicolors("rgbObject").a<=1&&n&&o.opacity?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(i)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):(A(e)&&(e=E(e)),x(e,o.letterCase)),t.val(e),s.find("span").css({backgroundColor:e,opacity:i}),k(t,e,i)}function u(t,e){var i,n,r,o,s,a,c,l,h,u,d=t.parent(),f=t.data("minicolors-settings"),p=d.find(".minicolors-input-swatch"),g=d.find(".minicolors-grid"),m=d.find(".minicolors-slider"),v=d.find(".minicolors-opacity-slider"),y=g.find("[class$=-picker]"),_=m.find("[class$=-picker]"),b=v.find("[class$=-picker]");switch(A(t.val())?(i=E(t.val()),(s=P(parseFloat(M(t.val())).toFixed(2),0,1))&&t.attr("data-opacity",s)):i=x(C(t.val(),!0),f.letterCase),i||(i=x(K(f.defaultValue,!0),f.letterCase)),n=function(t){var e=function(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),r=n-i;e.b=n,e.s=0!==n?255*r/n:0,0!==e.s?t.r===n?e.h=(t.g-t.b)/r:t.g===n?e.h=2+(t.b-t.r)/r:e.h=4+(t.r-t.g)/r:e.h=-1;e.h*=60,e.h<0&&(e.h+=360);return e.s*=100/255,e.b*=100/255,e}(O(t));0===e.s&&(e.h=360);return e}(i),o=f.keywords?w.map(f.keywords.split(","),function(t){return w.trim(t.toLowerCase())}):[],a=""!==t.val()&&-1<w.inArray(t.val().toLowerCase(),o)?x(t.val()):A(t.val())?T(t.val()):i,e||t.val(a),f.opacity&&(r=""===t.attr("data-opacity")?1:P(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),isNaN(r)&&(r=1),t.attr("data-opacity",r),p.find("span").css("opacity",r),l=P(v.height()-v.height()*r,0,v.height()),b.css("top",l+"px")),"transparent"===t.val().toLowerCase()&&p.find("span").css("opacity",0),p.find("span").css("backgroundColor",i),f.control){case"wheel":h=P(Math.ceil(.75*n.s),0,g.height()/2),u=n.h*Math.PI/180,c=P(75-Math.cos(u)*h,0,g.width()),l=P(75-Math.sin(u)*h,0,g.height()),y.css({top:l+"px",left:c+"px"}),l=150-n.b/(100/g.height()),""===i&&(l=0),_.css("top",l+"px"),m.css("backgroundColor",$({h:n.h,s:n.s,b:100}));break;case"saturation":c=P(5*n.h/12,0,150),l=P(g.height()-Math.ceil(n.b/(100/g.height())),0,g.height()),y.css({top:l+"px",left:c+"px"}),l=P(m.height()-n.s*(m.height()/100),0,m.height()),_.css("top",l+"px"),m.css("backgroundColor",$({h:n.h,s:100,b:n.b})),d.find(".minicolors-grid-inner").css("opacity",n.s/100);break;case"brightness":c=P(5*n.h/12,0,150),l=P(g.height()-Math.ceil(n.s/(100/g.height())),0,g.height()),y.css({top:l+"px",left:c+"px"}),l=P(m.height()-n.b*(m.height()/100),0,m.height()),_.css("top",l+"px"),m.css("backgroundColor",$({h:n.h,s:n.s,b:100})),d.find(".minicolors-grid-inner").css("opacity",1-n.b/100);break;default:c=P(Math.ceil(n.s/(100/g.width())),0,g.width()),l=P(g.height()-Math.ceil(n.b/(100/g.height())),0,g.height()),y.css({top:l+"px",left:c+"px"}),l=P(m.height()-n.h/(360/m.height()),0,m.height()),_.css("top",l+"px"),g.css("backgroundColor",$({h:n.h,s:100,b:100}))}t.data("minicolors-initialized")&&k(t,a,r)}function k(t,e,i){var n,r,o,s=t.data("minicolors-settings"),a=t.data("minicolors-lastChange");if(!a||a.value!==e||a.opacity!==i){if(t.data("minicolors-lastChange",{value:e,opacity:i}),s.swatches&&0!==s.swatches.length){for(n=A(e)?T(e,!0):O(e),r=-1,o=0;o<s.swatches.length;++o)if(n.r===s.swatches[o].r&&n.g===s.swatches[o].g&&n.b===s.swatches[o].b&&n.a===s.swatches[o].a){r=o;break}t.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==r&&t.parent().find(".minicolors-swatches .minicolors-swatch").eq(o).addClass("selected")}s.change&&(s.changeDelay?(clearTimeout(t.data("minicolors-changeTimeout")),t.data("minicolors-changeTimeout",setTimeout(function(){s.change.call(t.get(0),e,i)},s.changeDelay))):s.change.call(t.get(0),e,i)),t.trigger("change").trigger("input")}}function x(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function C(t,e){return(t=t.replace(/^#/g,"")).match(/^[A-F0-9]{3,6}/gi)?3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t):""}function T(t,e){var i=t.replace(/[^\d,.]/g,"").split(",");return i[0]=P(parseInt(i[0],10),0,255),i[1]=P(parseInt(i[1],10),0,255),i[2]=P(parseInt(i[2],10),0,255),void 0!==i[3]&&(i[3]=P(parseFloat(i[3],10),0,1)),e?void 0!==i[3]?{r:i[0],g:i[1],b:i[2],a:i[3]}:{r:i[0],g:i[1],b:i[2]}:void 0!==i[3]&&i[3]<=1?"rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")":"rgb("+i[0]+", "+i[1]+", "+i[2]+")"}function K(t,e){return A(t)?T(t):C(t,e)}function P(t,e,i){return t<e&&(t=e),i<t&&(t=i),t}function A(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!e||4!==e.length)}function M(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===t.length?t[4]:"1"}function E(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}function d(t){var i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return w.each(i,function(t,e){1===e.length&&(i[t]="0"+e)}),"#"+i.join("")}function $(t){return d(function(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),r=Math.round(255*t.b/100);if(0===n)e.r=e.g=e.b=r;else{var o=r,s=(255-n)*r/255,a=i%60*(o-s)/60;360===i&&(i=0),i<60?(e.r=o,e.b=s,e.g=s+a):i<120?(e.g=o,e.b=s,e.r=o-a):i<180?(e.g=o,e.r=s,e.b=s+a):i<240?(e.b=o,e.r=s,e.g=o-a):i<300?(e.b=o,e.g=s,e.r=s+a):i<360?(e.r=o,e.g=s,e.b=o-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}(t))}function O(t){return{r:(t=parseInt(-1<t.indexOf("#")?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}}w.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom",show:null,showSpeed:100,theme:"default",swatches:[],scale:1}},w.extend(w.fn,{minicolors:function(t,e){switch(t){case"destroy":return w(this).each(function(){i(w(this))}),w(this);case"hide":return r(),w(this);case"opacity":return void 0===e?w(this).attr("data-opacity"):(w(this).each(function(){u(w(this).attr("data-opacity",e))}),w(this));case"rgbObject":return function(t){var e,i=w(t).attr("data-opacity");if(A(w(t).val()))e=T(w(t).val(),!0);else{var n=C(w(t).val(),!0);e=O(n)}if(!e)return null;void 0!==i&&w.extend(e,{a:parseFloat(i)});return e}(w(this));case"rgbString":case"rgbaString":return function(t,e){var i,n=w(t).attr("data-opacity");if(A(w(t).val()))i=T(w(t).val(),!0);else{var r=C(w(t).val(),!0);i=O(r)}if(!i)return null;void 0===n&&(n=1);return e?"rgba("+i.r+", "+i.g+", "+i.b+", "+parseFloat(n)+")":"rgb("+i.r+", "+i.g+", "+i.b+")"}(w(this),"rgbaString"===t);case"settings":return void 0===e?w(this).data("minicolors-settings"):(w(this).each(function(){var t=w(this).data("minicolors-settings")||{};i(w(this)),w(this).minicolors(w.extend(!0,t,e))}),w(this));case"show":return n(w(this).eq(0)),w(this);case"value":return void 0===e?w(this).val():(w(this).each(function(){"object"===_typeof(e)&&null!==e?(void 0!==e.opacity&&w(this).attr("data-opacity",P(e.opacity,0,1)),e.color&&w(this).val(e.color)):w(this).val(e),u(w(this))}),w(this));default:return"create"!==t&&(e=t),w(this).each(function(){!function(e,t){var i,n,r,o,s,a,c,l=w('<div class="minicolors" />'),h=w.minicolors.defaults;if(e.data("minicolors-initialized"))return;t=w.extend(!0,{},h,t),l.addClass("minicolors-theme-"+t.theme).toggleClass("minicolors-with-opacity",t.opacity),void 0!==t.position&&w.each(t.position.split(" "),function(){l.addClass("minicolors-position-"+this)});n="rgb"===t.format?t.opacity?"25":"20":t.keywords?"11":"7";e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",t).prop("size",n).wrap(l).after('<div class="minicolors-panel minicolors-slider-'+t.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),t.inline||(e.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-input-swatch").on("click",function(t){t.preventDefault(),e.focus()}));if((a=e.parent().find(".minicolors-panel")).on("selectstart",function(){return!1}).end(),t.swatches&&0!==t.swatches.length)for(a.addClass("minicolors-with-swatches"),r=w('<ul class="minicolors-swatches"></ul>').appendTo(a),c=0;c<t.swatches.length;++c)o="object"===w.type(t.swatches[c])?(i=t.swatches[c].name,t.swatches[c].color):(i="",t.swatches[c]),o=A(s=o)?T(o,!0):O(C(o,!0)),w('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color" title="'+i+'"></span></li>').appendTo(r).data("swatch-color",s).find(".minicolors-swatch-color").css({backgroundColor:d(o),opacity:o.a}),t.swatches[c]=o;t.inline&&e.parent().addClass("minicolors-inline");u(e,!1),e.data("minicolors-initialized",!0)}(w(this),e)}),w(this)}}}),w([document]).on("mousedown.minicolors touchstart.minicolors",function(t){w(t.target).parents().add(t.target).hasClass("minicolors")||r()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(t){var e=w(this);t.preventDefault(),w(t.delegateTarget).data("minicolors-target",e),o(e,t,!0)}).on("mousemove.minicolors touchmove.minicolors",function(t){var e=w(t.delegateTarget).data("minicolors-target");e&&o(e,t)}).on("mouseup.minicolors touchend.minicolors",function(){w(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(t){t.preventDefault();var e=w(this),i=e.parents(".minicolors").find(".minicolors-input"),n=e.data("swatch-color");S(i,n,M(n)),u(i)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(t){var e=w(this).parent().find(".minicolors-input");t.preventDefault(),n(e)}).on("focus.minicolors",".minicolors-input",function(){var t=w(this);t.data("minicolors-initialized")&&n(t)}).on("blur.minicolors",".minicolors-input",function(){var t,e,i,n,r,o=w(this),s=o.data("minicolors-settings");o.data("minicolors-initialized")&&(t=s.keywords?w.map(s.keywords.split(","),function(t){return w.trim(t.toLowerCase())}):[],r=""!==o.val()&&-1<w.inArray(o.val().toLowerCase(),t)?o.val():null===(i=A(o.val())?T(o.val(),!0):(e=C(o.val(),!0))?O(e):null)?s.defaultValue:"rgb"===s.format?s.opacity?T("rgba("+i.r+","+i.g+","+i.b+","+o.attr("data-opacity")+")"):T("rgb("+i.r+","+i.g+","+i.b+")"):d(i),n=s.opacity?o.attr("data-opacity"):1,"transparent"===r.toLowerCase()&&(n=0),o.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",n),o.val(r),""===o.val()&&o.val(K(s.defaultValue,!0)),o.val(x(o.val(),s.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(t){var e=w(this);if(e.data("minicolors-initialized"))switch(t.which){case 9:r();break;case 13:case 27:r(),e.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var t=w(this);t.data("minicolors-initialized")&&u(t,!0)}).on("paste.minicolors",".minicolors-input",function(){var t=w(this);t.data("minicolors-initialized")&&setTimeout(function(){u(t,!0)},1)})});var EasyAutocomplete=function(t){return t.Configuration=function(o){var s={data:"list-required",url:"list-required",dataType:"json",listLocation:function(t){return t},xmlElementName:"",getValue:function(t){return t},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,method:function(t,e){return(t=s.getValue(t))<(e=s.getValue(e))?-1:e<t?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,match:{enabled:!1,caseSensitive:!1,method:function(t,e){return-1<t.search(e)}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(t,e){return t},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},a=["ajaxSettings","template"];function i(r,t){!function t(e,i){for(var n in i)void 0===e[n]&&r.log("Property '"+n+"' does not exist in EasyAutocomplete options API."),"object"===_typeof(e[n])&&-1===$.inArray(n,a)&&t(e[n],i[n])}(s,t)}this.get=function(t){return s[t]},this.equals=function(t,e){return void 0!==s[i=t]&&null!==s[i]&&s[t]===e;var i},this.checkDataUrlProperties=function(){return"list-required"!==s.url||"list-required"!==s.data},this.checkRequiredProperties=function(){for(var t in s)if("required"===s[t])return logger.error("Option "+t+" must be defined"),!1;return!0},this.printPropertiesThatDoesntExist=function(t,e){i(t,e)},function(){"xml"===o.dataType&&(o.getValue||(o.getValue=function(t){return $(t).text()}),o.list||(o.list={}),o.list.sort||(o.list.sort={}),o.list.sort.method=function(t,e){return t=o.getValue(t),e=o.getValue(e),t<e?-1:e<t?1:0},o.list.match||(o.list.match={}),o.list.match.method=function(t,e){return-1<t.search(e)});if(void 0!==o.categories&&o.categories instanceof Array){for(var t=[],e=0,i=o.categories.length;e<i;e+=1){var n=o.categories[e];for(var r in s.categories[0])void 0===n[r]&&(n[r]=s.categories[0][r]);t.push(n)}o.categories=t}}(),!0===(s=function t(e,i){var n=e||{};for(var r in e)void 0!==i[r]&&null!==i[r]&&("object"!==_typeof(i[r])||i[r]instanceof Array?n[r]=i[r]:t(e[r],i[r]));return void 0!==i.data&&null!==i.data&&"object"===_typeof(i.data)&&(n.data=i.data),n}(s,o)).loggerEnabled&&i(console,o),void 0!==o.ajaxSettings&&"object"===_typeof(o.ajaxSettings)?s.ajaxSettings=o.ajaxSettings:s.ajaxSettings={},function(){if("list-required"!==s.url&&"function"!=typeof s.url){var t=s.url;s.url=function(){return t}}if(void 0!==s.ajaxSettings.url&&"function"!=typeof s.ajaxSettings.url){var t=s.ajaxSettings.url;s.ajaxSettings.url=function(){return t}}if("string"==typeof s.listLocation){var e=s.listLocation;"XML"===s.dataType.toUpperCase()?s.listLocation=function(t){return $(t).find(e)}:s.listLocation=function(t){return t[e]}}if("string"==typeof s.getValue){var i=s.getValue;s.getValue=function(t){return t[i]}}void 0!==o.categories&&(s.categoriesAssigned=!0)}()},t}(EasyAutocomplete||{}),EasyAutocomplete=function(t){return t.Logger=function(){this.error=function(t){console.log("ERROR: "+t)},this.warning=function(t){console.log("WARNING: "+t)}},t}(EasyAutocomplete||{}),EasyAutocomplete=function(t){return t.Constans=function(){var e={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(t){return e[t]}},t}(EasyAutocomplete||{}),EasyAutocomplete=function(t){return t.ListBuilderService=function(r,o){function s(i,n){var t={};if(t="XML"===r.get("dataType").toUpperCase()?function(){var t,e={};void 0!==i.xmlElementName&&(e.xmlElementName=i.xmlElementName);void 0!==i.listLocation?t=i.listLocation:void 0!==r.get("listLocation")&&(t=r.get("listLocation"));void 0!==t?"string"==typeof t?e.data=$(n).find(t):"function"==typeof t&&(e.data=t(n)):e.data=n;return e}():function(){var t={};void 0!==i.listLocation?"string"==typeof i.listLocation?t.data=n[i.listLocation]:"function"==typeof i.listLocation&&(t.data=i.listLocation(n)):t.data=n;return t}(),void 0!==i.header&&(t.header=i.header),void 0!==i.maxNumberOfElements&&(t.maxNumberOfElements=i.maxNumberOfElements),void 0!==r.get("list").maxNumberOfElements&&(t.maxListSize=r.get("list").maxNumberOfElements),void 0!==i.getValue)if("string"==typeof i.getValue){var e=i.getValue;t.getValue=function(t){return t[e]}}else"function"==typeof i.getValue&&(t.getValue=i.getValue);else t.getValue=r.get("getValue");return t}function i(t){var e=[];return void 0===t.xmlElementName&&(t.xmlElementName=r.get("xmlElementName")),$(t.data).find(t.xmlElementName).each(function(){e.push(this)}),e}this.init=function(t){var e=[],i={};return i.data=r.get("listLocation")(t),i.getValue=r.get("getValue"),i.maxListSize=r.get("list").maxNumberOfElements,e.push(i),e},this.updateCategories=function(t,e){if(r.get("categoriesAssigned")){t=[];for(var i=0;i<r.get("categories").length;i+=1){var n=s(r.get("categories")[i],e);t.push(n)}}return t},this.convertXml=function(t){if("XML"===r.get("dataType").toUpperCase())for(var e=0;e<t.length;e+=1)t[e].data=i(t[e]);return t},this.processData=function(t,e){for(var i=0,n=t.length;i<n;i+=1)t[i].data=o(r,t[i],e);return t},this.checkIfDataExists=function(t){for(var e=0,i=t.length;e<i;e+=1)if(void 0!==t[e].data&&t[e].data instanceof Array&&0<t[e].data.length)return!0;return!1}},t}(EasyAutocomplete||{}),EasyAutocomplete=function(n){return n.proccess=function(o,e,t){n.proccess.match=s;var i=e.data;return i=function(t){o.get("list").sort.enabled&&t.sort(o.get("list").sort.method);return t}(i=function(t){void 0!==e.maxNumberOfElements&&t.length>e.maxNumberOfElements&&(t=t.slice(0,e.maxNumberOfElements));return t}(i=function(t,e){var i=[];if(o.get("list").match.enabled)for(var n=0,r=t.length;n<r;n+=1)s(o.get("getValue")(t[n]),e)&&i.push(t[n]);else i=t;return i}(i,t)));function s(t,e){return o.get("list").match.caseSensitive||("string"==typeof t&&(t=t.toLowerCase()),e=e.toLowerCase()),!!o.get("list").match.method(t,e)}},n}(EasyAutocomplete||{}),EasyAutocomplete=function(t){return t.Template=function(t){var e,i,n,r,o,s,a,c={basic:{type:"basic",method:function(t){return t},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(t){return t+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(t){return t},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(t){return t},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(t){return t},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}};this.getTemplateClass=(n=function(){return""},(e=t)&&e.type&&e.type&&c[e.type]?(i=c[e.type].cssClass,function(){return i}):n),this.build=(r=t)&&r.type&&r.type&&c[r.type]?(a=(o=r).fields,"description"===o.type?(s=c.description.method,"string"==typeof a.description?s=function(t,e){return t+" - <span>"+e[a.description]+"</span>"}:"function"==typeof a.description&&(s=function(t,e){return t+" - <span>"+a.description(e)+"</span>"}),s):"iconRight"===o.type?("string"==typeof a.iconSrc?s=function(t,e){return t+"<img class='eac-icon' src='"+e[a.iconSrc]+"' />"}:"function"==typeof a.iconSrc&&(s=function(t,e){return t+"<img class='eac-icon' src='"+a.iconSrc(e)+"' />"}),s):"iconLeft"===o.type?("string"==typeof a.iconSrc?s=function(t,e){return"<img class='eac-icon' src='"+e[a.iconSrc]+"' />"+t}:"function"==typeof a.iconSrc&&(s=function(t,e){return"<img class='eac-icon' src='"+a.iconSrc(e)+"' />"+t}),s):"links"===o.type?("string"==typeof a.link?s=function(t,e){return"<a href='"+e[a.link]+"' >"+t+"</a>"}:"function"==typeof a.link&&(s=function(t,e){return"<a href='"+a.link(e)+"' >"+t+"</a>"}),s):"custom"===o.type?o.method:c.basic.method):c.basic.method},t}(EasyAutocomplete||{}),EasyAutocomplete=function(_){return _.main=function(t,e){var n,r=new _.Constans,f=new _.Configuration(e),s=new _.Logger,p=new _.Template(e.template),a=new _.ListBuilderService(f,_.proccess),i=f.equals,g=t,o="",m=[],v=-1;function c(){var u;function d(t,e){return f.get("highlightPhrase")&&""!==e?(i=t,n=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),(i+"").replace(new RegExp("("+n+")","gi"),"<b>$1</b>")):t;var i,n}g.parent().hasClass(r.getValue("WRAPPER_CSS_CLASS"))&&(g.next("."+r.getValue("CONTAINER_CLASS")).remove(),g.unwrap()),function(){var t=$("<div>"),e=r.getValue("WRAPPER_CSS_CLASS");f.get("theme")&&""!==f.get("theme")&&(e+=" eac-"+f.get("theme"));f.get("cssClasses")&&""!==f.get("cssClasses")&&(e+=" "+f.get("cssClasses"));""!==p.getTemplateClass()&&(e+=" "+p.getTemplateClass());t.addClass(e),g.wrap(t),!0===f.get("adjustWidth")&&(i=g.outerWidth(),g.parent().css("width",i));var i}(),(u=$("<div>").addClass(r.getValue("CONTAINER_CLASS"))).attr("id",l()).prepend($("<ul>")),u.on("show.eac",function(){switch(f.get("list").showAnimation.type){case"slide":var t=f.get("list").showAnimation.time,e=f.get("list").showAnimation.callback;u.find("ul").slideDown(t,e);break;case"fade":var t=f.get("list").showAnimation.time,e=f.get("list").showAnimation.callback;u.find("ul").fadeIn(t);break;default:u.find("ul").show()}f.get("list").onShowListEvent()}).on("hide.eac",function(){switch(f.get("list").hideAnimation.type){case"slide":var t=f.get("list").hideAnimation.time,e=f.get("list").hideAnimation.callback;u.find("ul").slideUp(t,e);break;case"fade":var t=f.get("list").hideAnimation.time,e=f.get("list").hideAnimation.callback;u.find("ul").fadeOut(t,e);break;default:u.find("ul").hide()}f.get("list").onHideListEvent()}).on("selectElement.eac",function(){u.find("ul li").removeClass("selected"),u.find("ul li").eq(v).addClass("selected"),f.get("list").onSelectItemEvent()}).on("loadElements.eac",function(t,n,r){var o="",e=u.find("ul");e.empty().detach(),m=[];for(var s=0,a=0,i=n.length;a<i;a+=1){var c=n[a].data;if(0!==c.length){void 0!==n[a].header&&0<n[a].header.length&&e.append("<div class='eac-category' >"+n[a].header+"</div>");for(var l=0,h=c.length;l<h&&s<n[a].maxListSize;l+=1)o=$("<li><div class='eac-item'></div></li>"),function(){var t=l,e=s,i=n[a].getValue(c[t]);o.find(" > div").on("click",function(){g.val(i).trigger("change"),y(v=e),f.get("list").onClickEvent(),f.get("list").onChooseEvent()}).mouseover(function(){y(v=e),f.get("list").onMouseOverEvent()}).mouseout(function(){f.get("list").onMouseOutEvent()}).html(p.build(d(i,r),c[t]))}(),e.append(o),m.push(c[l]),s+=1}}u.append(e),f.get("list").onLoadEvent()}),g.after(u),o=$("#"+l()),f.get("placeholder")&&g.attr("placeholder",f.get("placeholder"))}function l(){var t=g.attr("id");return t=r.getValue("CONTAINER_ID")+t}function h(){o.trigger("show.eac")}function u(){o.trigger("hide.eac")}function y(t){o.trigger("selectElement.eac",t)}function d(t,e){o.trigger("loadElements.eac",[t,e])}_.consts=r,this.getConstants=function(){return r},this.getConfiguration=function(){return f},this.getContainer=function(){return o},this.getSelectedItemIndex=function(){return v},this.getItems=function(){return m},this.getItemData=function(t){return m.length<t||void 0===m[t]?-1:m[t]},this.getSelectedItemData=function(){return this.getItemData(v)},this.build=function(){c()},this.init=function(){!function(){if(0===g.length)return s.error("Input field doesn't exist.");if(!f.checkDataUrlProperties())return s.error("One of options variables 'data' or 'url' must be defined.");if(!f.checkRequiredProperties())return s.error("Will not work without mentioned properties.");c(),function(){function t(){g.off("keyup").keyup(function(t){switch(t.keyCode){case 27:u(),g.trigger("blur");break;case 38:t.preventDefault(),0<m.length&&0<v&&(v-=1,g.val(f.get("getValue")(m[v])),y(v));break;case 40:t.preventDefault(),0<m.length&&v<m.length-1&&(v+=1,g.val(f.get("getValue")(m[v])),y(v));break;default:if(40<t.keyCode||8===t.keyCode){var e=g.val();!0!==f.get("list").hideOnEmptyPhrase||8!==t.keyCode||""!==e?0<f.get("requestDelay")?(void 0!==n&&clearTimeout(n),n=setTimeout(function(){i(e)},f.get("requestDelay"))):i(e):u()}}function i(i){if(!(i.length<f.get("minCharNumber"))){if("list-required"!==f.get("data")){var t=f.get("data"),e=a.init(t);e=a.updateCategories(e,t),d(e=a.processData(e,i),i),0<g.parent().find("li").length?h():u()}var n=r();void 0!==n.url&&""!==n.url||(n.url=f.get("url")),void 0!==n.dataType&&""!==n.dataType||(n.dataType=f.get("dataType")),void 0!==n.url&&"list-required"!==n.url&&(n.url=n.url(i),n.data=f.get("preparePostData")(n.data,i),$.ajax(n).done(function(t){var e=a.init(t);e=a.updateCategories(e,t),e=a.convertXml(e),o(i,t)&&d(e=a.processData(e,i),i),a.checkIfDataExists(e)&&0<g.parent().find("li").length?h():u(),f.get("ajaxCallback")()}).fail(function(){s.warning("Fail to load response data")}).always(function(){}))}function r(){var t={},e=f.get("ajaxSettings")||{};for(var i in e)t[i]=e[i];return t}function o(t,e){return!1===f.get("matchResponseProperty")||("string"==typeof f.get("matchResponseProperty")?e[f.get("matchResponseProperty")]===t:"function"!=typeof f.get("matchResponseProperty")||f.get("matchResponseProperty")(e)===t)}}})}!function(){i("autocompleteOff",!0)&&g.attr("autocomplete","off");g.focusout(function(){var t,e=g.val();f.get("list").match.caseSensitive||(e=e.toLowerCase());for(var i=0,n=m.length;i<n;i+=1)if(t=f.get("getValue")(m[i]),f.get("list").match.caseSensitive||(t=t.toLowerCase()),t===e)return void y(v=i)}),t(),g.on("keydown",function(t){var e=(t=t||window.event).keyCode;if(38===e)return!(suppressKeypress=!0)}).keydown(function(t){13===t.keyCode&&-1<v&&(g.val(f.get("getValue")(m[v])),f.get("list").onKeyEnterEvent(),f.get("list").onChooseEvent(),v=-1,u(),t.preventDefault())}),g.off("keypress"),g.focus(function(){""!==g.val()&&0<m.length&&(v=-1,h())}),g.blur(function(){setTimeout(function(){v=-1,u()},250)})}()}()}()}},_.eacHandles=[],_.getHandle=function(t){return _.eacHandles[t]},_.inputHasId=function(t){return void 0!==$(t).attr("id")&&0<$(t).attr("id").length},_.assignRandomId=function(t){for(var e="";e="eac-"+Math.floor(1e4*Math.random()),0!==$("#"+e).length;);elementId=_.consts.getValue("CONTAINER_ID")+e,$(t).attr("id",e)},_.setHandle=function(t,e){_.eacHandles[e]=t},_}(EasyAutocomplete||{});!function(n){n.fn.easyAutocomplete=function(i){return this.each(function(){var t=n(this),e=new EasyAutocomplete.main(t,i);EasyAutocomplete.inputHasId(t)||EasyAutocomplete.assignRandomId(t),e.init(),EasyAutocomplete.setHandle(e,t.attr("id"))})},n.fn.getSelectedItemIndex=function(){var t=n(this).attr("id");return void 0!==t?EasyAutocomplete.getHandle(t).getSelectedItemIndex():-1},n.fn.getItems=function(){var t=n(this).attr("id");return void 0!==t?EasyAutocomplete.getHandle(t).getItems():-1},n.fn.getItemData=function(t){var e=n(this).attr("id");return void 0!==e&&-1<t?EasyAutocomplete.getHandle(e).getItemData(t):-1},n.fn.getSelectedItemData=function(){var t=n(this).attr("id");return void 0!==t?EasyAutocomplete.getHandle(t).getSelectedItemData():-1}}(jQuery);var $jscomp={scope:{},findInternal:function(t,e,i){t instanceof String&&(t=String(t));for(var n=t.length,r=0;r<n;r++){var o=t[r];if(e.call(i,o,r,t))return{i:r,v:o}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){if(i.get||i.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:"undefined"!=typeof global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,i,n){if(e){for(i=$jscomp.global,t=t.split("."),n=0;n<t.length-1;n++){var r=t[n];r in i||(i[r]={}),i=i[r]}(e=e(n=i[t=t[t.length-1]]))!=n&&null!=e&&$jscomp.defineProperty(i,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.find",function(t){return t||function(t,e){return $jscomp.findInternal(this,t,e).v}},"es6-impl","es3"),function(t,e,i){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(require("jquery")):t(e||i)}(function(s){var a=function(l,_,b){var w={invalid:[],getCaret:function(){try{var t,e=0,i=l.get(0),n=document.selection,r=i.selectionStart;return n&&-1===navigator.appVersion.indexOf("MSIE 10")?((t=n.createRange()).moveStart("character",-w.val().length),e=t.text.length):(r||"0"===r)&&(e=r),e}catch(t){}},setCaret:function(t){try{if(l.is(":focus")){var e,i=l.get(0);i.setSelectionRange?i.setSelectionRange(t,t):((e=i.createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select())}}catch(t){}},events:function(){l.on("keydown.mask",function(t){l.data("mask-keycode",t.keyCode||t.which),l.data("mask-previus-value",l.val()),l.data("mask-previus-caret-pos",w.getCaret()),w.maskDigitPosMapOld=w.maskDigitPosMap}).on(s.jMaskGlobals.useInput?"input.mask":"keyup.mask",w.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){l.keydown().keyup()},100)}).on("change.mask",function(){l.data("changed",!0)}).on("blur.mask",function(){o===w.val()||l.data("changed")||l.trigger("change"),l.data("changed",!1)}).on("blur.mask",function(){o=w.val()}).on("focus.mask",function(t){!0===b.selectOnFocus&&s(t.target).select()}).on("focusout.mask",function(){b.clearIfNotMatch&&!n.test(w.val())&&w.val("")})},getRegexMask:function(){for(var t,e,i,n,r=[],o=0;o<_.length;o++)(t=x.translation[_.charAt(o)])?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),i=t.optional,(t=t.recursive)?(r.push(_.charAt(o)),n={digit:_.charAt(o),pattern:e}):r.push(i||t?e+"?":e)):r.push(_.charAt(o).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return r=r.join(""),n&&(r=r.replace(new RegExp("("+n.digit+"(.*"+n.digit+")?)"),"($1)?").replace(new RegExp(n.digit,"g"),n.pattern)),new RegExp(r)},destroyEvents:function(){l.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(t){var e=l.is("input")?"val":"text";return e=0<arguments.length?(l[e]()!==t&&l[e](t),l):l[e]()},calculateCaretPosition:function(){var t=l.data("mask-previus-value")||"",e=w.getMasked(),i=w.getCaret();if(t!==e){var n,r=l.data("mask-previus-caret-pos")||0,o=(e=e.length,t.length),s=t=0,a=0,c=0;for(n=i;n<e&&w.maskDigitPosMap[n];n++)s++;for(n=i-1;0<=n&&w.maskDigitPosMap[n];n--)t++;for(n=i-1;0<=n;n--)w.maskDigitPosMap[n]&&a++;for(n=r-1;0<=n;n--)w.maskDigitPosMapOld[n]&&c++;o<i?i=10*e:i<=r&&r!==o?w.maskDigitPosMapOld[i]||(i=(r=i)-(c-a)-t,w.maskDigitPosMap[i]&&(i=r)):r<i&&(i=i+(a-c)+s)}return i},behaviour:function(t){t=t||window.event,w.invalid=[];var e=l.data("mask-keycode");if(-1===s.inArray(e,x.byPassKeys)){e=w.getMasked();var i=w.getCaret();return setTimeout(function(){w.setCaret(w.calculateCaretPosition())},s.jMaskGlobals.keyStrokeCompensation),w.val(e),w.setCaret(i),w.callbacks(t)}},getMasked:function(t,e){var i,n,r,o=[],s=void 0===e?w.val():e+"",a=0,c=_.length,l=0,h=s.length,u=1,d="push",f=-1,p=0,g=[];for(n=b.reverse?(d="unshift",u=-1,i=0,a=c-1,l=h-1,function(){return-1<a&&-1<l}):(i=c-1,function(){return a<c&&l<h});n();){var m=_.charAt(a),v=s.charAt(l),y=x.translation[m];y?(v.match(y.pattern)?(o[d](v),y.recursive&&(-1===f?f=a:a===i&&a!==f&&(a=f-u),i===f&&(a-=u)),a+=u):v===r?(p--,r=void 0):y.optional?(a+=u,l-=u):y.fallback?(o[d](y.fallback),a+=u,l-=u):w.invalid.push({p:l,v:v,e:y.pattern}),l+=u):(t||o[d](m),v===m?(g.push(l),l+=u):(r=m,g.push(l+p),p++),a+=u)}return s=_.charAt(i),c!==h+1||x.translation[s]||o.push(s),o=o.join(""),w.mapMaskdigitPositions(o,g,h),o},mapMaskdigitPositions:function(t,e,i){for(t=b.reverse?t.length-i:0,w.maskDigitPosMap={},i=0;i<e.length;i++)w.maskDigitPosMap[e[i]+t]=1},callbacks:function(t){var e=w.val(),i=e!==o,n=[e,t,l,b],r=function(t,e,i){"function"==typeof b[t]&&e&&b[t].apply(this,i)};r("onChange",!0===i,n),r("onKeyPress",!0===i,n),r("onComplete",e.length===_.length,n),r("onInvalid",0<w.invalid.length,[e,t,l,w.invalid,b])}};l=s(l);var n,x=this,o=w.val();_="function"==typeof _?_(w.val(),void 0,l,b):_,x.mask=_,x.options=b,x.remove=function(){var t=w.getCaret();return x.options.placeholder&&l.removeAttr("placeholder"),l.data("mask-maxlength")&&l.removeAttr("maxlength"),w.destroyEvents(),w.val(x.getCleanVal()),w.setCaret(t),l},x.getCleanVal=function(){return w.getMasked(!0)},x.getMaskedVal=function(t){return w.getMasked(!1,t)},x.init=function(t){if(t=t||!1,b=b||{},x.clearIfNotMatch=s.jMaskGlobals.clearIfNotMatch,x.byPassKeys=s.jMaskGlobals.byPassKeys,x.translation=s.extend({},s.jMaskGlobals.translation,b.translation),x=s.extend(!0,{},x,b),n=w.getRegexMask(),t)w.events(),w.val(w.getMasked());else{b.placeholder&&l.attr("placeholder",b.placeholder),l.data("mask")&&l.attr("autocomplete","off");for(var e=!(t=0);t<_.length;t++){var i=x.translation[_.charAt(t)];if(i&&i.recursive){e=!1;break}}e&&l.attr("maxlength",_.length).data("mask-maxlength",!0),w.destroyEvents(),w.events(),t=w.getCaret(),w.val(w.getMasked()),w.setCaret(t)}},x.init(!l.is("input"))};s.maskWatchers={};var e=function(){var t=s(this),e={},i=t.attr("data-mask");if(t.attr("data-mask-reverse")&&(e.reverse=!0),t.attr("data-mask-clearifnotmatch")&&(e.clearIfNotMatch=!0),"true"===t.attr("data-mask-selectonfocus")&&(e.selectOnFocus=!0),c(t,i,e))return t.data("mask",new a(this,i,e))},c=function(t,e,i){i=i||{};var n=s(t).data("mask"),r=JSON.stringify;t=s(t).val()||s(t).text();try{return"function"==typeof e&&(e=e(t)),"object"!==_typeof(n)||r(n.options)!==r(i)||n.mask!==e}catch(t){}},t=function(t){var e,i=document.createElement("div");return(e=(t="on"+t)in i)||(i.setAttribute(t,"return;"),e="function"==typeof i[t]),e};s.fn.mask=function(t,e){e=e||{};var i=this.selector,n=(r=s.jMaskGlobals).watchInterval,r=e.watchInputs||r.watchInputs,o=function(){if(c(this,t,e))return s(this).data("mask",new a(this,t,e))};return s(this).each(o),i&&""!==i&&r&&(clearInterval(s.maskWatchers[i]),s.maskWatchers[i]=setInterval(function(){s(document).find(i).each(o)},n)),this},s.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},s.fn.unmask=function(){return clearInterval(s.maskWatchers[this.selector]),delete s.maskWatchers[this.selector],this.each(function(){var t=s(this).data("mask");t&&t.remove().removeData("mask")})},s.fn.cleanVal=function(){return this.data("mask").getCleanVal()},s.applyDataMask=function(t){((t=t||s.jMaskGlobals.maskElements)instanceof s?t:s(t)).filter(s.jMaskGlobals.dataMaskAttr).each(e)},t={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&t("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}},s.jMaskGlobals=s.jMaskGlobals||{},(t=s.jMaskGlobals=s.extend(!0,{},t,s.jMaskGlobals)).dataMask&&s.applyDataMask(),setInterval(function(){s.jMaskGlobals.watchDataMask&&s.applyDataMask()},t.watchInterval)},window.jQuery,window.Zepto),function(rt){rt.Jcrop=function(t,e){function g(t){return Math.round(t)+"px"}function m(t){return C.baseClass+"-"+t}function l(t){var e=rt(t).offset();return[e.left,e.top]}function i(t){return[t.pageX-x[0],t.pageY-x[1]]}function n(t){"object"!=_typeof(t)&&(t={}),C=rt.extend(C,t),rt.each(["onChange","onSelect","onRelease","onDblClick"],function(t,e){"function"!=typeof C[e]&&(C[e]=function(){})})}function r(t,e,i){if(x=l(E),et.setCursor("move"===t?t:t+"-resize"),"move"===t)return et.activateHandlers((n=e,it.watchKeys(),function(t){Z.moveOffset([t[0]-n[0],t[1]-n[1]]),n=t,tt.update()}),u,i);var n,r,o,s=Z.getFixed(),a=h(t),c=Z.getCorner(h(a));Z.setPressed(Z.getCorner(a)),Z.setCurrent(c),et.activateHandlers((r=t,o=s,function(t){if(C.aspectRatio)switch(r){case"e":case"w":t[1]=o.y+1;break;case"n":t[0]=o.x+1;break;case"s":t[0]=o.x+1}else switch(r){case"e":case"w":t[1]=o.y2;break;case"n":t[0]=o.x2;break;case"s":t[0]=o.x2}Z.setCurrent(t),tt.update()}),u,i)}function h(t){switch(t){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function v(e){return function(t){return C.disabled||("move"!==e||C.allowMove)&&(x=l(E),G=!0,r(e,i(t)),t.stopPropagation(),t.preventDefault()),!1}}function a(t,e,i){var n=t.width(),r=t.height();e<n&&0<e&&(r=(n=e)/t.width()*t.height()),i<r&&0<i&&(n=(r=i)/t.height()*t.width()),H=t.width()/n,W=t.height()/r,t.width(n).height(r)}function y(t){return{x:t.x*H,y:t.y*W,x2:t.x2*H,y2:t.y2*W,w:t.w*H,h:t.h*W}}function u(t){var e=Z.getFixed();e.w>C.minSelect[0]&&e.h>C.minSelect[1]?(tt.enableHandles(),tt.done()):tt.release(),et.setCursor(C.allowSelect?"crosshair":"default")}function o(t){if(C.disabled)return!1;if(!C.allowSelect)return!1;G=!0,x=l(E),tt.disableHandles(),et.setCursor("crosshair");var e=i(t);return Z.setPressed(e),tt.update(),et.activateHandlers(s,u,"touch"===t.type.substring(0,5)),it.watchKeys(),t.stopPropagation(),t.preventDefault(),!1}function s(t){Z.setCurrent(t),tt.update()}function _(){var t=rt("<div></div>").addClass(m("tracker"));return k&&t.css({opacity:0,backgroundColor:"white"}),t}function c(t){b([t[0]/H,t[1]/W,t[2]/H,t[3]/W]),C.onSelect.call(nt,y(Z.getFixed())),tt.enableHandles()}function b(t){Z.setPressed([t[0],t[1]]),Z.setCurrent([t[2],t[3]]),tt.update()}function d(){C.disabled=!0,tt.disableHandles(),tt.setCursor("default"),et.setCursor("default")}function f(){C.disabled=!1,w()}function p(t,e,i){var n=e||C.bgColor;C.bgFade&&rt.fx.step.hasOwnProperty("backgroundColor")&&C.fadeTime&&!i?t.animate({backgroundColor:n},{queue:!1,duration:C.fadeTime}):t.css("backgroundColor",n)}function w(t){C.allowResize?t?tt.enableOnly():tt.enableHandles():tt.disableHandles(),et.setCursor(C.allowSelect?"crosshair":"default"),tt.setCursor(C.allowMove?"move":"default"),C.hasOwnProperty("trueSize")&&(H=C.trueSize[0]/$,W=C.trueSize[1]/O),C.hasOwnProperty("setSelect")&&(c(C.setSelect),tt.done(),delete C.setSelect),J.refresh(),C.bgColor!=Y&&(p(C.shade?J.getShades():I,C.shade&&C.shadeColor||C.bgColor),Y=C.bgColor),X!=C.bgOpacity&&(X=C.bgOpacity,C.shade?J.refresh():tt.setBgOpacity(X)),L=C.maxSize[0]||0,R=C.maxSize[1]||0,z=C.minSize[0]||0,B=C.minSize[1]||0,C.hasOwnProperty("outerImage")&&(E.attr("src",C.outerImage),delete C.outerImage),tt.refresh()}var x,C=rt.extend({},rt.Jcrop.defaults),S=navigator.userAgent.toLowerCase(),k=/msie/.test(S),T=/msie [1-6]\./.test(S);"object"!=_typeof(t)&&(t=rt(t)[0]),"object"!=_typeof(e)&&(e={}),n(e);var K={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},P=rt(t),A=!0;if("IMG"==t.tagName){if(0!=P[0].width&&0!=P[0].height)P.width(P[0].width),P.height(P[0].height);else{var M=new Image;M.src=P[0].src,P.width(M.width),P.height(M.height)}var E=P.clone().removeAttr("id").css(K).show();E.width(P.width()),E.height(P.height()),P.after(E).hide()}else E=P.css(K).show(),A=!1,null===C.shade&&(C.shade=!0);a(E,C.boxWidth,C.boxHeight);var $=E.width(),O=E.height(),I=rt("<div />").width($).height(O).addClass(m("holder")).css({position:"relative",backgroundColor:C.bgColor}).insertAfter(P).append(E);C.addClass&&I.addClass(C.addClass);var D=rt("<div />"),F=rt("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),j=rt("<div />").width("100%").height("100%").css("zIndex",320),N=rt("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var t=Z.getFixed();C.onDblClick.call(nt,t)}).insertBefore(E).append(F,j);A&&(D=rt("<img />").attr("src",E.attr("src")).css(K).width($).height(O),F.append(D)),T&&N.css({overflowY:"hidden"});var L,R,z,B,H,W,G,U,q=C.boundary,V=_().width($+2*q).height(O+2*q).css({position:"absolute",top:g(-q),left:g(-q),zIndex:290}).mousedown(o),Y=C.bgColor,X=C.bgOpacity;x=l(E);var Q=function(){function t(){var t,e={},i=["touchstart","touchmove","touchend"],n=document.createElement("div");try{for(t=0;t<i.length;t++){var r=i[t],o=(r="on"+r)in n;o||(n.setAttribute(r,"return;"),o="function"==typeof n[r]),e[i[t]]=o}return e.touchstart&&e.touchend&&e.touchmove}catch(t){return!1}}return{createDragger:function(e){return function(t){return C.disabled||("move"!==e||C.allowMove)&&(x=l(E),G=!0,r(e,i(Q.cfilter(t)),!0),t.stopPropagation(),t.preventDefault()),!1}},newSelection:function(t){return o(Q.cfilter(t))},cfilter:function(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t},isSupported:t,support:!0===C.touchSupport||!1===C.touchSupport?C.touchSupport:t()}}(),Z=function(){function i(){if(!C.aspectRatio)return e=_-v,i=b-y,L&&Math.abs(e)>L&&(_=0<e?v+L:v-L),R&&Math.abs(i)>R&&(b=0<i?y+R:y-R),B/W&&Math.abs(i)<B/W&&(b=0<i?y+B/W:y-B/W),z/H&&Math.abs(e)<z/H&&(_=0<e?v+z/H:v-z/H),v<0&&(_-=v,v-=v),y<0&&(b-=y,y-=y),_<0&&(v-=_,_-=_),b<0&&(y-=b,b-=b),$<_&&(v-=t=_-$,_-=t),O<b&&(y-=t=b-O,b-=t),$<v&&(b-=t=v-O,y-=t),O<y&&(b-=t=y-O,y-=t),m(g(v,y,_,b));var t,e,i,n,r,o,s,a=C.aspectRatio,c=C.minSize[0]/H,l=C.maxSize[0]/H,h=C.maxSize[1]/W,u=_-v,d=b-y,f=Math.abs(u),p=Math.abs(d);return 0===l&&(l=10*$),0===h&&(h=10*O),f/p<a?(r=b,o=p*a,(n=u<0?v-o:o+v)<0?(n=0,s=Math.abs((n-v)/a),r=d<0?y-s:s+y):$<n&&(n=$,s=Math.abs((n-v)/a),r=d<0?y-s:s+y)):(n=_,s=f/a,(r=d<0?y-s:y+s)<0?(r=0,o=Math.abs((r-y)*a),n=u<0?v-o:o+v):O<r&&(r=O,o=Math.abs(r-y)*a,n=u<0?v-o:o+v)),v<n?(n-v<c?n=v+c:l<n-v&&(n=v+l),r=y<r?y+(n-v)/a:y-(n-v)/a):n<v&&(v-n<c?n=v-c:l<v-n&&(n=v-l),r=y<r?y+(v-n)/a:y-(v-n)/a),n<0?(v-=n,n=0):$<n&&(v-=n-$,n=$),r<0?(y-=r,r=0):O<r&&(y-=r-O,r=O),m(g(v,y,n,r))}function e(t){return t[0]<0&&(t[0]=0),t[1]<0&&(t[1]=0),t[0]>$&&(t[0]=$),t[1]>O&&(t[1]=O),[Math.round(t[0]),Math.round(t[1])]}function g(t,e,i,n){var r=t,o=i,s=e,a=n;return i<t&&(r=i,o=t),n<e&&(s=n,a=e),[r,s,o,a]}function m(t){return{x:t[0],y:t[1],x2:t[2],y2:t[3],w:t[2]-t[0],h:t[3]-t[1]}}var n,r,v=0,y=0,_=0,b=0;return{flipCoords:g,setPressed:function(t){t=e(t),_=v=t[0],b=y=t[1]},setCurrent:function(t){t=e(t),n=t[0]-_,r=t[1]-b,_=t[0],b=t[1]},getOffset:function(){return[n,r]},moveOffset:function(t){var e=t[0],i=t[1];v+e<0&&(e-=e+v),y+i<0&&(i-=i+y),O<b+i&&(i+=O-(b+i)),$<_+e&&(e+=$-(_+e)),v+=e,_+=e,y+=i,b+=i},getCorner:function(t){var e=i();switch(t){case"ne":return[e.x2,e.y];case"nw":return[e.x,e.y];case"se":return[e.x2,e.y2];case"sw":return[e.x,e.y2]}},getFixed:i}}(),J=function(){function t(){return e(Z.getFixed())}function e(t){h.top.css({left:g(t.x),width:g(t.w),height:g(t.y)}),h.bottom.css({top:g(t.y2),left:g(t.x),width:g(t.w),height:g(O-t.y2)}),h.right.css({left:g(t.x2),width:g($-t.x2)}),h.left.css({width:g(t.x)})}function i(){return rt("<div />").css({position:"absolute",backgroundColor:C.shadeColor||C.bgColor}).appendTo(l)}function n(){c||(c=!0,l.insertBefore(E),t(),tt.setBgOpacity(1,0,1),D.hide(),r(C.shadeColor||C.bgColor,1),tt.isAwake()?s(C.bgOpacity,1):s(1,1))}function r(t,e){p(a(),t,e)}function o(){c&&(l.remove(),D.show(),c=!1,tt.isAwake()?tt.setBgOpacity(C.bgOpacity,1,1):(tt.setBgOpacity(1,1,1),tt.disableHandles()),p(I,0,1))}function s(t,e){c&&(C.bgFade&&!e?l.animate({opacity:1-t},{queue:!1,duration:C.fadeTime}):l.css({opacity:1-t}))}function a(){return l.children()}var c=!1,l=rt("<div />").css({position:"absolute",zIndex:240,opacity:0}),h={top:i(),left:i().height(O),right:i().height(O),bottom:i()};return{update:t,updateRaw:e,getShades:a,setBgColor:r,enable:n,disable:o,resize:function(t,e){h.left.css({height:g(e)}),h.right.css({height:g(e)})},refresh:function(){C.shade?n():o(),tt.isAwake()&&s(C.bgOpacity)},opacity:s}}(),tt=function(){function o(t,e){var i=rt("<div />").mousedown(v(t)).css({cursor:t+"-resize",position:"absolute",zIndex:e}).addClass("ord-"+t);return Q.support&&i.bind("touchstart.jcrop",Q.createDragger(t)),j.append(i),i}function t(){var t=Z.getFixed();Z.setPressed([t.x,t.y]),Z.setCurrent([t.x2,t.y2]),e()}function e(t){if(c)return i(t)}function i(t){var e,i,n,r,o=Z.getFixed();n=o.w,r=o.h,N.width(Math.round(n)).height(Math.round(r)),e=o.x,i=o.y,C.shade||D.css({top:g(-i),left:g(-e)}),N.css({top:g(i),left:g(e)}),C.shade&&J.updateRaw(o),c||(N.show(),C.shade?J.opacity(X):s(X,!0),c=!0),t?C.onSelect.call(nt,y(o)):C.onChange.call(nt,y(o))}function s(t,e,i){(c||e)&&(C.bgFade&&!i?E.animate({opacity:t},{queue:!1,duration:C.fadeTime}):E.css("opacity",t))}function n(){if(f=!0,C.allowResize)return j.show(),!0}function r(){f=!1,j.hide()}function a(t){t?(U=!0,r()):(U=!1,n())}var c,l=370,h={},u={},d={},f=!1;C.dragEdges&&rt.isArray(C.createDragbars)&&function(t){var e;for(e=0;e<t.length;e++)d[t[e]]=o(t[e],l++).addClass("jcrop-dragbar")}(C.createDragbars),rt.isArray(C.createHandles)&&function(t){var e,i,n,r;for(e=0;e<t.length;e++)u[t[e]]=(i=t[e],r=void 0,n=C.handleSize,r=o(i,l++).css({opacity:C.handleOpacity}).addClass(m("handle")),n&&r.width(n).height(n),r)}(C.createHandles),C.drawBorders&&rt.isArray(C.createBorders)&&function(t){var e,i,n,r;for(i=0;i<t.length;i++){switch(t[i]){case"n":e="hline";break;case"s":e="hline bottom";break;case"e":e="vline right";break;case"w":e="vline"}h[t[i]]=(n=e,r=rt("<div />").css({position:"absolute",opacity:C.borderOpacity}).addClass(m(n)),F.append(r),r)}}(C.createBorders),rt(document).bind("touchstart.jcrop-ios",function(t){rt(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var p=_().mousedown(v("move")).css({cursor:"move",position:"absolute",zIndex:360});return Q.support&&p.bind("touchstart.jcrop",Q.createDragger("move")),F.append(p),r(),{updateVisible:e,update:i,release:function(){r(),N.hide(),C.shade?J.opacity(1):s(1),c=!1,C.onRelease.call(nt)},refresh:t,isAwake:function(){return c},setCursor:function(t){p.css("cursor",t)},enableHandles:n,enableOnly:function(){f=!0},showHandles:function(){f&&j.show()},disableHandles:r,animMode:a,setBgOpacity:s,done:function(){a(!1),t()}}}(),et=function(){function r(t){return c(i(t)),!1}function o(t){return t.preventDefault(),t.stopPropagation(),G&&(G=!1,l(i(t)),tt.isAwake()&&C.onSelect.call(nt,y(Z.getFixed())),V.css({zIndex:290}),rt(document).unbind(".jcrop"),c=function(){},l=function(){}),!1}function s(t){return c(i(Q.cfilter(t))),!1}function a(t){return o(Q.cfilter(t))}var c=function(){},l=function(){},h=C.trackDocument;return h||V.mousemove(r).mouseup(o).mouseout(o),E.before(V),{activateHandlers:function(t,e,i){return G=!0,c=t,l=e,n=i,V.css({zIndex:450}),n?rt(document).bind("touchmove.jcrop",s).bind("touchend.jcrop",a):h&&rt(document).bind("mousemove.jcrop",r).bind("mouseup.jcrop",o),!1;var n},setCursor:function(t){V.css("cursor",t)}}}(),it=function(){function i(t,e,i){C.allowMove&&(Z.moveOffset([e,i]),tt.updateVisible(!0)),t.preventDefault(),t.stopPropagation()}var e=rt('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),t=rt("<div />").css({position:"absolute",overflow:"hidden"}).append(e);return C.keySupport&&(e.keydown(function(t){if(t.ctrlKey||t.metaKey)return!0;var e=!!t.shiftKey?10:1;switch(t.keyCode){case 37:i(t,-e,0);break;case 39:i(t,e,0);break;case 38:i(t,0,-e);break;case 40:i(t,0,e);break;case 27:C.allowSelect&&tt.release();break;case 9:return!0}return!1}).blur(function(t){e.hide()}),T||!C.fixedSupport?(e.css({position:"absolute",left:"-20px"}),t.append(e).insertBefore(E)):e.insertBefore(E)),{watchKeys:function(){C.keySupport&&(e.show(),e.focus())}}}();Q.support&&V.bind("touchstart.jcrop",Q.newSelection),j.hide(),w(!0);var nt={setImage:function(r,o){tt.release(),d();var s=new Image;s.onload=function(){var t=s.width,e=s.height,i=C.boxWidth,n=C.boxHeight;E.width(t).height(e),E.attr("src",r),D.attr("src",r),a(E,i,n),$=E.width(),O=E.height(),D.width($).height(O),V.width($+2*q).height(O+2*q),I.width($).height(O),J.resize($,O),f(),"function"==typeof o&&o.call(nt)},s.src=r},animateTo:function(t,e){function i(){window.setTimeout(y,u)}var n=t[0]/H,r=t[1]/W,o=t[2]/H,s=t[3]/W;if(!U){var a=Z.flipCoords(n,r,o,s),c=Z.getFixed(),l=[c.x,c.y,c.x2,c.y2],h=l,u=C.animationDelay,d=a[0]-l[0],f=a[1]-l[1],p=a[2]-l[2],g=a[3]-l[3],m=0,v=C.swingSpeed;n=h[0],r=h[1],o=h[2],s=h[3],tt.animMode(!0);var y=function(){m+=(100-m)/v,h[0]=Math.round(n+m/100*d),h[1]=Math.round(r+m/100*f),h[2]=Math.round(o+m/100*p),h[3]=Math.round(s+m/100*g),99.8<=m&&(m=100),m<100?(b(h),i()):(tt.done(),tt.animMode(!1),"function"==typeof e&&e.call(nt))};i()}},setSelect:c,setOptions:function(t){n(t),w()},tellSelect:function(){return y(Z.getFixed())},tellScaled:function(){return Z.getFixed()},setClass:function(t){I.removeClass().addClass(m("holder")).addClass(t)},disable:d,enable:f,cancel:function(){tt.done(),et.activateHandlers(null,null)},release:tt.release,destroy:function(){I.remove(),P.show(),P.css("visibility","visible"),rt(t).removeData("Jcrop")},focus:it.watchKeys,getBounds:function(){return[$*H,O*W]},getWidgetSize:function(){return[$,O]},getScaleFactor:function(){return[H,W]},getOptions:function(){return C},ui:{holder:I,selection:N}};return k&&I.bind("selectstart",function(){return!1}),P.data("Jcrop",nt),nt},rt.fn.Jcrop=function(t,e){var i;return this.each(function(){if(rt(this).data("Jcrop")){if("api"===t)return rt(this).data("Jcrop");rt(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?rt.Jcrop.Loader(this,function(){rt(this).css({display:"block",visibility:"hidden"}),i=rt.Jcrop(this,t),rt.isFunction(e)&&e.call(i)}):(rt(this).css({display:"block",visibility:"hidden"}),i=rt.Jcrop(this,t),rt.isFunction(e)&&e.call(i))}),this},rt.Jcrop.Loader=function(t,e,i){var n=rt(t),r=n[0];n.bind("load.jcloader",function t(){r.complete?(n.unbind(".jcloader"),rt.isFunction(e)&&e.call(r)):window.setTimeout(t,50)}).bind("error.jcloader",function(t){n.unbind(".jcloader"),rt.isFunction(i)&&i.call(r)}),r.complete&&rt.isFunction(e)&&(n.unbind(".jcloader"),e.call(r))},rt.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(){function u(t){var e=u.modules[t];if(!e)throw new Error('failed to require "'+t+'"');return"exports"in e||"function"!=typeof e.definition||(e.client=e.component=!0,e.definition.call(this,e.exports={},e),delete e.definition),e.exports}u.loader="component",(u.helper={}).semVerSort=function(t,e){for(var i=t.version.split("."),n=e.version.split("."),r=0;r<i.length;++r){var o=parseInt(i[r],10),s=parseInt(n[r],10);if(o!==s)return s<o?1:-1;var a=i[r].substr((""+o).length),c=n[r].substr((""+s).length);if(""===a&&""!==c)return 1;if(""!==a&&""===c)return-1;if(""!==a&&""!==c)return c<a?1:-1}return 0},u.latest=function(t,e){function i(t){throw new Error('failed to find latest module of "'+t+'"')}var n=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/;/(.*)~(.*)/.test(t)||i(t);for(var r=Object.keys(u.modules),o=[],s=[],a=0;a<r.length;a++){var c=r[a];if(new RegExp(t+"@").test(c)){var l=c.substr(t.length+1);null!=n.exec(c)?o.push({version:l,name:c}):s.push({version:l,name:c})}}if(0===o.concat(s).length&&i(t),0<o.length){var h=o.sort(u.helper.semVerSort).pop().name;return!0===e?h:u(h)}h=s.sort(function(t,e){return t.name>e.name})[0].name;return!0===e?h:u(h)},u.modules={},u.register=function(t,e){u.modules[t]={definition:e}},u.define=function(t,e){u.modules[t]={exports:e}},u.register("abpetkov~transitionize@0.0.3",function(t,e){function i(t,e){if(!(this instanceof i))return new i(t,e);this.element=t,this.props=e||{},this.init()}(e.exports=i).prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},i.prototype.init=function(){var t=[];for(var e in this.props)t.push(e+" "+this.props[e]);this.element.style.transition=t.join(", "),this.isSafari()&&(this.element.style.webkitTransition=t.join(", "))}}),u.register("ftlabs~fastclick@v0.6.11",function(t,e){function n(r){"use strict";var e,t=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,!(this.layer=r)||!r.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return n.prototype.onClick.apply(t,arguments)},this.onMouse=function(){return n.prototype.onMouse.apply(t,arguments)},this.onTouchStart=function(){return n.prototype.onTouchStart.apply(t,arguments)},this.onTouchMove=function(){return n.prototype.onTouchMove.apply(t,arguments)},this.onTouchEnd=function(){return n.prototype.onTouchEnd.apply(t,arguments)},this.onTouchCancel=function(){return n.prototype.onTouchCancel.apply(t,arguments)},n.notNeeded(r)||(this.deviceIsAndroid&&(r.addEventListener("mouseover",this.onMouse,!0),r.addEventListener("mousedown",this.onMouse,!0),r.addEventListener("mouseup",this.onMouse,!0)),r.addEventListener("click",this.onClick,!0),r.addEventListener("touchstart",this.onTouchStart,!1),r.addEventListener("touchmove",this.onTouchMove,!1),r.addEventListener("touchend",this.onTouchEnd,!1),r.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(r.removeEventListener=function(t,e,i){var n=Node.prototype.removeEventListener;"click"===t?n.call(r,t,e.hijacked||e,i):n.call(r,t,e,i)},r.addEventListener=function(t,e,i){var n=Node.prototype.addEventListener;"click"===t?n.call(r,t,e.hijacked||(e.hijacked=function(t){t.propagationStopped||e(t)}),i):n.call(r,t,e,i)}),"function"==typeof r.onclick&&(e=r.onclick,r.addEventListener("click",function(t){e(t)},!1),r.onclick=null))}n.prototype.deviceIsAndroid=0<navigator.userAgent.indexOf("Android"),n.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),n.prototype.deviceIsIOS4=n.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),n.prototype.deviceIsIOSWithBadTarget=n.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),n.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},n.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},n.prototype.sendClick=function(t,e){"use strict";var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],(i=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},n.prototype.determineEventType=function(t){"use strict";return this.deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},n.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},n.prototype.updateScrollParent=function(t){"use strict";var e,i;if(!(e=t.fastClickScrollParent)||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},n.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},n.prototype.onTouchStart=function(t){"use strict";var e,i,n;if(1<t.targetTouches.length)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.deviceIsIOS){if((n=window.getSelection()).rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},n.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i},n.prototype.onTouchMove=function(t){"use strict";return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0},n.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},n.prototype.onTouchEnd=function(t){"use strict";var e,i,n,r,o,s=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(o=t.changedTouches[0],(s=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||s).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(n=s.tagName.toLowerCase())){if(e=this.findControl(s)){if(this.focus(s),this.deviceIsAndroid)return!1;s=e}}else if(this.needsFocus(s))return 100<t.timeStamp-i||this.deviceIsIOS&&window.top!==window&&"input"===n?this.targetElement=null:(this.focus(s),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,t.preventDefault())),!1;return!(!this.deviceIsIOS||this.deviceIsIOS4||!(r=s.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(s)||(t.preventDefault(),this.sendClick(s,t)),!1)},n.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},n.prototype.onMouse=function(t){"use strict";return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},n.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},n.prototype.destroy=function(){"use strict";var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},n.notNeeded=function(t){"use strict";var e,i;if(void 0===window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(31<i&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction},n.attach=function(t){"use strict";return new n(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return n}):void 0!==e&&e.exports?(e.exports=n.attach,e.exports.FastClick=n):window.FastClick=n}),u.register("component~indexof@0.0.3",function(t,e){e.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}}),u.register("component~classes@1.2.1",function(t,e){var n=u("component~indexof@0.0.3"),i=/\s+/,r=Object.prototype.toString;function o(t){if(!t)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}e.exports=function(t){return new o(t)},o.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~n(e,t)||e.push(t),this.el.className=e.join(" "),this},o.prototype.remove=function(t){if("[object RegExp]"==r.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),i=n(e,t);return~i&&e.splice(i,1),this.el.className=e.join(" "),this},o.prototype.removeMatching=function(t){for(var e=this.array(),i=0;i<e.length;i++)t.test(e[i])&&this.remove(e[i]);return this},o.prototype.toggle=function(t,e){return this.list?void 0!==e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t):void 0!==e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this},o.prototype.array=function(){var t=this.el.className.replace(/^\s+|\s+$/g,"").split(i);return""===t[0]&&t.shift(),t},o.prototype.has=o.prototype.contains=function(t){return this.list?this.list.contains(t):!!~n(this.array(),t)}}),u.register("component~event@0.1.4",function(t,e){var r=window.addEventListener?"addEventListener":"attachEvent",o=window.removeEventListener?"removeEventListener":"detachEvent",s="addEventListener"!==r?"on":"";t.bind=function(t,e,i,n){return t[r](s+e,i,n||!1),i},t.unbind=function(t,e,i,n){return t[o](s+e,i,n||!1),i}}),u.register("component~query@0.0.3",function(e,t){function i(t,e){return e.querySelector(t)}(e=t.exports=function(t,e){return i(t,e=e||document)}).all=function(t,e){return(e=e||document).querySelectorAll(t)},e.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return i=t.one,e.all=t.all,e}}),u.register("component~matches-selector@0.1.5",function(t,e){var r=u("component~query@0.0.3"),i=Element.prototype,o=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=function(t,e){if(!t||1!==t.nodeType)return!1;if(o)return o.call(t,e);for(var i=r.all(e,t.parentNode),n=0;n<i.length;++n)if(i[n]==t)return!0;return!1}}),u.register("component~closest@0.1.4",function(t,e){var r=u("component~matches-selector@0.1.5");e.exports=function(t,e,i,n){for(t=i?{parentNode:t}:t,n=n||document;(t=t.parentNode)&&t!==document;){if(r(t,e))return t;if(t===n)return}}}),u.register("component~delegate@0.2.3",function(t,e){var o=u("component~closest@0.1.4"),s=u("component~event@0.1.4");t.bind=function(i,n,t,r,e){return s.bind(i,t,function(t){var e=t.target||t.srcElement;t.delegateTarget=o(e,n,!0,i),t.delegateTarget&&r.call(i,t)},e)},t.unbind=function(t,e,i,n){s.unbind(t,e,i,n)}}),u.register("component~events@1.0.9",function(t,e){var l=u("component~event@0.1.4"),h=u("component~delegate@0.2.3");function i(t,e){if(!(this instanceof i))return new i(t,e);if(!t)throw new Error("element required");if(!e)throw new Error("object required");this.el=t,this.obj=e,this._events={}}(e.exports=i).prototype.sub=function(t,e,i){this._events[t]=this._events[t]||{},this._events[t][e]=i},i.prototype.bind=function(t,e){var i,n={name:(i=t.split(/ +/)).shift(),selector:i.join(" ")},r=this.el,o=this.obj,s=n.name,a=(e=e||"on"+s,[].slice.call(arguments,2));function c(){var t=[].slice.call(arguments).concat(a);o[e].apply(o,t)}return n.selector?c=h.bind(r,n.selector,s,c):l.bind(r,s,c),this.sub(s,e,c),c},i.prototype.unbind=function(t,e){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(t);var i=this._events[t];if(i){var n=i[e];n&&l.unbind(this.el,t,n)}},i.prototype.unbindAll=function(){for(var t in this._events)this.unbindAllOf(t)},i.prototype.unbindAllOf=function(t){var e=this._events[t];if(e)for(var i in e)this.unbind(t,i)}}),u.register("switchery",function(t,e){var i=u("abpetkov~transitionize@0.0.3"),n=u("ftlabs~fastclick@v0.6.11"),r=u("component~classes@1.2.1"),o=u("component~events@1.0.9");e.exports=a;var s={color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#fff",jackSecondaryColor:null,className:"switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s",size:"default"};function a(t,e){if(!(this instanceof a))return new a(t,e);for(var i in this.element=t,this.options=e||{},s)null==this.options[i]&&(this.options[i]=s[i]);null!=this.element&&"checkbox"==this.element.type&&this.init(),!0===this.isDisabled()&&this.disable()}a.prototype.hide=function(){this.element.style.display="none"},a.prototype.show=function(){var t=this.create();this.insertAfter(this.element,t)},a.prototype.create=function(){return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.events=o(this.switcher,this),this.switcher},a.prototype.insertAfter=function(t,e){t.parentNode.insertBefore(e,t.nextSibling)},a.prototype.setPosition=function(t){var e=this.isChecked(),i=this.switcher,n=this.jack;t&&e?e=!1:t&&!e&&(e=!0),!0===e?(this.element.checked=!0,window.getComputedStyle?n.style.left=parseInt(window.getComputedStyle(i).width)-parseInt(window.getComputedStyle(n).width)+"px":n.style.left=parseInt(i.currentStyle.width)-parseInt(n.currentStyle.width)+"px",this.options.color&&this.colorize()):(n.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor=this.options.secondaryColor!==s.secondaryColor?this.options.secondaryColor:"#fff",this.jack.style.backgroundColor=this.options.jackSecondaryColor!==this.options.jackColor?this.options.jackSecondaryColor:this.options.jackColor),this.setSpeed()},a.prototype.setSpeed=function(){var t={},e={"background-color":this.options.speed,left:this.options.speed.replace(/[a-z]/,"")/2+"s"};t=this.isChecked()?{border:this.options.speed,"box-shadow":this.options.speed,"background-color":3*this.options.speed.replace(/[a-z]/,"")+"s"}:{border:this.options.speed,"box-shadow":this.options.speed},i(this.switcher,t),i(this.jack,e)},a.prototype.setSize=function(){switch(this.options.size){case"small":r(this.switcher).add("switchery-small");break;case"large":r(this.switcher).add("switchery-large");break;default:r(this.switcher).add("switchery-default")}},a.prototype.colorize=function(){var t=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color,this.switcher.style.borderColor=this.options.color,this.switcher.style.boxShadow="inset 0 0 0 "+t+"px "+this.options.color,this.jack.style.backgroundColor=this.options.jackColor},a.prototype.handleOnchange=function(t){if(document.dispatchEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!0),this.element.dispatchEvent(e)}else this.element.fireEvent("onchange")},a.prototype.handleChange=function(){var t=this,e=this.element;e.addEventListener?e.addEventListener("change",function(){t.setPosition()}):e.attachEvent("onchange",function(){t.setPosition()})},a.prototype.handleClick=function(){var t=this.switcher;n(t),this.events.bind("click","bindClick")},a.prototype.bindClick=function(){var t="label"!==this.element.parentNode.tagName.toLowerCase();this.setPosition(t),this.handleOnchange(this.element.checked)},a.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",!0)},a.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")},a.prototype.init=function(){this.hide(),this.show(),this.setSize(),this.setPosition(),this.markAsSwitched(),this.handleChange(),this.handleClick()},a.prototype.isChecked=function(){return this.element.checked},a.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly},a.prototype.destroy=function(){this.events.unbind()},a.prototype.enable=function(){this.options.disabled&&(this.options.disabled&&(this.options.disabled=!1),this.element.disabled&&(this.element.disabled=!1),this.element.readOnly&&(this.element.readOnly=!1),this.switcher.style.opacity=1,this.events.bind("click","bindClick"))},a.prototype.disable=function(){this.options.disabled||(this.options.disabled||(this.options.disabled=!0),this.element.disabled||(this.element.disabled=!0),this.element.readOnly||(this.element.readOnly=!0),this.switcher.style.opacity=this.options.disabledOpacity,this.destroy())}}),"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=u("switchery"):"function"==typeof define&&define.amd?define("Switchery",[],function(){return u("switchery")}):(this||window).Switchery=u("switchery")}();